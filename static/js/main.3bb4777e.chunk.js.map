{"version":3,"sources":["enums/WidgetsEnum.ts","pages/store/Store.tsx","modals/CreateWidgetModal.tsx","services/auth.header.ts","reducers/actionTypes.ts","reducers/actions.ts","modals/ImportConfigModal.tsx","services/config.service.ts","navigation/navDash/NavDash.tsx","services/tab.service.ts","services/auth.service.ts","pages/login/Login.tsx","assets/logo.png","services/widget.service.ts","components/detailComponent/ComponentWithDetail.tsx","enums/ModeEnum.ts","utils/LogUtils.ts","widgets/utils/DeleteWidget.tsx","widgets/Widget.tsx","widgets/utils/circular-progress/CircularProgressWithLabel.tsx","widgets/steam/details/GameDetails.tsx","widgets/steam/SteamWidget.tsx","widgets/twitter/emptyWidget/EmptyTwitterTimelineWidget.tsx","widgets/twitter/TwitterTimelineWidget.tsx","widgets/calendar/emptyWidget/EmptyCalendarWidget.tsx","widgets/calendar/CalendarWidget.tsx","utils/DateUtils.ts","widgets/rss/article/RSSArticle.tsx","widgets/rss/emptyWidget/EmptyRSSWidget.tsx","widgets/rss/RSSWidget.tsx","hooks/localStorageHook.ts","widgets/strava/activity/StravaActivity.tsx","widgets/strava/StravaWidget.tsx","widgets/weather/emptyWidget/EmptyWeatherWidget.tsx","widgets/weather/forecast/Forecast.tsx","widgets/weather/WeatherWidget.tsx","tab/TabDash.tsx","utils/ErrorSnackbar.tsx","Dash.tsx","reducers/rootReducer.ts","reducers/store.ts","registerServiceWorker.ts","index.tsx"],"names":["WidgetTypes","Store","props","className","Object","keys","map","key","isNaN","parseInt","Card","CardContent","CardActions","Button","id","onClick","onWidgetAdded","variant","color","value","CreateWidgetModal","useState","createWidgetModal","setCreateWidgetModal","toggleCreateWidgetModal","IconButton","Dialog","onClose","open","DialogTitle","DialogContent","DialogActions","authorizationBearer","localStorage","getItem","user","JSON","parse","accessToken","TOGGLE_TAB","TOGGLE_REFRESH_WIDGETS","HANDLE_ERROR","toggleSelectedTab","type","payload","handleError","error","customErrorMessage","ImportConfigModal","selectedFile","setSelectedFile","importConfigModal","setImportConfigModal","dispatch","useDispatch","toggleImportConfigModal","name","onChange","event","target","files","disabled","file","formData","FormData","append","axios","post","process","headers","Authorization","importConfig","then","response","catch","NavDash","tab","label","setLabel","isToggled","toggle","activeTab","useSelector","state","saveTabName","tabOrder","updateTab","finally","onTabClicked","Input","onDoubleClick","onKeyPress","delete","onTabDeleted","Tab","toString","wrapped","login","username","password","data","setItem","stringify","logout","removeItem","window","location","reload","getCurrentUser","userData","Login","setUsername","setPassword","loading","setLoading","src","alt","placeholder","e","AuthService","CircularProgress","updateWidgetData","patch","ComponentWithDetail","openCollapse","setOpenCollapse","useEffect","isClosed","onOpenDetail","componentRoot","Collapse","in","componentDetail","ModeEnum","logger","winston","format","combine","json","colorize","all","level","transports","Console","DeleteWidget","onCancelButtonClicked","onDeleteButtonClicked","idWidget","Widget","READ","mode","setMode","refreshWidgets","toggleRefreshWidgets","deleteWidget","DELETE","isEmptyWidget","configValues","iterator","config","values","entry","next","done","push","some","refreshFunction","EDIT","editModeComponent","header","additionalActionButtons","body","CircularProgressWithLabel","Box","sx","position","display","top","left","bottom","right","alignItems","justifyContent","Typography","component","Math","round","GameDetails","achievements","setAchievements","completedAchievements","setCompletedAchievements","GET_ACHIEVEMENTS_URL","appid","get","params","url","playerstats","filter","achievement","achieved","message","href","img_logo_url","length","SteamWidget","playerData","setPlayerData","ownedGames","setOwnedGames","STEAM_API_URL","GET_PLAYER_SUMMARIES_URL","GET_OWNED_GAMES_URL","refreshWidget","players","games","sort","gameA","gameB","localeCompare","widgetHeader","profileurl","avatar","personaname","widgetBody","game","index","img_icon_url","link","tabId","Map","EmptyTwitterTimelineWidget","profile","setProfile","onProfileSubmitted","TwitterTimelineWidget","dataSource","sourceType","screenName","options","theme","widgetProfile","info","EmptyCalendarWidget","calendarUrls","setCalendarUrls","onCalendarUrlUpdated","calendarUrl","concat","onConfigSubmitted","CalendarWidget","calendars","schedules","setSchedules","locales","fr","localizer","dateFnsLocalizer","startOfWeek","getDay","forEach","ical","oldSchedules","eventKey","title","summary","start","end","allDay","getHours","culture","events","startAccessor","endAccessor","defaultView","popup","updatedCalendars","formatDateFromTimestamp","timestamp","offset","Date","adjustTimeWithOffset","localeOffset","getTimezoneOffset","abs","offsetMilliseconds","stripHtmlFromContent","content","div","document","createElement","innerHTML","textContent","innerText","RSSArticle","description","date","pubDate","toLocaleString","author","EmptyRSSWidget","setUrl","onUrlSubmitted","RSSWidget","feed","setFeed","setDecription","image","setImage","setLink","setTitle","isFeedClosed","setFeedClosed","readArticlesGuids","readArticles","setReadArticles","rssParser","RSSParser","fetchDataFromRssFeed","apiResult","parseString","result","items","formatTitleForArticle","article","toLocaleTimeString","hour","minute","updateRssFeed","guid","includes","rssUrl","guidsList","useLocalStorage","initialValue","item","storedValue","setStoredValue","valueToStore","Function","convertDecimalTimeToTime","decimalTime","decimalPart","StravaActivity","start_date_local","distance","moving_time","total_elevation_gain","achievement_count","average_speed","max_speed","kudos_count","comment_count","StravaWidget","activities","setActivities","athlete","setAthlete","token","setToken","refreshToken","setRefreshToken","tokenExpirationDate","setTokenExpirationDate","search","useLocation","isAfter","reverse","refreshTokenFromApi","client_id","client_secret","refresh_token","grant_type","access_token","expires_at","getActivitiesByMonth","reduce","activitiesByMonth","activity","month","getStatsFromActivities","activitiesByMonthList","x","y","total","queryString","code","apiCode","getToken","isBefore","profile_medium","firstname","lastname","getTitleToDisplay","slice","labels","datasets","backgroundColor","act","yAxisID","order","EmptyWeatherWidget","city","setCity","Forecast","dt","timezone","weekday","day","weather","icon","style","main","temp_max","temp_min","humidity","ForecastMode","WeatherWidget","WEATHER_API","API_OPTIONS","cityToQuery","setCityToQuery","setWeather","forecast","setForecast","TODAY","forecastMode","setForecastMode","fetchDataFromWeatherApi","list","undefined","filterForecastByMode","WEEK","forecastDay","forecastElement","TOMORROW","ChartJS","register","CategoryScale","LinearScale","LineElement","PointElement","temp","sys","sunrise","sunset","borderColor","feels_like","maintainAspectRatio","updatedCity","TabDash","widgets","setWidgets","createWidget","widgetConfig","widgetProps","deleteWidgetFromDashboard","WEATHER","RSS","CALENDAR","STRAVA","STEAM","TWITTER_TIMELINE","widget","newWidget","TabPanel","ErrorSnackbar","isOpen","setOpen","customMessage","setCustomMessage","errorToHandle","verticalPosition","horizontalPosition","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","severity","Dash","tabs","setTabs","setNewWidget","isMounted","useRef","ERROR_MESSAGE_INIT_DASHBOARD","refreshAllWidgets","addNewTab","insertedTab","isUserAuthenticated","authService","authenticatedUser","now","jwt_decode","exp","isTokenExpired","current","interval","setInterval","clearInterval","TabContext","onDragEnd","destination","startIndex","endIndex","Array","from","splice","removed","reorder","source","updateTabs","droppableId","direction","providedDroppable","droppableProps","ref","innerRef","TabList","draggableId","providedDraggable","draggableProps","dragHandleProps","toggleTab","addWidget","currentTarget","widgetData","responseType","URL","createObjectURL","Blob","setAttribute","appendChild","click","initialState","createStore","action","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","ReactDOM","store","getElementById","origin","addEventListener","fetch","status","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.3bb4777e.chunk.js","sourcesContent":["export enum WidgetTypes {\n  WEATHER = 1,\n  RSS = 2,\n  CALENDAR = 3,\n  STRAVA = 4,\n  STEAM = 5,\n  TWITTER = 6,\n  TWITTER_TIMELINE = 7\n}\n","import { CardActions, CardContent, Card, Button } from '@mui/material';\nimport { MouseEvent } from 'react';\nimport { WidgetTypes } from '../../enums/WidgetsEnum';\n\ninterface IProps {\n  onWidgetAdded: (type: MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport default function Store(props: IProps): React.ReactElement {\n  return (\n    <div className=\"grid grid-cols-4 gap-3\">\n      {Object.keys(WidgetTypes).map((key) => {\n        return (\n          isNaN(parseInt(key, 0)) && (\n            <Card key={key}>\n              <CardContent>\n                <div className=\"flex flex-col space-y-5\">\n                  <span>{key}</span>\n                  <span>Widget {key}</span>\n                  <span>Cliquez ci-dessous pour ajouter un widget {key} au dashboard.</span>\n                </div>\n              </CardContent>\n              <CardActions>\n                <Button\n                  id={key}\n                  onClick={props.onWidgetAdded}\n                  variant=\"contained\"\n                  color=\"success\"\n                  value={WidgetTypes[key]}\n                >\n                  Ajouter\n                </Button>\n              </CardActions>\n            </Card>\n          )\n        );\n      })}\n    </div>\n  );\n}\n","import AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton } from '@mui/material';\nimport { MouseEvent, ReactElement, useState } from 'react';\nimport Store from 'src/pages/store/Store';\ninterface IProps {\n  onWidgetAdded: (type: MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport default function CreateWidgetModal(props: IProps): ReactElement {\n  const [createWidgetModal, setCreateWidgetModal] = useState(false);\n\n  function toggleCreateWidgetModal() {\n    setCreateWidgetModal(!createWidgetModal);\n  }\n\n  return (\n    <div>\n      <IconButton id=\"openAddWidgetModal\" color=\"primary\" onClick={toggleCreateWidgetModal}>\n        <AddCircleOutlineIcon />\n      </IconButton>\n      <Dialog onClose={() => setCreateWidgetModal(false)} open={createWidgetModal}>\n        <DialogTitle>Ajouter un widget</DialogTitle>\n        <DialogContent>\n          <Store onWidgetAdded={props.onWidgetAdded} />\n        </DialogContent>\n\n        <DialogActions>\n          <Button id=\"closeAddWidgetModal\" onClick={toggleCreateWidgetModal} variant=\"contained\">\n            Fermer\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","export default function authorizationBearer(): string {\n  if (localStorage.getItem('user')) {\n    const user = JSON.parse(localStorage.getItem('user') || '');\n    if (user && user.accessToken) {\n      return 'Bearer ' + user.accessToken;\n    } else {\n      return '';\n    }\n  } else {\n    return '';\n  }\n}\n","export const TOGGLE_TAB = 'TOGGLE_TAB';\nexport const TOGGLE_REFRESH_WIDGETS = 'TOGGLE_REFRESH_WIDGETS';\nexport const HANDLE_ERROR = 'HANDLE_ERROR';\n","import { TOGGLE_TAB, TOGGLE_REFRESH_WIDGETS, HANDLE_ERROR } from './actionTypes';\n\nexport interface IErrorToHandle {\n  error: Error;\n  customErrorMessage: string;\n}\n\nexport const toggleSelectedTab = (id: number): { type: string; payload: { id: number } } => ({\n  type: TOGGLE_TAB,\n  payload: {\n    id\n  }\n});\n\nexport const toggleRefreshWidgets = (): { type: string; payload: Record<string, never> } => ({\n  type: TOGGLE_REFRESH_WIDGETS,\n  payload: {}\n});\n\nexport const handleError = (error: Error, customErrorMessage: string): { type: string; payload: IErrorToHandle } => ({\n  type: HANDLE_ERROR,\n  payload: {\n    error,\n    customErrorMessage\n  }\n});\n","import { ChangeEvent, ReactElement, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, IconButton } from '@mui/material';\nimport { importConfig } from 'src/services/config.service';\nimport UploadIcon from '@mui/icons-material/Upload';\nimport { AxiosError } from 'axios';\nimport { handleError } from 'src/reducers/actions';\n\nexport default function ImportConfigModal(): ReactElement {\n  const [selectedFile, setSelectedFile] = useState<File>();\n  const [importConfigModal, setImportConfigModal] = useState(false);\n  const dispatch = useDispatch();\n  const ERROR_IMPORT_CONFIGURATION = \"Erreur lors de l'import de la configuration.\";\n\n  function toggleImportConfigModal() {\n    setImportConfigModal(!importConfigModal);\n  }\n\n  function selectFile(event: ChangeEvent<HTMLInputElement>) {\n    if (event.target.files && event.target.files[0]) {\n      setSelectedFile(event.target.files[0]);\n    }\n  }\n\n  function upload(): void {\n    if (selectedFile) {\n      importConfig(selectedFile)\n        .then((response: boolean) => {\n          if (response) {\n            toggleImportConfigModal();\n          }\n        })\n        .catch((error: AxiosError) => dispatch(handleError(error, ERROR_IMPORT_CONFIGURATION)));\n    }\n  }\n\n  return (\n    <div>\n      <IconButton id=\"openImportConfigModal\" color=\"primary\" onClick={toggleImportConfigModal}>\n        <UploadIcon />\n      </IconButton>\n      <Dialog onClose={() => setImportConfigModal(false)} open={importConfigModal}>\n        <DialogTitle>Importer la configuration</DialogTitle>\n        <DialogContent>\n          <input type=\"file\" id=\"file\" name=\"file\" onChange={selectFile} />\n        </DialogContent>\n        <DialogActions>\n          <Button id=\"closeImportConfigModal\" onClick={toggleImportConfigModal} variant=\"contained\">\n            Annuler\n          </Button>\n          <Button id=\"uploadFileButton\" disabled={!selectedFile} onClick={upload} variant=\"contained\">\n            Upload\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import axios, { AxiosResponse } from 'axios';\nimport authorizationBearer from './auth.header';\n\nexport function exportConfig(): Promise<AxiosResponse<BlobPart>> {\n  return axios.get(`${process.env.REACT_APP_BACKEND_URL}/config/export`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    },\n    responseType: 'blob'\n  });\n}\n\nexport function importConfig(file: File): Promise<boolean> {\n  const formData = new FormData();\n  formData.append('file', file);\n  return axios.post(`${process.env.REACT_APP_BACKEND_URL}/config/import`, formData, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'content-type': 'multipart/form-data'\n    }\n  });\n}\n","import { ReactElement, useState } from 'react';\nimport { ITab } from '../../model/Tab';\nimport { deleteTab, updateTab } from '../../services/tab.service';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { IconButton, Input, Tab } from '@mui/material';\nimport DragHandleIcon from '@mui/icons-material/DragHandle';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IReducerState } from 'src/reducers/rootReducer';\nimport { AxiosError } from 'axios';\nimport { handleError } from 'src/reducers/actions';\n\ninterface IProps {\n  tab: ITab;\n  onTabClicked: () => void;\n  onTabDeleted: (id: number) => void;\n}\n\nexport default function NavDash(props: IProps): ReactElement {\n  const [label, setLabel] = useState(props.tab.label);\n  const [isToggled, toggle] = useState(false);\n  const activeTab = useSelector((state: IReducerState) => state.activeTab);\n  const dispatch = useDispatch();\n\n  const ERROR_MESSAGE_UPDATE_TAB = \"Erreur lors de la modification d'un onglet.\";\n  const ERROR_MESSAGE_DELETE_TAB = \"Erreur lors de la suppression d'un onglet.\";\n\n  function deleteTabFromDash() {\n    deleteTab(props.tab.id)\n      .then(() => props.onTabDeleted(props.tab.id))\n      .catch((error: AxiosError) => dispatch(handleError(error, ERROR_MESSAGE_DELETE_TAB)));\n  }\n\n  function saveTabName() {\n    updateTab(props.tab.id, label, props.tab.tabOrder)\n      .catch((error: AxiosError) => dispatch(handleError(error, ERROR_MESSAGE_UPDATE_TAB)))\n      .finally(() => toggle(!isToggled));\n  }\n\n  function clickToggle() {\n    toggle(!isToggled);\n  }\n\n  function enterSaveTabName(event: React.KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      saveTabName();\n    }\n  }\n\n  return (\n    <div\n      onClick={props.onTabClicked}\n      className={`tab ${props.tab.id === activeTab ? 'selectedItem' : ''} border-2 border-gray-800 border-opacity-100`}\n    >\n      {isToggled ? (\n        <div className=\"flex flex-row\">\n          <Input\n            onDoubleClick={saveTabName}\n            onKeyPress={enterSaveTabName}\n            onChange={(event) => setLabel(event.target.value)}\n            value={label}\n          />\n          <IconButton className=\"deleteTabButton\" color=\"primary\" onClick={deleteTabFromDash}>\n            <DeleteIcon />\n          </IconButton>\n        </div>\n      ) : (\n        <div className=\"flex flex-row\">\n          <div>\n            <Tab onDoubleClick={clickToggle} value={props.tab.id.toString()} label={label} wrapped />\n          </div>\n          <div>\n            <DragHandleIcon />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import axios, { AxiosResponse } from 'axios';\nimport { ITab } from '../model/Tab';\nimport authorizationBearer from './auth.header';\n\nexport function getTabs(): Promise<AxiosResponse<ITab[]>> {\n  return axios.get(`${process.env.REACT_APP_BACKEND_URL}/tab/`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n\nexport function addTab(label: string): Promise<AxiosResponse<ITab>> {\n  return axios.post(\n    `${process.env.REACT_APP_BACKEND_URL}/tab/addTab`,\n    { label: label },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function updateTab(id: number, label: string, tabOrder: number): Promise<AxiosResponse<unknown>> {\n  return axios.post(\n    `${process.env.REACT_APP_BACKEND_URL}/tab/updateTab`,\n    { id: id, label: label, tabOrder: tabOrder },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function updateTabs(tabs: ITab[]): Promise<AxiosResponse<unknown>> {\n  return axios.post(`${process.env.REACT_APP_BACKEND_URL}/tab/updateTabs`, tabs, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n\nexport function deleteTab(id: number): Promise<AxiosResponse<unknown>> {\n  return axios.delete(`${process.env.REACT_APP_BACKEND_URL}/tab/deleteTab/?id=${id}`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n","import axios, { AxiosResponse } from 'axios';\nimport { IUser } from './../model/User';\n\nconst headers = {\n  'Content-type': 'application/json'\n};\n\nfunction login(username: string, password: string): Promise<IUser> {\n  return axios\n    .post<IUser>(\n      `${process.env.REACT_APP_BACKEND_URL}/auth/login`,\n      {\n        username,\n        password\n      },\n      {\n        headers\n      }\n    )\n    .then((response: AxiosResponse<IUser>) => {\n      if (response.data.accessToken) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n      }\n\n      return response.data;\n    });\n}\n\nfunction logout(): void {\n  localStorage.removeItem('user');\n  window.location.reload();\n}\n\nfunction getCurrentUser(): IUser | null {\n  const userData = localStorage.getItem('user');\n  if (!userData) {\n    return null;\n  } else {\n    return JSON.parse(userData);\n  }\n}\n\nexport default {\n  login,\n  logout,\n  getCurrentUser\n};\n","import { Button, CircularProgress, Input } from '@mui/material';\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { handleError } from 'src/reducers/actions';\nimport logo from '../../assets/logo.png';\nimport AuthService from '../../services/auth.service';\n\nexport default function Login(): React.ReactElement {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const dispatch = useDispatch();\n\n  const ERROR_AUTHENTICATING_USER = \"Erreur lors de la connexion de l'utilisateur.\";\n\n  const onChangeUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUsername(e.target.value);\n  };\n\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  };\n\n  function handleLogin() {\n    setLoading(true);\n\n    if (username && password) {\n      AuthService.login(username, password).then(\n        () => {\n          window.location.reload();\n          setLoading(false);\n        },\n        (error) => {\n          setLoading(false);\n          dispatch(handleError(error, ERROR_AUTHENTICATING_USER));\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"flex h-screen\">\n      <div className=\"text-center m-auto\">\n        <div>\n          <img src={logo} className=\"mx-auto\" alt=\"dash logo\" />\n        </div>\n        <div>\n          <h1 className=\"text-5xl\">Dash</h1>\n        </div>\n        <div className=\"flex flex-col mt-10 space-y-5\">\n          <Input id=\"inputUsername\" placeholder=\"Username\" value={username} onChange={onChangeUsername} />\n\n          <Input\n            id=\"inputPassword\"\n            placeholder=\"Password\"\n            type=\"password\"\n            value={password}\n            onChange={onChangePassword}\n          />\n\n          <Button\n            id=\"loginButton\"\n            disabled={!username || !password || loading}\n            onClick={handleLogin}\n            variant=\"contained\"\n            className=\"flex mx-auto\"\n          >\n            {loading && <CircularProgress className=\"mr-5\" />}\n            <span>Se connecter</span>\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","export default \"data:image/png;base64,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\"","import axios, { AxiosResponse } from 'axios';\nimport { IWidgetConfig } from 'src/widgets/IWidgetConfig';\nimport authorizationBearer from './auth.header';\n\nexport function getWidgets(tabId: number): Promise<AxiosResponse<IWidgetConfig[]>> {\n  return axios.get(`${process.env.REACT_APP_BACKEND_URL}/widget/?tabId=${tabId}`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n\nexport function addWidget(type: string, tabId: number): Promise<AxiosResponse<unknown>> {\n  return axios.post(\n    `${process.env.REACT_APP_BACKEND_URL}/widget/addWidget`,\n    { type: type, tab: { id: tabId } },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function updateWidgetData(id: number, data: unknown): Promise<AxiosResponse<IWidgetConfig>> {\n  return axios.patch(\n    `${process.env.REACT_APP_BACKEND_URL}/widget/updateWidgetData/${id}`,\n    { data: data },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function deleteWidget(id: number): Promise<AxiosResponse<unknown>> {\n  return axios.delete(`${process.env.REACT_APP_BACKEND_URL}/widget/deleteWidget/?id=${id}`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n","import { Card, CardContent, Collapse } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport './ComponentWithDetail.scss';\n\ninterface IProps {\n  componentRoot: React.ReactNode | string;\n  componentDetail: React.ReactNode | string;\n  link?: string;\n  isClosed?: boolean;\n  onOpenDetail?: () => void;\n}\n\nexport default function ComponentWithDetail(props: IProps): React.ReactElement {\n  const [openCollapse, setOpenCollapse] = useState(false);\n\n  useEffect(() => {\n    if (props.isClosed) {\n      setOpenCollapse(false);\n    }\n  }, [props.isClosed]);\n\n  const toggleCollapse = () => {\n    if (!openCollapse && props.onOpenDetail) {\n      props.onOpenDetail();\n    }\n    setOpenCollapse(!openCollapse);\n  };\n\n  return (\n    <div>\n      <div onClick={toggleCollapse} className=\"title\">\n        {props.componentRoot}\n      </div>\n      <div>\n        <Collapse in={openCollapse}>\n          <Card>\n            <CardContent>{openCollapse && props.componentDetail && props.componentDetail}</CardContent>\n          </Card>\n        </Collapse>\n      </div>\n    </div>\n  );\n}\n","export enum ModeEnum {\n  READ = 1,\n  EDIT = 2,\n  DELETE = 3\n}\n","import * as winston from 'winston';\n\nconst logger = winston.createLogger({\n  format: winston.format.combine(winston.format.json(), winston.format.colorize({ all: true })),\n  level: 'debug',\n  transports: [new winston.transports.Console()]\n});\n\nexport default logger;\n","import { Button } from '@mui/material';\nimport { ReactElement } from 'react';\n\ninterface IProps {\n  idWidget: number;\n  onCancelButtonClicked: () => void;\n  onDeleteButtonClicked: (idWidget: number) => void;\n}\n\nexport default function DeleteWidget(props: IProps): ReactElement {\n  const confirmDeleteWidget = () => {\n    props.onDeleteButtonClicked(props.idWidget);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full place-items-center justify-center space-y-5\">\n      <h4 className=\"font-bold\">Êtes-vous sûr de vouloir supprimer ce widget ?</h4>\n      <div className=\"flex flex-row justify-around w-full\">\n        <Button onClick={props.onCancelButtonClicked} variant=\"contained\" color=\"primary\" className=\"cancelButton\">\n          Annuler\n        </Button>\n        <Button onClick={confirmDeleteWidget} variant=\"contained\" color=\"error\" className=\"validateDeletionButton\">\n          Supprimer\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import { ReactElement, useEffect, useState } from 'react';\nimport { ModeEnum } from '../enums/ModeEnum';\nimport DeleteWidget from './utils/DeleteWidget';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport { IconButton } from '@mui/material';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport './Widget.scss';\nimport { useSelector } from 'react-redux';\nimport { IReducerState } from 'src/reducers/rootReducer';\n\ninterface IProps {\n  id: number;\n  tabId: number;\n  config: Map<string, unknown>;\n  header: ReactElement;\n  body: ReactElement;\n  additionalActionButtons?: ReactElement;\n  editModeComponent?: ReactElement;\n  refreshFunction: () => void;\n  onDeleteButtonClicked: (idWidget: number) => void;\n}\n\nexport default function Widget(props: IProps): ReactElement {\n  const [mode, setMode] = useState(ModeEnum.READ);\n  const refreshWidgets = useSelector((state: IReducerState) => state.toggleRefreshWidgets);\n\n  useEffect(props.refreshFunction, [refreshWidgets]);\n\n  useEffect(() => setMode(ModeEnum.READ), [props.config]);\n\n  function editWidget() {\n    if (props.editModeComponent) {\n      setMode(ModeEnum.EDIT);\n    }\n  }\n\n  function cancelDeletion() {\n    setMode(ModeEnum.READ);\n  }\n\n  function deleteWidget() {\n    setMode(ModeEnum.DELETE);\n  }\n\n  function isEmptyWidget(): boolean {\n    const configValues = [];\n    const iterator = props.config.values();\n    let entry = iterator.next();\n    while (!entry.done) {\n      configValues.push(entry.value);\n      entry = iterator.next();\n    }\n    return configValues.some((value) => !value);\n  }\n\n  return (\n    <div className=\"widget h-96 m-2 border-2 border-solid border-black\">\n      {mode === ModeEnum.DELETE && (\n        <DeleteWidget\n          idWidget={props.id}\n          onDeleteButtonClicked={props.onDeleteButtonClicked}\n          onCancelButtonClicked={cancelDeletion}\n        />\n      )}\n\n      {(mode === ModeEnum.EDIT || (isEmptyWidget() && mode !== ModeEnum.DELETE)) && props.editModeComponent !== null && (\n        <div className=\"flex flex-col\">\n          <div className=\"grid justify-items-end m-2\">\n            <IconButton onClick={deleteWidget} className=\"deleteButton\">\n              <DeleteIcon />\n            </IconButton>\n          </div>\n          <div>{props.editModeComponent}</div>\n        </div>\n      )}\n\n      {mode === ModeEnum.READ && !isEmptyWidget() && (\n        <div>\n          <div className=\"header h-10 flex flex-row justify-between sticky top-0\">\n            <div className=\"font-bold w-1/2\">{props.header}</div>\n            <div className=\"flex flex-row max-w-1/2\">\n              {props.additionalActionButtons}\n              {props.editModeComponent && (\n                <IconButton onClick={editWidget} className=\"editButton\">\n                  <SettingsIcon />\n                </IconButton>\n              )}\n              <IconButton onClick={props.refreshFunction} className=\"refreshButton\">\n                <RefreshIcon />\n              </IconButton>\n              <IconButton onClick={deleteWidget} className=\"deleteButton\">\n                <DeleteIcon />\n              </IconButton>\n            </div>\n          </div>\n          <div className=\"max-h-80 overflow-y-scroll\">{props.body}</div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import Box from '@mui/material/Box';\nimport CircularProgress, { CircularProgressProps } from '@mui/material/CircularProgress';\nimport Typography from '@mui/material/Typography';\nimport * as React from 'react';\n\nexport default function CircularProgressWithLabel(\n  props: CircularProgressProps & { value: number }\n): React.ReactElement {\n  return (\n    <Box sx={{ position: 'relative', display: 'inline-flex' }}>\n      <CircularProgress variant=\"determinate\" {...props} />\n      <Box\n        sx={{\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0,\n          position: 'absolute',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        }}\n      >\n        <Typography className=\"progressValue\" variant=\"caption\" component=\"div\" color=\"text.secondary\">\n          {`${Math.round(props.value)}%`}\n        </Typography>\n      </Box>\n    </Box>\n  );\n}\n","import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport authorizationBearer from 'src/services/auth.header';\nimport logger from 'src/utils/LogUtils';\nimport CircularProgressWithLabel from 'src/widgets/utils/circular-progress/CircularProgressWithLabel';\nimport { IGameInfo } from '../IGameInfo';\n\ninterface IAchievement {\n  apiname: string;\n  achieved: number;\n  unlocktime: number;\n}\n\ninterface IAchievementResponse {\n  playerstats: {\n    achievements: IAchievement[];\n  };\n}\n\nexport default function GameDetails(props: IGameInfo): React.ReactElement {\n  const [achievements, setAchievements] = useState<IAchievement[]>([]);\n  const [completedAchievements, setCompletedAchievements] = useState<IAchievement[]>([]);\n  const STEAM_API_URL = 'https://api.steampowered.com';\n  const STEAM_IMAGE_URL = 'https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/apps/';\n  const STEAM_COMMUNITY_URL = 'https://steamcommunity.com/app/';\n  const GET_ACHIEVEMENTS_URL = `${STEAM_API_URL}/ISteamUserStats/GetPlayerAchievements/v0001/?appid=${props.appid}&key=${process.env.REACT_APP_STEAM_API_KEY}&steamid=${process.env.REACT_APP_STEAM_USER_ID}`;\n\n  useEffect(() => {\n    axios\n      .get<IAchievementResponse>(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        },\n        params: {\n          url: GET_ACHIEVEMENTS_URL\n        }\n      })\n      .then((response) => {\n        if (response.data.playerstats.achievements) {\n          setAchievements(response.data.playerstats.achievements);\n          setCompletedAchievements(\n            response.data.playerstats.achievements.filter((achievement: IAchievement) => achievement.achieved === 1)\n          );\n        }\n      })\n      .catch((error) => logger.error(error.message));\n  }, [props]);\n\n  return (\n    <div>\n      <div className=\"flex flex-row\">\n        <div>{props.name}</div>\n        <a href={`${STEAM_COMMUNITY_URL}${props.appid}`}>\n          <img src={`${STEAM_IMAGE_URL}${props.appid}/${props.img_logo_url}.jpg`} />\n        </a>\n      </div>\n      {achievements && completedAchievements && achievements.length > 0 && (\n        <div className=\"flex flex-row\">\n          <div className=\"flex flex-col\">\n            <div className=\"totalachievements\">Succès : {achievements.length}</div>\n            <div className=\"completedAchievements\">Succès complétés : {completedAchievements.length}</div>\n          </div>\n          <CircularProgressWithLabel value={(completedAchievements.length / achievements.length) * 100} />\n        </div>\n      )}\n    </div>\n  );\n}\n","import axios, { AxiosError } from 'axios';\nimport { useEffect, useState } from 'react';\nimport ComponentWithDetail from 'src/components/detailComponent/ComponentWithDetail';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport GameDetails from './details/GameDetails';\nimport { IGameInfo } from './IGameInfo';\nimport { IPlayerData } from './IPlayerData';\n\ninterface IPlayerDataResponse {\n  response: {\n    players: IPlayerData[];\n  };\n}\n\ninterface IOwnedGamesResponse {\n  response: {\n    games: IGameInfo[];\n  };\n}\n\nexport default function SteamWidget(props: IBaseWidgetConfig): React.ReactElement {\n  const [playerData, setPlayerData] = useState<IPlayerData>();\n  const [ownedGames, setOwnedGames] = useState<IGameInfo[]>();\n\n  const STEAM_API_URL = 'https://api.steampowered.com';\n  const GET_PLAYER_SUMMARIES_URL = `/ISteamUser/GetPlayerSummaries/v0002/?key=${process.env.REACT_APP_STEAM_API_KEY}&steamids=${process.env.REACT_APP_STEAM_USER_ID}`;\n  const GET_OWNED_GAMES_URL = `/IPlayerService/GetOwnedGames/v0001/?key=${process.env.REACT_APP_STEAM_API_KEY}&steamid=${process.env.REACT_APP_STEAM_USER_ID}&format=json&include_appinfo=true`;\n  const STEAM_IMAGE_URL = 'https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/apps/';\n  const STEAM_COMMUNITY_URL = 'https://steamcommunity.com/app/';\n\n  useEffect(() => {\n    refreshWidget();\n  }, []);\n\n  function refreshWidget() {\n    getPlayerData();\n    getOwnedGames();\n  }\n\n  function getPlayerData(): void {\n    axios\n      .get<IPlayerDataResponse>(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        },\n        params: {\n          url: `${STEAM_API_URL}${GET_PLAYER_SUMMARIES_URL}`\n        }\n      })\n      .then((response) => setPlayerData(response.data.response.players[0]))\n      .catch((error: Error) => logger.error(error.message));\n  }\n\n  function getOwnedGames(): void {\n    axios\n      .get<IOwnedGamesResponse>(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        },\n        params: {\n          url: `${STEAM_API_URL}${GET_OWNED_GAMES_URL}`\n        }\n      })\n      .then((response) =>\n        setOwnedGames(\n          (response.data.response.games as IGameInfo[]).sort((gameA, gameB) => gameA.name.localeCompare(gameB.name))\n        )\n      )\n      .catch((error: AxiosError) => logger.error(error.message));\n  }\n\n  const widgetHeader = (\n    <div>\n      <a href={playerData?.profileurl} className=\"flex flex-row\">\n        <img src={playerData?.avatar} />\n        <p>{playerData?.personaname}</p>\n      </a>\n    </div>\n  );\n\n  const widgetBody = (\n    <div className=\"flex flex-col\">\n      {ownedGames &&\n        ownedGames.map((game: IGameInfo, index: number) => {\n          return (\n            <ComponentWithDetail\n              key={game.appid}\n              componentRoot={\n                <div className={`gameInfo flex flex-row ${index % 2 ? 'bg-gray-200' : ''}`}>\n                  <div>\n                    <img src={`${STEAM_IMAGE_URL}${game.appid}/${game.img_icon_url}.jpg`} />\n                  </div>\n                  <div>{game.name}</div>\n                </div>\n              }\n              componentDetail={<GameDetails {...game} />}\n              link={`${STEAM_COMMUNITY_URL}${game.appid}`}\n            />\n          );\n        })}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={new Map()}\n      header={widgetHeader}\n      body={widgetBody}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { Button, Input } from '@mui/material';\nimport { useState } from 'react';\n\ninterface IProps {\n  profile?: string;\n  onProfileSubmitted: (profile: string) => void;\n}\n\nexport default function EmptyTwitterTimelineWidget(props: IProps): React.ReactElement {\n  const [profile, setProfile] = useState(props.profile);\n  const onChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => setProfile(event.target.value);\n  const onValidation = () => {\n    if (profile) {\n      props.onProfileSubmitted(profile);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col mx-auto max-w-xs mt-10 space-y-8\">\n      <Input\n        id=\"twitterProfileName\"\n        onChange={onChangeHandler}\n        value={profile}\n        placeholder=\"Saisissez le nom de l'utilisateur\"\n      />\n      <Button\n        className=\"validateProfileButton\"\n        variant=\"contained\"\n        color=\"success\"\n        onClick={onValidation}\n        disabled={!profile || profile?.length < 1}\n      >\n        Valider\n      </Button>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { Timeline } from 'react-twitter-widgets';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport { updateWidgetData } from 'src/services/widget.service';\nimport logger from 'src/utils/LogUtils';\nimport Widget from '../Widget';\nimport EmptyTwitterTimelineWidget from './emptyWidget/EmptyTwitterTimelineWidget';\n\ninterface IProps extends IBaseWidgetConfig {\n  profile?: string;\n}\n\nexport default function TwitterTimelineWidget(props: IProps): React.ReactElement {\n  const [profile, setProfile] = useState<string>(props.profile || '');\n\n  useEffect(() => {\n    if (props.profile) {\n      setProfile(props.profile);\n    }\n  }, []);\n\n  function onProfileSubmitted(widgetProfile: string): void {\n    updateWidgetData(props.id, { profile: widgetProfile })\n      .then(() => setProfile(widgetProfile))\n      .catch((error) => logger.error(error.message));\n  }\n\n  const widgetHeader = <div className=\"timelineHeader\">Timeline de {profile}</div>;\n\n  const widgetBody = (\n    <div>\n      {profile && <Timeline dataSource={{ sourceType: 'profile', screenName: profile }} options={{ theme: 'dark' }} />}\n    </div>\n  );\n\n  function refreshWidget() {\n    logger.info(`Refresh Twitter timeline widget ${profile}`);\n  }\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={new Map<string, unknown>([['profile', profile]])}\n      header={widgetHeader}\n      body={widgetBody}\n      editModeComponent={<EmptyTwitterTimelineWidget profile={profile} onProfileSubmitted={onProfileSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { Button, Input } from '@mui/material';\nimport { useState } from 'react';\n\ninterface IProps {\n  calendarUrls?: string[];\n  onConfigSubmitted: (calendarUrls: string[]) => void;\n}\n\nexport default function EmptyCalendarWidget(props: IProps): React.ReactElement {\n  const [calendarUrls, setCalendarUrls] = useState<string[]>(props.calendarUrls || []);\n  const onValidation = () => {\n    props.onConfigSubmitted(calendarUrls);\n  };\n\n  const onCalendarUrlUpdated = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setCalendarUrls(\n      calendarUrls.map((url: string, index: number) =>\n        index.toString() === event.target?.id ? event.target.value : url\n      )\n    );\n  };\n\n  const onCalendarUrlAdded = () => {\n    setCalendarUrls(calendarUrls.concat(''));\n  };\n\n  function removeCalendarUrl(calendarUrl: string) {\n    setCalendarUrls(calendarUrls.filter((url) => url !== calendarUrl));\n  }\n\n  return (\n    <div>\n      <div>\n        {calendarUrls &&\n          calendarUrls.map((url, index) => {\n            return (\n              <div key={index} className=\"flex flex-row\">\n                <Input\n                  id={index.toString()}\n                  onChange={onCalendarUrlUpdated}\n                  value={url}\n                  placeholder=\"Saisissez une URL\"\n                />\n\n                <Button\n                  className=\"removeCalendarUrl\"\n                  variant=\"contained\"\n                  color=\"error\"\n                  onClick={() => removeCalendarUrl(url)}\n                >\n                  Supprimer\n                </Button>\n              </div>\n            );\n          })}\n        <Button id=\"addCalendarUrl\" variant=\"contained\" onClick={onCalendarUrlAdded}>\n          Ajouter\n        </Button>\n      </div>\n      <Button\n        id=\"validateCalendarUrls\"\n        onClick={onValidation}\n        disabled={!calendarUrls || calendarUrls?.length < 1}\n        variant=\"contained\"\n        color=\"success\"\n      >\n        Valider\n      </Button>\n    </div>\n  );\n}\n","import axios from 'axios';\nimport format from 'date-fns/format';\nimport getDay from 'date-fns/getDay';\nimport { fr } from 'date-fns/locale';\nimport parse from 'date-fns/parse';\nimport startOfWeek from 'date-fns/startOfWeek';\nimport * as ical from 'ical';\nimport { ReactElement, useEffect, useState } from 'react';\nimport { Calendar, dateFnsLocalizer, Event } from 'react-big-calendar';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport { updateWidgetData } from '../../services/widget.service';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport './CalendarWidget.scss';\nimport EmptyCalendarWidget from './emptyWidget/EmptyCalendarWidget';\n\nexport interface IProps extends IBaseWidgetConfig {\n  calendars?: string[];\n}\n\nexport default function CalendarWidget(props: IProps): ReactElement {\n  const [calendarUrls, setCalendarUrls] = useState(props.calendars);\n  const [schedules, setSchedules] = useState<Event[]>([]);\n\n  const locales = {\n    fr: fr\n  };\n  const localizer = dateFnsLocalizer({\n    format,\n    parse,\n    startOfWeek,\n    getDay,\n    locales\n  });\n\n  useEffect(() => {\n    refreshWidget();\n  }, [calendarUrls]);\n\n  function onConfigSubmitted(updatedCalendars: string[]) {\n    updateWidgetData(props.id, { calendars: updatedCalendars })\n      .then(() => {\n        if (updatedCalendars === calendarUrls) {\n          refreshWidget();\n        }\n        setCalendarUrls(updatedCalendars);\n      })\n      .catch((error) => logger.error(error.message));\n  }\n\n  function refreshWidget() {\n    setSchedules([]);\n    calendarUrls?.forEach((calendarUrl: string) => {\n      axios\n        .get<string>(`${process.env.REACT_APP_BACKEND_URL}/proxy/?url=${calendarUrl}`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          }\n        })\n        .then((response) => {\n          const data = ical.parseICS(response.data);\n          setSchedules((oldSchedules) =>\n            oldSchedules.concat(\n              ...Object.keys(data).map((eventKey) => {\n                const event = data[eventKey];\n                return {\n                  title: event.summary,\n                  start: event.start,\n                  end: event.end,\n                  allDay: event.end?.getHours() === 0 && event.start?.getHours() === 0\n                };\n              })\n            )\n          );\n        })\n        .catch((error) => logger.error(error));\n    });\n  }\n\n  const widgetHeader = <div>Calendar</div>;\n\n  const widgetBody = (\n    <div>\n      <Calendar\n        localizer={localizer}\n        culture={'fr'}\n        events={schedules}\n        startAccessor=\"start\"\n        endAccessor=\"end\"\n        defaultView=\"month\"\n        popup={true}\n        className=\"h-screen\"\n      />\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={new Map<string, unknown>([['calendars', calendarUrls]])}\n      header={widgetHeader}\n      body={widgetBody}\n      editModeComponent={<EmptyCalendarWidget calendarUrls={calendarUrls} onConfigSubmitted={onConfigSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","export function formatDateFromTimestamp(timestamp: number, offset = 0): Date {\n  return new Date(timestamp * 1000 + offset * 1000);\n}\n\nexport function formatDateFromUTC(date: string): string {\n  const parsedDate = new Date(date);\n  return parsedDate.toLocaleString('fr');\n}\n\nexport function adjustTimeWithOffset(offset: number): number {\n  const localeOffset = -(new Date().getTimezoneOffset() * 60);\n  if (Math.abs(offset) === Math.abs(localeOffset)) {\n    return 0;\n  }\n  const offsetMilliseconds = Math.abs(offset) + Math.abs(localeOffset);\n  return offset < localeOffset ? -offsetMilliseconds : offsetMilliseconds;\n}\n","import { FunctionComponent } from 'react';\nimport { formatDateFromUTC } from '../../../utils/DateUtils';\nimport { IArticle } from './IArticle';\n\nfunction stripHtmlFromContent(content?: string) {\n  const div = document.createElement('div');\n  div.innerHTML = content || '';\n  return div.textContent || div.innerText || '';\n}\n\nconst RSSArticle: FunctionComponent<IArticle> = (props) => {\n  return (\n    <div className=\"border-2 border-gray-500 border-solid\">\n      <div className=\"articleTitle\">\n        <a href={props.link}>{props.title}</a>\n      </div>\n      <div className=\"articleContent\">\n        {stripHtmlFromContent(props.content) || stripHtmlFromContent(props.description)}\n      </div>\n      <div className=\"articlePubDate\">\n        Publié le {formatDateFromUTC(props.pubDate || '')} {props.author && 'par ' + props.author}\n      </div>\n    </div>\n  );\n};\n\nexport default RSSArticle;\n","import { Button, Input } from '@mui/material';\nimport { useState } from 'react';\n\ninterface IProps {\n  url?: string;\n  onUrlSubmitted: (url: string) => void;\n}\n\nexport default function EmptyRSSWidget(props: IProps): React.ReactElement {\n  const [url, setUrl] = useState(props.url);\n  const onChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => setUrl(event.target.value);\n  const onValidation = () => {\n    if (url) {\n      props.onUrlSubmitted(url);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col mx-auto max-w-xs mt-10 space-y-8\">\n      <Input\n        id=\"rssFeedUrl\"\n        name=\"url\"\n        onChange={onChangeHandler}\n        value={url}\n        placeholder=\"Saisissez l'URL du flux RSS\"\n      />\n      <Button\n        className=\"validateRssUrl\"\n        color=\"success\"\n        variant=\"contained\"\n        onClick={onValidation}\n        disabled={!url || url?.length < 1}\n      >\n        Valider\n      </Button>\n    </div>\n  );\n}\n","import CheckIcon from '@mui/icons-material/Check';\nimport MinimizeIcon from '@mui/icons-material/Minimize';\nimport { IconButton } from '@mui/material';\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport RSSParser from 'rss-parser';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport ComponentWithDetail from '../../components/detailComponent/ComponentWithDetail';\nimport { updateWidgetData } from '../../services/widget.service';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport { IArticle, ImageContent, IRSSHeader } from './article/IArticle';\nimport RSSArticle from './article/RSSArticle';\nimport EmptyRSSWidget from './emptyWidget/EmptyRSSWidget';\nimport './RSSWidget.scss';\n\ninterface IProps extends IBaseWidgetConfig {\n  url?: string;\n  readArticlesGuids?: string[];\n}\n\nexport default function RSSWidget(props: IProps): React.ReactElement {\n  const [feed, setFeed] = useState<IArticle[]>([]);\n  const [url, setUrl] = useState(props.url);\n  const [description, setDecription] = useState('');\n  const [image, setImage] = useState<ImageContent>();\n  const [link, setLink] = useState('');\n  const [title, setTitle] = useState('');\n  const [isFeedClosed, setFeedClosed] = useState(true);\n  const [readArticles, setReadArticles] = useState<string[]>(props.readArticlesGuids || []);\n  const rssParser = new RSSParser();\n\n  function fetchDataFromRssFeed() {\n    if (url) {\n      axios\n        .get<string>(`${process.env.REACT_APP_BACKEND_URL}/proxy/?url=${url}`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          }\n        })\n        .then((apiResult) => {\n          rssParser\n            .parseString(apiResult.data)\n            .then((response) => {\n              const result = response as IRSSHeader;\n              setDecription(result.description);\n              setFeed(result.items);\n              setImage(result.image);\n              setLink(result.link);\n              setTitle(result.title);\n            })\n            .catch((error) => logger.error(error.message));\n        })\n        .catch((error) => logger.error(error.message));\n    }\n  }\n\n  function refreshWidget(): void {\n    setFeed([]);\n    fetchDataFromRssFeed();\n  }\n\n  useEffect(refreshWidget, [url]);\n\n  function onUrlSubmitted(rssUrl: string): void {\n    updateWidgetData(props.id, { url: rssUrl, guidsList: [] })\n      .then(() => setUrl(rssUrl))\n      .catch((error) => logger.error(error.message));\n  }\n\n  function formatTitleForArticle(article: IArticle) {\n    const date = article.pubDate\n      ? new Date(article.pubDate).toLocaleTimeString('fr', {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      : '';\n    return `${date} ${article.title}`;\n  }\n\n  function onOpenDetail(guid: string): void {\n    setFeedClosed(false);\n    if (!readArticles.includes(guid)) {\n      updateRssFeed([guid, ...readArticles]);\n    }\n  }\n\n  function markAllFeedAsRead(): void {\n    updateRssFeed(feed.map((article) => article.guid));\n  }\n\n  function updateRssFeed(readArticlesGuids: string[]): void {\n    updateWidgetData(props.id, {\n      url: url,\n      readArticlesGuids: readArticlesGuids\n    })\n      .then((result) => setReadArticles(result.data.data.readArticlesGuids as []))\n      .catch((error) => logger.error(error.message));\n  }\n\n  function closeFeeds(): void {\n    setFeedClosed(true);\n  }\n\n  function getFeedFromRSS(data: IArticle[]) {\n    return data.map((article, index: number) => {\n      return (\n        <ComponentWithDetail\n          key={article.guid}\n          componentRoot={\n            <div\n              className={`rssArticle \n              ${readArticles.includes(article.guid) ? 'read' : ''} \n              ${index % 2 ? 'bg-gray-200' : ''}`}\n            >\n              {formatTitleForArticle(article)}\n            </div>\n          }\n          componentDetail={<RSSArticle {...article} />}\n          link={article.link}\n          isClosed={isFeedClosed}\n          onOpenDetail={() => onOpenDetail(article.guid)}\n        />\n      );\n    });\n  }\n\n  const widgetHeader = (\n    <div className=\"h-10\">\n      <a href={link} className=\"flex flex-row\">\n        {image && <img className=\"max-h-9 max-w-1\" src={image?.url} alt=\"logo\" />}\n        <div className=\"rssTitle whitespace-nowrap overflow-hidden overflow-ellipsis\">{title}</div>\n      </a>\n    </div>\n  );\n\n  const additionalActionButtons = (\n    <div className=\"flex flex-row\">\n      <IconButton className=\"markAllArticlesAsRead\" color=\"primary\" onClick={markAllFeedAsRead}>\n        <CheckIcon />\n      </IconButton>\n\n      <IconButton className=\"minimizeAllArticles\" color=\"primary\" onClick={closeFeeds}>\n        <MinimizeIcon />\n      </IconButton>\n    </div>\n  );\n\n  const widgetBody = (\n    <div>\n      {url && feed && (\n        <div>\n          <div className=\"font-bold\">{description}</div>\n          <div className=\"feed\">{getFeedFromRSS(feed)}</div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <div>\n      <Widget\n        id={props.id}\n        tabId={props.tabId}\n        config={new Map<string, unknown>([['url', url]])}\n        header={widgetHeader}\n        additionalActionButtons={additionalActionButtons}\n        body={widgetBody}\n        editModeComponent={<EmptyRSSWidget url={url} onUrlSubmitted={onUrlSubmitted} />}\n        refreshFunction={fetchDataFromRssFeed}\n        onDeleteButtonClicked={props.onDeleteButtonClicked}\n      />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport logger from '../utils/LogUtils';\n\nexport function useLocalStorage(key: string, initialValue: unknown): [unknown, (value: unknown) => void] {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      logger.error(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: unknown) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      logger.error(error);\n    }\n  };\n  return [storedValue, setValue];\n}\n","import { format } from 'date-fns';\nimport { ReactElement } from 'react';\nimport { IActivity } from '../IStrava';\n\nfunction convertDecimalTimeToTime(decimalTime: number): number {\n  const decimalPart = decimalTime % 1;\n  const convertedDecimalPart = (decimalPart / 10) * 6;\n  return decimalTime - decimalPart + convertedDecimalPart;\n}\n\nexport default function StravaActivity(props: IActivity): ReactElement {\n  return (\n    <div>\n      <div>\n        <a href={`https://www.strava.com/activities/${props.id}`}>\n          {format(new Date(props.start_date_local), 'dd MMM')} {props.name}\n        </a>\n      </div>\n      <div>Distance : {Math.round(props.distance) / 1000} kms</div>\n      <div>Durée : {convertDecimalTimeToTime(props.moving_time / 60)} mins</div>\n      <div>Denivelé : {props.total_elevation_gain} mètres</div>\n      <div>Trophées : {props.achievement_count}</div>\n      <div>Vitesse moyenne : {props.average_speed}</div>\n      <div>Vitesse max : {props.max_speed}</div>\n      <div>Kudos : {props.kudos_count}</div>\n      <div>Commentaires : {props.comment_count}</div>\n    </div>\n  );\n}\n","import axios, { AxiosError } from 'axios';\nimport * as queryString from 'query-string';\nimport { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport ComponentWithDetail from '../../components/detailComponent/ComponentWithDetail';\nimport { useLocalStorage } from '../../hooks/localStorageHook';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport StravaActivity from './activity/StravaActivity';\nimport { IActivity, IAthlete } from './IStrava';\nimport { format, isAfter, isBefore } from 'date-fns';\nimport { Chart } from 'react-chartjs-2';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport { Button } from '@mui/material';\n\ninterface ITokenData {\n  access_token: string;\n  refresh_token: string;\n  expires_at: string;\n  athlete: IAthlete;\n}\n\nexport default function StravaWidget(props: IBaseWidgetConfig): React.ReactElement {\n  const [activities, setActivities] = useState<IActivity[]>([]);\n  const [athlete, setAthlete] = useState<IAthlete>();\n  const [token, setToken] = useLocalStorage('strava_token', null);\n  const [refreshToken, setRefreshToken] = useLocalStorage('strava_refresh_token', null);\n  const [tokenExpirationDate, setTokenExpirationDate] = useLocalStorage('strava_token_expires_at', null);\n  const { search } = useLocation();\n\n  const paginationActivities = 20;\n\n  useEffect(() => {\n    const values = queryString.parse(search);\n    if (values && values.code) {\n      const apiCode = values.code.toString();\n      getToken(apiCode);\n    }\n    if (!token || !refreshToken || isBefore(new Date((tokenExpirationDate as number) * 1000), new Date())) {\n      refreshTokenFromApi();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (token) {\n      refreshWidget();\n    }\n  }, [token]);\n\n  function refreshWidget() {\n    setActivities([]);\n    getAthleteData();\n    getActivities();\n  }\n\n  function getToken(apiCode: string) {\n    axios\n      .post<ITokenData>('https://www.strava.com/oauth/token', {\n        client_id: process.env.REACT_APP_STRAVA_CLIENT_ID,\n        client_secret: process.env.REACT_APP_STRAVA_CLIENT_SECRET,\n        code: apiCode,\n        grant_type: 'authorization_code'\n      })\n      .then((response) => {\n        setToken(response.data.access_token as string);\n        setRefreshToken(response.data.refresh_token);\n        setTokenExpirationDate(response.data.expires_at);\n        setAthlete(response.data.athlete);\n      })\n      .catch((error: Error) => logger.error(error.message));\n  }\n\n  function refreshTokenFromApi() {\n    if (refreshToken) {\n      axios\n        .post<ITokenData>('https://www.strava.com/oauth/token', {\n          client_id: process.env.REACT_APP_STRAVA_CLIENT_ID,\n          client_secret: process.env.REACT_APP_STRAVA_CLIENT_SECRET,\n          refresh_token: refreshToken,\n          grant_type: 'refresh_token'\n        })\n        .then((response) => {\n          setToken(response.data.access_token);\n          setRefreshToken(response.data.refresh_token);\n          setTokenExpirationDate(response.data.expires_at);\n          setAthlete(response.data.athlete);\n        })\n        .catch((error: Error) => logger.error(error.message));\n    } else {\n      logger.error('No refresh token');\n    }\n  }\n\n  function getAthleteData() {\n    if (token) {\n      axios\n        .get<IAthlete>('https://www.strava.com/api/v3/athlete', {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n        .then((response) => setAthlete(response.data))\n        .catch((error: Error) => logger.error(error.message));\n    }\n  }\n\n  function getActivities() {\n    if (token && tokenExpirationDate && isAfter(new Date((tokenExpirationDate as number) * 1000), new Date())) {\n      axios\n        .get<IActivity[]>(`https://www.strava.com/api/v3/athlete/activities?page=1&per_page=${paginationActivities}`, {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n        .then((response) => setActivities(response.data.reverse()))\n        .catch((error: AxiosError) => logger.error(error.message));\n    } else {\n      refreshTokenFromApi();\n    }\n  }\n\n  function getActivitiesByMonth() {\n    return activities.reduce((activitiesByMonth: IActivity[], activity: IActivity) => {\n      const month = format(new Date(activity.start_date_local), 'yyyy-MM');\n      if (!activitiesByMonth[month]) {\n        activitiesByMonth[month] = [];\n      }\n      activitiesByMonth[month].push(Math.round(activity.distance * 1000) / 1000000);\n      return activitiesByMonth;\n    }, []);\n  }\n\n  function getStatsFromActivities() {\n    const activitiesByMonthList = getActivitiesByMonth();\n    return Object.keys(activitiesByMonthList).map((month) => {\n      return {\n        x: new Date(month),\n        y: Math.round(activitiesByMonthList[month].reduce((total: number, distance: number) => total + distance))\n      };\n    });\n  }\n\n  const widgetHeader = (\n    <div>\n      <a href={`https://www.strava.com/athletes/${athlete?.id}`} className=\"flex flex-row\">\n        <img className=\"h-9 w-9\" src={athlete?.profile_medium} />\n        <p>\n          {athlete?.firstname} {athlete?.lastname}\n        </p>\n      </a>\n    </div>\n  );\n\n  function getTitleToDisplay(activity: IActivity): string {\n    return `${format(new Date(activity.start_date_local), 'dd MMM')}  ${activity.name}  ${\n      Math.round(activity.distance * 1000) / 1000000\n    } kms`;\n  }\n\n  const widgetBody = (\n    <div className=\"flex flex-col\">\n      {token &&\n        refreshToken &&\n        tokenExpirationDate &&\n        isAfter(new Date((tokenExpirationDate as number) * 1000), new Date()) && (\n          <div>\n            <div className=\"max-h-48 overflow-y-scroll\">\n              {activities\n                .slice()\n                .reverse()\n                .map((activity: IActivity, index: number) => {\n                  return (\n                    <ComponentWithDetail\n                      key={activity.id}\n                      componentRoot={\n                        <div className={`${index % 2 ? 'bg-gray-200' : ''}`}>{getTitleToDisplay(activity)}</div>\n                      }\n                      componentDetail={<StravaActivity {...activity} />}\n                      link={`https://www.strava.com/activities/${activity.id}`}\n                    />\n                  );\n                })}\n            </div>\n\n            <div className=\"min-h-24 max-h-96\">\n              <Chart\n                type=\"bar\"\n                data={{\n                  labels: getStatsFromActivities().map((data) => format(data.x, 'MMM yyyy')),\n                  datasets: [\n                    {\n                      label: 'Distance (kms)',\n                      backgroundColor: 'orange',\n                      data: getStatsFromActivities().map((act) => act.y),\n                      yAxisID: 'kms',\n                      order: 2\n                    },\n                    {\n                      label: 'Activités',\n                      type: 'line',\n                      backgroundColor: 'darkgreen',\n                      data: Object.keys(getActivitiesByMonth()).map((month) => getActivitiesByMonth()[month].length),\n                      yAxisID: 'activities',\n                      order: 1\n                    }\n                  ]\n                }}\n              />\n            </div>\n          </div>\n        )}\n      {(!token ||\n        !refreshToken ||\n        (tokenExpirationDate && isBefore(new Date((tokenExpirationDate as number) * 1000), new Date()))) && (\n        <a\n          href={`https://www.strava.com/oauth/authorize?client_id=${process.env.REACT_APP_STRAVA_CLIENT_ID}&redirect_uri=${process.env.REACT_APP_FRONTEND_URL}&response_type=code&scope=read,activity:read`}\n        >\n          <Button variant=\"contained\">Se connecter</Button>\n        </a>\n      )}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={new Map()}\n      header={widgetHeader}\n      body={widgetBody}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { Button, Input } from '@mui/material';\nimport { useState } from 'react';\n\ninterface IProps {\n  city?: string;\n  onConfigSubmitted: (city: string) => void;\n}\n\nexport default function EmptyWeatherWidget(props: IProps): React.ReactElement {\n  const [city, setCity] = useState(props.city || '');\n  const onCityChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => setCity(event.target.value);\n  const onValidation = () => {\n    props.onConfigSubmitted(city);\n  };\n\n  return (\n    <div className=\"flex flex-col mx-auto max-w-xs mt-10 space-y-8\">\n      <Input\n        id=\"cityNameInput\"\n        name=\"city\"\n        onChange={onCityChangeHandler}\n        value={city}\n        placeholder=\"Saisissez de nom de la ville\"\n      />\n      <Button\n        variant=\"contained\"\n        id=\"validateButton\"\n        color=\"success\"\n        onClick={onValidation}\n        disabled={!city || city?.length < 1}\n      >\n        Valider\n      </Button>\n    </div>\n  );\n}\n","import { adjustTimeWithOffset, formatDateFromTimestamp } from '../../../utils/DateUtils';\nimport { IForecast } from '../IWeather';\nimport DeviceThermostatIcon from '@mui/icons-material/DeviceThermostat';\nimport OpacityIcon from '@mui/icons-material/Opacity';\nexport default function Forecast(props: IForecast): React.ReactElement {\n  return (\n    <div className=\" forecast border-2 border-solid border-black\">\n      <div>\n        {formatDateFromTimestamp(props.dt, adjustTimeWithOffset(props.city.timezone)).toLocaleString('fr', {\n          weekday: 'short',\n          day: 'numeric',\n          hour: '2-digit'\n        })}\n      </div>\n      <div className=\"flex flex-row\">\n        <div>\n          <img\n            src={`https://openweathermap.org/img/wn/${props.weather[0]?.icon}@2x.png`}\n            className=\"max-h-14 max-w-14\"\n            title={props.weather[0]?.description}\n            alt={props.weather[0]?.description}\n          />\n        </div>\n        <div>\n          <div>\n            <DeviceThermostatIcon style={{ color: 'crimson' }} className=\"m-r-1\" />\n            {props.main.temp_max}°\n          </div>\n          <div>\n            <DeviceThermostatIcon style={{ color: 'blue' }} className=\"m-r-1\" />\n            {props.main.temp_min}°\n          </div>\n          <div>\n            <OpacityIcon style={{ color: 'lightblue' }} className=\"m-r-1\" />\n            {props.main.humidity}%\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Button } from '@mui/material';\nimport axios, { AxiosResponse } from 'axios';\nimport { format } from 'date-fns';\nimport { useEffect, useState } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport { updateWidgetData } from '../../services/widget.service';\nimport { adjustTimeWithOffset, formatDateFromTimestamp } from '../../utils/DateUtils';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport EmptyWeatherWidget from './emptyWidget/EmptyWeatherWidget';\nimport Forecast from './forecast/Forecast';\nimport { ICity, IForecast, IWeather, IWeatherAPIResponse } from './IWeather';\nimport './WeatherWidget.scss';\nimport WbSunnyIcon from '@mui/icons-material/WbSunny';\nimport Brightness3Icon from '@mui/icons-material/Brightness3';\nimport ScheduleIcon from '@mui/icons-material/Schedule';\nimport DeviceThermostatIcon from '@mui/icons-material/DeviceThermostat';\nimport { CategoryScale, LinearScale, LineElement, PointElement } from 'chart.js';\nimport { Chart as ChartJS } from 'chart.js';\ninterface IProps extends IBaseWidgetConfig {\n  city?: string;\n}\n\nenum ForecastMode {\n  TODAY,\n  TOMORROW,\n  WEEK\n}\n\nexport default function WeatherWidget(props: IProps): React.ReactElement {\n  const WEATHER_API = 'https://api.openweathermap.org/data/2.5/';\n  const WEATHER_ENDPOINT = 'weather';\n  const FORECAST_ENDPOINT = 'forecast';\n  const API_OPTIONS = '?units=metric&lang=fr&appid=';\n\n  const [cityToQuery, setCityToQuery] = useState(props.city);\n  const [weather, setWeather] = useState<IWeather>();\n  const [forecast, setForecast] = useState<IForecast[]>();\n  const [city, setCity] = useState<ICity>();\n  const [forecastMode, setForecastMode] = useState<ForecastMode>(ForecastMode.TODAY);\n\n  ChartJS.register(CategoryScale, LinearScale, LineElement, PointElement);\n\n  function fetchDataFromWeatherApi() {\n    if (cityToQuery) {\n      axios\n        .get<IWeather>(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          },\n          params: {\n            url: `${WEATHER_API}${WEATHER_ENDPOINT}${API_OPTIONS}${process.env.REACT_APP_OPENWEATHERMAP_KEY}&q=${cityToQuery}`\n          }\n        })\n        .then((result) => setWeather(result.data))\n        .catch((error: Error) => logger.error(error.message));\n      axios\n        .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          },\n          params: {\n            url: `${WEATHER_API}${FORECAST_ENDPOINT}${API_OPTIONS}${process.env.REACT_APP_OPENWEATHERMAP_KEY}&q=${cityToQuery}`\n          }\n        })\n        .then((result: AxiosResponse) => {\n          setForecast((result.data as IWeatherAPIResponse).list);\n          setCity((result.data as IWeatherAPIResponse).city);\n        })\n        .catch((error: Error) => logger.error(error.message));\n    }\n  }\n\n  useEffect(() => {\n    fetchDataFromWeatherApi();\n  }, [cityToQuery]);\n\n  function refreshWidget() {\n    setWeather(undefined);\n    setForecast(undefined);\n    setCity(undefined);\n    fetchDataFromWeatherApi();\n  }\n\n  function onConfigSubmitted(updatedCity: string) {\n    updateWidgetData(props.id, {\n      city: updatedCity\n    })\n      .then(() => {\n        setCityToQuery(updatedCity);\n        refreshWidget();\n      })\n      .catch((error) => logger.error(error.message));\n  }\n\n  function filterForecastByMode(): IForecast[] {\n    if (city && forecast) {\n      switch (forecastMode) {\n        case ForecastMode.WEEK: {\n          return forecast.filter((forecastDay) => {\n            const forecastElement = formatDateFromTimestamp(forecastDay.dt, adjustTimeWithOffset(city.timezone));\n            return forecastElement.getHours() >= 15 && forecastElement.getHours() <= 18;\n          });\n        }\n        case ForecastMode.TOMORROW: {\n          return forecast.filter(\n            (forecastDay) =>\n              new Date(forecastDay.dt * 1000).getDay() === new Date(+new Date() + 86400000).getDay() &&\n              new Date(forecastDay.dt * 1000).getHours() >= 7\n          );\n        }\n        case ForecastMode.TODAY:\n        default: {\n          return forecast.filter(\n            (forecastDay) =>\n              new Date(forecastDay.dt * 1000).getDay() === new Date().getDay() &&\n              new Date(forecastDay.dt * 1000).getHours() >= 7\n          );\n        }\n      }\n    } else {\n      return [];\n    }\n  }\n\n  function selectTodayForecast(): void {\n    setForecastMode(ForecastMode.TODAY);\n  }\n\n  function selectTomorrowForecast(): void {\n    setForecastMode(ForecastMode.TOMORROW);\n  }\n\n  function selectWeekForecast(): void {\n    setForecastMode(ForecastMode.WEEK);\n  }\n\n  const widgetHeader = <div>La météo aujourd'hui à {cityToQuery}</div>;\n\n  const widgetBody = (\n    <div>\n      {city && weather && weather.weather && (\n        <div className=\"flex flex-row\">\n          <div>\n            <img\n              className=\"w-16\"\n              src={`https://openweathermap.org/img/wn/${weather.weather[0].icon}@2x.png`}\n              title={weather.weather[0].description}\n              alt={weather.weather[0].description}\n            />\n          </div>\n          <div className=\"flex flex-row place-items-center\">\n            <div className=\"flex flex-col mr-5\">\n              <div>{weather.weather[0].description}</div>\n              <div>\n                <DeviceThermostatIcon />\n                {weather.main.temp}°\n              </div>\n            </div>\n            <div className=\"flex flex-col\">\n              <div className=\"flex justify-between\">\n                <div>\n                  <WbSunnyIcon />\n                  {formatDateFromTimestamp(\n                    weather.sys.sunrise,\n                    adjustTimeWithOffset(weather.timezone)\n                  ).toLocaleTimeString('fr')}\n                </div>\n                <div>\n                  <Brightness3Icon />\n                  {formatDateFromTimestamp(\n                    weather.sys.sunset,\n                    adjustTimeWithOffset(weather.timezone)\n                  ).toLocaleTimeString('fr')}\n                </div>\n              </div>\n              <div>\n                <ScheduleIcon />\n                {formatDateFromTimestamp(weather.dt, adjustTimeWithOffset(weather.timezone)).toLocaleString('fr')}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {city && forecast && (\n        <div>\n          <div className=\"flex flex-row flex-wrap space-x-10\">\n            <span className=\"font-bold\">Prévisions</span>\n            <span className=\"flex flex-row space-x-1\">\n              <Button\n                id=\"toggleTodayForecast\"\n                onClick={selectTodayForecast}\n                variant=\"contained\"\n                color={forecastMode === ForecastMode.TODAY ? 'success' : 'primary'}\n              >\n                Aujourd'hui\n              </Button>\n              <Button\n                id=\"toggleTomorrowForecast\"\n                variant=\"contained\"\n                color={forecastMode === ForecastMode.TOMORROW ? 'success' : 'primary'}\n                onClick={selectTomorrowForecast}\n              >\n                Demain\n              </Button>\n              <Button\n                id=\"toggleWeekForecast\"\n                onClick={selectWeekForecast}\n                variant=\"contained\"\n                color={forecastMode === ForecastMode.WEEK ? 'success' : 'primary'}\n              >\n                Semaine\n              </Button>\n            </span>\n          </div>\n          <br />\n          <div className=\"min-h-24 max-x-full\">\n            <Line\n              data={{\n                labels: filterForecastByMode().map((forecastDay) => {\n                  if (forecastMode === ForecastMode.TODAY || forecastMode === ForecastMode.TOMORROW) {\n                    return format(new Date(forecastDay.dt * 1000), 'HH');\n                  } else {\n                    return format(new Date(forecastDay.dt * 1000), 'EEE dd MMM');\n                  }\n                }),\n                datasets: [\n                  {\n                    label: 'Température',\n                    borderColor: 'orange',\n                    data: filterForecastByMode().map((forecastDay) => forecastDay.main.temp_max)\n                  },\n                  {\n                    label: 'Ressenti',\n                    borderColor: 'red',\n                    data: filterForecastByMode().map((forecastDay) => forecastDay.main.feels_like)\n                  }\n                ]\n              }}\n              options={{ maintainAspectRatio: false }}\n            />\n          </div>\n          <div className=\"flex flex-row forecastRow\">\n            {city &&\n              forecast &&\n              filterForecastByMode().map((forecastDay) => {\n                return (\n                  <div className=\"forecastContainer\" key={forecastDay.dt}>\n                    <Forecast {...forecastDay} city={city} />\n                  </div>\n                );\n              })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={new Map<string, unknown>([['city', cityToQuery]])}\n      header={widgetHeader}\n      body={widgetBody}\n      editModeComponent={<EmptyWeatherWidget city={cityToQuery} onConfigSubmitted={onConfigSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport SteamWidget from 'src/widgets/steam/SteamWidget';\nimport TwitterTimelineWidget from 'src/widgets/twitter/TwitterTimelineWidget';\nimport { WidgetTypes } from '../enums/WidgetsEnum';\nimport { IReducerState } from '../reducers/rootReducer';\nimport { deleteWidget, getWidgets } from '../services/widget.service';\nimport CalendarWidget from '../widgets/calendar/CalendarWidget';\nimport { IWidgetConfig } from '../widgets/IWidgetConfig';\nimport RSSWidget from '../widgets/rss/RSSWidget';\nimport StravaWidget from '../widgets/strava/StravaWidget';\nimport WeatherWidget from '../widgets/weather/WeatherWidget';\nimport TabPanel from '@mui/lab/TabPanel';\nimport { handleError } from 'src/reducers/actions';\n\ninterface IProps {\n  tabId: number;\n  newWidget?: IWidgetConfig;\n}\n\nexport default function TabDash(props: IProps): React.ReactElement {\n  const [widgets, setWidgets] = useState<IWidgetConfig[]>([]);\n  const activeTab = useSelector((state: IReducerState) => state.activeTab);\n  const dispatch = useDispatch();\n  const ERROR_MESSAGE_GET_WIDGETS = 'Erreur lors de la récupération des widgets.';\n  const ERROR_MESSAGE_DELETE_WIDGET = \"Erreur lors de la suppression d'un widget.\";\n\n  useEffect(() => {\n    if (activeTab === props.tabId) {\n      getWidgets(props.tabId)\n        .then((response) => setWidgets(response.data))\n        .catch((error: Error) => dispatch(handleError(error, ERROR_MESSAGE_GET_WIDGETS)));\n    }\n  }, [activeTab]);\n\n  useEffect(() => {\n    if (props.newWidget) {\n      setWidgets(widgets.concat([props.newWidget]) as []);\n    }\n  }, [props.newWidget != null && props.newWidget.id]);\n\n  function createWidget(widgetConfig: IWidgetConfig) {\n    const widgetProps = {\n      id: widgetConfig.id,\n      tabId: widgetConfig.tab.id,\n      ...widgetConfig.data,\n      onDeleteButtonClicked: deleteWidgetFromDashboard\n    };\n    switch (widgetConfig.type) {\n      case WidgetTypes.WEATHER:\n        return <WeatherWidget {...widgetProps} />;\n      case WidgetTypes.RSS:\n        return <RSSWidget {...widgetProps} />;\n      case WidgetTypes.CALENDAR:\n        return <CalendarWidget {...widgetProps} />;\n      case WidgetTypes.STRAVA:\n        return <StravaWidget {...widgetProps} />;\n      case WidgetTypes.STEAM:\n        return <SteamWidget {...widgetProps} />;\n      case WidgetTypes.TWITTER_TIMELINE:\n        return <TwitterTimelineWidget {...widgetProps} />;\n    }\n  }\n\n  function deleteWidgetFromDashboard(id: number) {\n    deleteWidget(id)\n      .then((response) => {\n        if (response) {\n          setWidgets(\n            widgets.filter((widget: IWidgetConfig) => {\n              return widget.id !== id;\n            })\n          );\n        }\n      })\n      .catch((error: Error) => dispatch(handleError(error, ERROR_MESSAGE_DELETE_WIDGET)));\n  }\n\n  return (\n    <div>\n      {props.tabId === activeTab && (\n        <TabPanel value={props.tabId.toString()} className=\"widgetList grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3\">\n          {widgets &&\n            widgets.length > 0 &&\n            widgets.map((widgetConfig: IWidgetConfig) => {\n              return <div key={widgetConfig.id}>{createWidget(widgetConfig)}</div>;\n            })}\n        </TabPanel>\n      )}\n    </div>\n  );\n}\n","import { Alert, Snackbar } from '@mui/material';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { IReducerState } from 'src/reducers/rootReducer';\nimport logger from './LogUtils';\n\nexport default function ErrorSnackbar(): React.ReactElement {\n  const [isOpen, setOpen] = useState(true);\n  const [customMessage, setCustomMessage] = useState('');\n  const errorToHandle = useSelector((state: IReducerState) => state.errorToHandle);\n\n  const verticalPosition = 'bottom';\n  const horizontalPosition = 'center';\n\n  useEffect(() => {\n    if (errorToHandle) {\n      handleError(errorToHandle?.error, errorToHandle?.customErrorMessage);\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  }, [errorToHandle]);\n\n  function handleError(error: Error, message: string) {\n    logger.error(error.message);\n    setCustomMessage(message);\n  }\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  return (\n    <Snackbar\n      id=\"errorSnackbar\"\n      anchorOrigin={{ vertical: verticalPosition, horizontal: horizontalPosition }}\n      open={isOpen}\n      autoHideDuration={4000}\n      onClose={handleClose}\n      key={verticalPosition + horizontalPosition}\n    >\n      <Alert severity=\"error\">{customMessage}</Alert>\n    </Snackbar>\n  );\n}\n","import AddCircleOutlineIcon from '@mui/icons-material/AddCircleOutline';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport TabContext from '@mui/lab/TabContext';\nimport TabList from '@mui/lab/TabList';\nimport { Button, IconButton } from '@mui/material';\nimport jwt_decode from 'jwt-decode';\nimport { useEffect, useRef, useState } from 'react';\nimport { DragDropContext, Draggable, Droppable, DroppableProvided, DropResult } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport CreateWidgetModal from './modals/CreateWidgetModal';\nimport ImportConfigModal from './modals/ImportConfigModal';\nimport { ITab } from './model/Tab';\nimport NavDash from './navigation/navDash/NavDash';\nimport Login from './pages/login/Login';\nimport { handleError, toggleRefreshWidgets, toggleSelectedTab } from './reducers/actions';\nimport { IReducerState } from './reducers/rootReducer';\nimport authService from './services/auth.service';\nimport { exportConfig } from './services/config.service';\nimport { addTab, getTabs, updateTabs } from './services/tab.service';\nimport { addWidget } from './services/widget.service';\nimport TabDash from './tab/TabDash';\nimport logger from './utils/LogUtils';\nimport { IWidgetConfig } from './widgets/IWidgetConfig';\nimport './Dash.scss';\nimport { AxiosError } from 'axios';\nimport ErrorSnackbar from './utils/ErrorSnackbar';\nexport interface IMenu {\n  link: string;\n  icon: string;\n}\n\ninterface IJwt {\n  sub: string;\n  iat: number;\n  exp: number;\n}\n\nexport default function Dash(): React.ReactElement {\n  const [tabs, setTabs] = useState<ITab[]>([]);\n  const [newWidget, setNewWidget] = useState<IWidgetConfig>();\n\n  const activeTab = useSelector((state: IReducerState) => state.activeTab);\n  const dispatch = useDispatch();\n  const isMounted = useRef(false);\n\n  const ERROR_MESSAGE_INIT_DASHBOARD = \"Erreur lors de l'initialisation du dashboard.\";\n  const ERROR_MESSAGE_ADD_TAB = \"Erreur lors de l'ajout d'un onglet.\";\n  const ERROR_MESSAGE_ADD_WIDGET = \"Erreur lors de l'ajout d'un widget.\";\n  const ERROR_EXPORT_CONFIGURATION = \"Erreur lors de l'export de la configuration.\";\n\n  const refreshTimeout = 900000; // 15 minutes\n\n  useEffect(() => {\n    if (isUserAuthenticated()) {\n      initDashboard();\n      const interval = setInterval(refreshAllWidgets, refreshTimeout);\n      return () => clearInterval(interval); // Clear interval on unmount\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isMounted.current && tabs && tabs.length === 0) {\n      addNewTab();\n    }\n  }, [tabs]);\n\n  function initDashboard() {\n    getTabs()\n      .then((result) => {\n        setTabs(result.data);\n        if (result.data && result.data.length > 0) {\n          dispatch(toggleSelectedTab(result.data[0].id));\n        }\n        isMounted.current = true;\n      })\n      .catch((error: AxiosError) => dispatch(handleError(error, ERROR_MESSAGE_INIT_DASHBOARD)));\n  }\n\n  function toggleTab(tab: number) {\n    if (activeTab !== tab) {\n      dispatch(toggleSelectedTab(tab));\n    }\n  }\n\n  function refreshAllWidgets() {\n    dispatch(toggleRefreshWidgets());\n  }\n\n  function addNewTab() {\n    const newTabLabel = 'Nouvel onglet';\n    addTab(newTabLabel)\n      .then((response) => {\n        const insertedTab = response.data;\n        setTabs(tabs.concat(insertedTab));\n        dispatch(toggleSelectedTab(insertedTab.id));\n      })\n      .catch((error: AxiosError) => dispatch(handleError(error, ERROR_MESSAGE_ADD_TAB)));\n  }\n\n  function getNewWidget(tabId: number) {\n    if (newWidget && tabId === newWidget.tab.id) {\n      return newWidget;\n    } else {\n      return undefined;\n    }\n  }\n\n  function onWidgetAdded(type: React.MouseEvent<HTMLButtonElement>) {\n    if (activeTab) {\n      addWidget(type.currentTarget.value, activeTab)\n        .then((response) => {\n          if (response) {\n            const widgetData = response.data as IWidgetConfig;\n            setNewWidget(widgetData);\n          }\n        })\n        .catch((error: AxiosError) => dispatch(handleError(error, ERROR_MESSAGE_ADD_WIDGET)));\n    }\n  }\n\n  function onTabDeleted(id: number) {\n    if (tabs.length > 1) {\n      if (tabs[0].id === id) {\n        dispatch(toggleSelectedTab(tabs[1].id));\n      } else if (activeTab === id) {\n        dispatch(toggleSelectedTab(tabs[0].id));\n      } else {\n        dispatch(toggleSelectedTab(activeTab));\n      }\n    }\n    setTabs(tabs.filter((tab) => tab.id !== id));\n  }\n\n  function reorder(list: unknown[], startIndex: number, endIndex: number): unknown[] {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n  }\n\n  function onDragEnd(result: DropResult) {\n    if (!result.destination) {\n      return;\n    }\n\n    const items = reorder(tabs, result.source.index, result.destination.index).map((tab, index) => {\n      (tab as ITab).tabOrder = index;\n      return tab;\n    });\n    updateTabs(items as ITab[])\n      .then((response) => setTabs(response.data as ITab[]))\n      .catch((error) => logger.error(error.message));\n  }\n\n  function downloadConfig(): void {\n    exportConfig()\n      .then((response) => {\n        logger.info('Configuration exportée');\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', 'dashboardConfig.json');\n        document.body.appendChild(link);\n        link.click();\n      })\n      .catch((error: AxiosError) => dispatch(handleError(error, ERROR_EXPORT_CONFIGURATION)));\n  }\n\n  function isTokenExpired(): boolean {\n    const authenticatedUser = authService.getCurrentUser();\n    if (!authenticatedUser || !authenticatedUser.accessToken) {\n      return false;\n    } else {\n      return Date.now() >= jwt_decode<IJwt>(authenticatedUser.accessToken).exp * 1000;\n    }\n  }\n\n  function isUserAuthenticated(): boolean {\n    return authService.getCurrentUser() !== null && !isTokenExpired();\n  }\n\n  return (\n    <div>\n      {!isUserAuthenticated() && <Login />}\n      {isUserAuthenticated() && (\n        <div>\n          <TabContext value={activeTab.toString()}>\n            <div className=\"flex flex-col\">\n              <div className=\"flex flex-row m-1\">\n                <div className=\"flex flex-row overflow-x-auto w-9/12 md:w-10/12\">\n                  <DragDropContext onDragEnd={onDragEnd}>\n                    <Droppable droppableId=\"droppable\" direction=\"horizontal\">\n                      {(providedDroppable: DroppableProvided) => (\n                        <div {...providedDroppable.droppableProps} ref={providedDroppable.innerRef}>\n                          <TabList className=\"flex flex-row flex-wrap\">\n                            {tabs.length > 0 &&\n                              tabs.map((tab: ITab, index: number) => {\n                                return (\n                                  <Draggable key={tab.id} draggableId={tab.id.toString()} index={index}>\n                                    {(providedDraggable) => (\n                                      <div\n                                        key={tab.id}\n                                        ref={providedDraggable.innerRef}\n                                        {...providedDraggable.draggableProps}\n                                        {...providedDraggable.dragHandleProps}\n                                      >\n                                        <NavDash\n                                          tab={tab}\n                                          onTabClicked={() => toggleTab(tab.id)}\n                                          onTabDeleted={onTabDeleted}\n                                        />\n                                      </div>\n                                    )}\n                                  </Draggable>\n                                );\n                              })}\n                          </TabList>\n                          {providedDroppable.placeholder}\n                        </div>\n                      )}\n                    </Droppable>\n                  </DragDropContext>\n\n                  <IconButton id=\"addNewTabButton\" color=\"primary\" onClick={addNewTab}>\n                    <AddCircleOutlineIcon />\n                  </IconButton>\n                </div>\n                <div className=\"flex flex-row w-1/3 md:w-3/12\">\n                  <div className=\"flex flex-row m-auto\">\n                    <CreateWidgetModal onWidgetAdded={onWidgetAdded} />\n\n                    <div>\n                      <IconButton id=\"reloadAllWidgetsButton\" color=\"primary\" onClick={refreshAllWidgets}>\n                        <RefreshIcon />\n                      </IconButton>\n                    </div>\n\n                    <div>\n                      <IconButton id=\"downloadConfigButton\" color=\"primary\" onClick={downloadConfig}>\n                        <DownloadIcon />\n                      </IconButton>\n                    </div>\n\n                    <ImportConfigModal />\n                  </div>\n                  <Button onClick={authService.logout} variant=\"contained\">\n                    Déconnexion\n                  </Button>\n                </div>\n              </div>\n              {tabs.length > 0 &&\n                tabs.map((tab: ITab) => {\n                  return <TabDash key={tab.id} newWidget={getNewWidget(tab.id)} tabId={tab.id} />;\n                })}\n            </div>\n          </TabContext>\n        </div>\n      )}\n      <ErrorSnackbar />\n    </div>\n  );\n}\n","import { IErrorToHandle } from './actions';\nimport { TOGGLE_TAB, TOGGLE_REFRESH_WIDGETS, HANDLE_ERROR } from './actionTypes';\n\nexport interface IReducerState {\n  activeTab: number;\n  toggleRefreshWidgets: boolean;\n  errorToHandle?: IErrorToHandle;\n}\n\nconst initialState: IReducerState = {\n  activeTab: -1,\n  toggleRefreshWidgets: false,\n  errorToHandle: undefined\n};\n\nexport default function (state = initialState, action: { type: string; payload: unknown }): IReducerState {\n  switch (action.type) {\n    case TOGGLE_TAB: {\n      const { id } = action.payload as { id: number };\n      return {\n        ...state,\n        activeTab: id\n      };\n    }\n    case TOGGLE_REFRESH_WIDGETS: {\n      return {\n        ...state,\n        toggleRefreshWidgets: !state.toggleRefreshWidgets\n      };\n    }\n    case HANDLE_ERROR: {\n      return {\n        ...state,\n        errorToHandle: {\n          ...(action.payload as IErrorToHandle)\n        }\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import { createStore } from 'redux';\nimport rootReducer from './rootReducer';\nexport default createStore(rootReducer);\n","// tslint:disable:no-console\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the 'N+1' visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL!, window.location.toString());\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker) {\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the old content will have been purged and\n                // the fresh content will have been added to the cache.\n                // It's the perfect time to display a 'New content is\n                // available; please refresh.' message in your web app.\n                console.log('New content is available; please refresh.');\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // 'Content is cached for offline use.' message.\n                console.log('Content is cached for offline use.');\n              }\n            }\n          };\n        }\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (response.status === 404 || response.headers.get('content-type')!.indexOf('javascript') === -1) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import * as ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport Dash from './Dash';\nimport './index.scss';\nimport store from './reducers/store';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <Dash />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nregisterServiceWorker();\n"],"sourceRoot":""}