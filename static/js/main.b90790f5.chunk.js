(this["webpackJsonpdash-web"]=this["webpackJsonpdash-web"]||[]).push([[0],{316:function(e,t,n){},357:function(e,t){},359:function(e,t){},381:function(e,t){},383:function(e,t){},398:function(e,t){},400:function(e,t){},436:function(e,t,n){},441:function(e,t,n){},461:function(e,t,n){},471:function(e,t,n){},472:function(e,t,n){},473:function(e,t,n){},474:function(e,t,n){"use strict";n.r(t);var c,a=n(26),r=n(29),i=n(174),o=n(17),s=n(5),d=n(117),l=n.n(d),u=n(276),j=n.n(u),b=n(121),h=n.n(b),f=n(521),O=n(523),p=n(536),x=n(531),m=n(255),v=n(0),g=n(135),w=n(522),C=n(516),E=n(537),y=n(538),A=n(532),k=n(534),D=n(535);!function(e){e[e.WEATHER=1]="WEATHER",e[e.RSS=2]="RSS",e[e.CALENDAR=3]="CALENDAR",e[e.STRAVA=4]="STRAVA",e[e.STEAM=5]="STEAM",e[e.TWITTER=6]="TWITTER",e[e.TWITTER_TIMELINE=7]="TWITTER_TIMELINE"}(c||(c={}));var S=n(1);function N(e){return Object(S.jsx)("div",{className:"grid grid-cols-4 gap-3",children:Object.keys(c).map((function(t){return isNaN(parseInt(t,0))&&Object(S.jsxs)(A.a,{children:[Object(S.jsx)(k.a,{children:Object(S.jsxs)("div",{className:"flex flex-col space-y-5",children:[Object(S.jsx)("span",{children:t}),Object(S.jsxs)("span",{children:["Widget ",t]}),Object(S.jsxs)("span",{children:["Cliquez ci-dessous pour ajouter un widget ",t," au dashboard."]})]})}),Object(S.jsx)(D.a,{children:Object(S.jsx)(x.a,{id:t,onClick:e.onWidgetAdded,variant:"contained",color:"success",value:c[t],children:"Ajouter"})})]},t)}))})}function T(e){var t=Object(v.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1];function r(){a(!c)}return Object(S.jsxs)("div",{children:[Object(S.jsx)(p.a,{id:"openAddWidgetModal",color:"primary",onClick:r,children:Object(S.jsx)(l.a,{})}),Object(S.jsxs)(w.a,{onClose:function(){return a(!1)},open:c,children:[Object(S.jsx)(C.a,{children:"Ajouter un widget"}),Object(S.jsx)(E.a,{children:Object(S.jsx)(N,{onWidgetAdded:e.onWidgetAdded})}),Object(S.jsx)(y.a,{children:Object(S.jsx)(x.a,{id:"closeAddWidgetModal",onClick:r,variant:"contained",children:"Fermer"})})]})]})}var R=n(24),I=n.n(R);function M(){if(localStorage.getItem("user")){var e=JSON.parse(localStorage.getItem("user")||"");return e&&e.accessToken?"Bearer "+e.accessToken:""}return""}var W=n(258),B=n.n(W),L="TOGGLE_TAB",z="TOGGLE_REFRESH_WIDGETS",Y="HANDLE_ERROR",F=function(e){return{type:L,payload:{id:e}}},U=function(e,t){return{type:Y,payload:{error:e,customErrorMessage:t}}};function G(){var e=Object(v.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(v.useState)(!1),i=Object(s.a)(a,2),o=i[0],d=i[1],l=Object(r.c)();function u(){d(!o)}return Object(S.jsxs)("div",{children:[Object(S.jsx)(p.a,{id:"openImportConfigModal",color:"primary",onClick:u,children:Object(S.jsx)(B.a,{})}),Object(S.jsxs)(w.a,{onClose:function(){return d(!1)},open:o,children:[Object(S.jsx)(C.a,{children:"Importer la configuration"}),Object(S.jsx)(E.a,{children:Object(S.jsx)("input",{type:"file",id:"file",name:"file",onChange:function(e){e.target.files&&e.target.files[0]&&c(e.target.files[0])}})}),Object(S.jsxs)(y.a,{children:[Object(S.jsx)(x.a,{id:"closeImportConfigModal",onClick:u,variant:"contained",children:"Annuler"}),Object(S.jsx)(x.a,{id:"uploadFileButton",disabled:!n,onClick:function(){n&&function(e){var t=new FormData;return t.append("file",e),I.a.post("".concat("https://dash-webservices.herokuapp.com","/config/import"),t,{headers:{Authorization:M(),"content-type":"multipart/form-data"}})}(n).then((function(e){e&&u()})).catch((function(e){return l(U(e,"Erreur lors de l'import de la configuration."))}))},variant:"contained",children:"Upload"})]})]})]})}var H=n(97),X=n.n(H),J=n(524),P=n(539),q=n(259),Z=n.n(q);function V(e){var t=Object(v.useState)(e.tab.label),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(v.useState)(!1),o=Object(s.a)(i,2),d=o[0],l=o[1],u=Object(r.d)((function(e){return e.activeTab})),j=Object(r.c)();function b(){(function(e,t,n){return I.a.post("".concat("https://dash-webservices.herokuapp.com","/tab/updateTab"),{id:e,label:t,tabOrder:n},{headers:{Authorization:M(),"Content-type":"application/json"}})})(e.tab.id,c,e.tab.tabOrder).catch((function(e){return j(U(e,"Erreur lors de la modification d'un onglet."))})).finally((function(){return l(!d)}))}return Object(S.jsx)("div",{onClick:e.onTabClicked,className:"tab ".concat(e.tab.id===u?"selectedItem":""," border-2 border-gray-800 border-opacity-100"),children:d?Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)(J.a,{onDoubleClick:b,onKeyPress:function(e){"Enter"===e.key&&b()},onChange:function(e){return a(e.target.value)},value:c}),Object(S.jsx)(p.a,{className:"deleteTabButton",color:"primary",onClick:function(){var t;(t=e.tab.id,I.a.delete("".concat("https://dash-webservices.herokuapp.com","/tab/deleteTab/?id=").concat(t),{headers:{Authorization:M(),"Content-type":"application/json"}})).then((function(){return e.onTabDeleted(e.tab.id)})).catch((function(e){return j(U(e,"Erreur lors de la suppression d'un onglet."))}))},children:Object(S.jsx)(X.a,{})})]}):Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)("div",{children:Object(S.jsx)(P.a,{onDoubleClick:function(){l(!d)},value:e.tab.id.toString(),label:c,wrapped:!0})}),Object(S.jsx)("div",{children:Object(S.jsx)(Z.a,{})})]})})}var K=n(540),Q={"Content-type":"application/json"};var _={login:function(e,t){return I.a.post("".concat("https://dash-webservices.herokuapp.com","/auth/login"),{username:e,password:t},{headers:Q}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},logout:function(){localStorage.removeItem("user"),window.location.reload()},getCurrentUser:function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null}};function $(){var e=Object(v.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(v.useState)(""),i=Object(s.a)(a,2),o=i[0],d=i[1],l=Object(v.useState)(!1),u=Object(s.a)(l,2),j=u[0],b=u[1],h=Object(r.c)();return Object(S.jsx)("div",{className:"flex h-screen",children:Object(S.jsxs)("div",{className:"text-center m-auto",children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:"data:image/png;base64,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",className:"mx-auto",alt:"dash logo"})}),Object(S.jsx)("div",{children:Object(S.jsx)("h1",{className:"text-5xl",children:"Dash"})}),Object(S.jsxs)("div",{className:"flex flex-col mt-10 space-y-5",children:[Object(S.jsx)(J.a,{id:"inputUsername",placeholder:"Username",value:n,onChange:function(e){c(e.target.value)}}),Object(S.jsx)(J.a,{id:"inputPassword",placeholder:"Password",type:"password",value:o,onChange:function(e){d(e.target.value)}}),Object(S.jsxs)(x.a,{id:"loginButton",disabled:!n||!o||j,onClick:function(){b(!0),n&&o?_.login(n,o).then((function(){window.location.reload(),b(!1)}),(function(e){b(!1),h(U(e,"Erreur lors de la connexion de l'utilisateur."))})):b(!1)},variant:"contained",className:"flex mx-auto",children:[j&&Object(S.jsx)(K.a,{className:"mr-5"}),Object(S.jsx)("span",{children:"Se connecter"})]})]})]})})}function ee(e,t){return I.a.patch("".concat("https://dash-webservices.herokuapp.com","/widget/updateWidgetData/").concat(e),{data:t},{headers:{Authorization:M(),"Content-type":"application/json"}})}var te=n(541);n(316);function ne(e){var t=Object(v.useState)(!1),n=Object(s.a)(t,2),c=n[0],a=n[1];Object(v.useEffect)((function(){e.isClosed&&a(!1)}),[e.isClosed]);return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{onClick:function(){!c&&e.onOpenDetail&&e.onOpenDetail(),a(!c)},className:"title",children:e.componentRoot}),Object(S.jsx)("div",{children:Object(S.jsx)(te.a,{in:c,children:Object(S.jsx)(A.a,{children:Object(S.jsx)(k.a,{children:c&&e.componentDetail&&e.componentDetail})})})})]})}var ce,ae=n(88),re=ae.createLogger({format:ae.format.combine(ae.format.json(),ae.format.colorize({all:!0})),level:"debug",transports:[new ae.transports.Console]});function ie(e){return Object(S.jsxs)("div",{className:"flex flex-col h-full place-items-center justify-center space-y-5",children:[Object(S.jsx)("h4",{className:"font-bold",children:"\xcates-vous s\xfbr de vouloir supprimer ce widget ?"}),Object(S.jsxs)("div",{className:"flex flex-row justify-around w-full",children:[Object(S.jsx)(x.a,{onClick:e.onCancelButtonClicked,variant:"contained",color:"primary",className:"cancelButton",children:"Annuler"}),Object(S.jsx)(x.a,{onClick:function(){e.onDeleteButtonClicked(e.idWidget)},variant:"contained",color:"error",className:"validateDeletionButton",children:"Supprimer"})]})]})}!function(e){e[e.READ=1]="READ",e[e.EDIT=2]="EDIT",e[e.DELETE=3]="DELETE"}(ce||(ce={}));var oe=n(260),se=n.n(oe);n(436);function de(e){var t=Object(v.useState)(ce.READ),n=Object(s.a)(t,2),c=n[0],a=n[1],i=Object(r.d)((function(e){return e.toggleRefreshWidgets}));function o(){a(ce.DELETE)}function d(){for(var t=[],n=e.config.values(),c=n.next();!c.done;)t.push(c.value),c=n.next();return t.some((function(e){return!e}))}return Object(v.useEffect)(e.refreshFunction,[i]),Object(v.useEffect)((function(){return a(ce.READ)}),[e.config]),Object(S.jsxs)("div",{className:"widget h-96 m-2 border-2 border-solid border-black",children:[c===ce.DELETE&&Object(S.jsx)(ie,{idWidget:e.id,onDeleteButtonClicked:e.onDeleteButtonClicked,onCancelButtonClicked:function(){a(ce.READ)}}),(c===ce.EDIT||d()&&c!==ce.DELETE)&&null!==e.editModeComponent&&Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsx)("div",{className:"grid justify-items-end m-2",children:Object(S.jsx)(p.a,{onClick:o,className:"deleteButton",children:Object(S.jsx)(X.a,{})})}),Object(S.jsx)("div",{children:e.editModeComponent})]}),c===ce.READ&&!d()&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"header h-10 flex flex-row justify-between sticky top-0",children:[Object(S.jsx)("div",{className:"font-bold w-1/2",children:e.header}),Object(S.jsxs)("div",{className:"flex flex-row max-w-1/2",children:[e.additionalActionButtons,e.editModeComponent&&Object(S.jsx)(p.a,{onClick:function(){e.editModeComponent&&a(ce.EDIT)},className:"editButton",children:Object(S.jsx)(se.a,{})}),Object(S.jsx)(p.a,{onClick:e.refreshFunction,className:"refreshButton",children:Object(S.jsx)(h.a,{})}),Object(S.jsx)(p.a,{onClick:o,className:"deleteButton",children:Object(S.jsx)(X.a,{})})]})]}),Object(S.jsx)("div",{className:"max-h-80 overflow-y-scroll",children:e.body})]})]})}var le=n(542),ue=n(482);function je(e){return Object(S.jsxs)(le.a,{sx:{position:"relative",display:"inline-flex"},children:[Object(S.jsx)(K.a,Object(o.a)({variant:"determinate"},e)),Object(S.jsx)(le.a,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(S.jsx)(ue.a,{className:"progressValue",variant:"caption",component:"div",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}function be(e){var t=Object(v.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],r=Object(v.useState)([]),i=Object(s.a)(r,2),o=i[0],d=i[1],l="".concat("https://api.steampowered.com","/ISteamUserStats/GetPlayerAchievements/v0001/?appid=").concat(e.appid,"&key=").concat("A326F74CDA403B3E1135FAFADC9EEF66","&steamid=").concat("76561198046131373");return Object(v.useEffect)((function(){I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/"),{headers:{Authorization:M(),"Content-type":"application/json"},params:{url:l}}).then((function(e){e.data.playerstats.achievements&&(a(e.data.playerstats.achievements),d(e.data.playerstats.achievements.filter((function(e){return 1===e.achieved}))))})).catch((function(e){return re.error(e.message)}))}),[e]),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)("div",{children:e.name}),Object(S.jsx)("a",{href:"".concat("https://steamcommunity.com/app/").concat(e.appid),children:Object(S.jsx)("img",{src:"".concat("https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/apps/").concat(e.appid,"/").concat(e.img_logo_url,".jpg")})})]}),c&&o&&c.length>0&&Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsxs)("div",{className:"totalachievements",children:["Succ\xe8s : ",c.length]}),Object(S.jsxs)("div",{className:"completedAchievements",children:["Succ\xe8s compl\xe9t\xe9s : ",o.length]})]}),Object(S.jsx)(je,{value:o.length/c.length*100})]})]})}function he(e){var t=Object(v.useState)(),n=Object(s.a)(t,2),c=n[0],a=n[1],r=Object(v.useState)(),i=Object(s.a)(r,2),d=i[0],l=i[1],u="https://api.steampowered.com",j="/ISteamUser/GetPlayerSummaries/v0002/?key=".concat("A326F74CDA403B3E1135FAFADC9EEF66","&steamids=").concat("76561198046131373"),b="/IPlayerService/GetOwnedGames/v0001/?key=".concat("A326F74CDA403B3E1135FAFADC9EEF66","&steamid=").concat("76561198046131373","&format=json&include_appinfo=true");function h(){I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/"),{headers:{Authorization:M(),"Content-type":"application/json"},params:{url:"".concat(u).concat(j)}}).then((function(e){return a(e.data.response.players[0])})).catch((function(e){return re.error(e.message)})),I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/"),{headers:{Authorization:M(),"Content-type":"application/json"},params:{url:"".concat(u).concat(b)}}).then((function(e){return l(e.data.response.games.sort((function(e,t){return e.name.localeCompare(t.name)})))})).catch((function(e){return re.error(e.message)}))}Object(v.useEffect)((function(){h()}),[]);var f=Object(S.jsx)("div",{children:Object(S.jsxs)("a",{href:null===c||void 0===c?void 0:c.profileurl,className:"flex flex-row",children:[Object(S.jsx)("img",{src:null===c||void 0===c?void 0:c.avatar}),Object(S.jsx)("p",{children:null===c||void 0===c?void 0:c.personaname})]})}),O=Object(S.jsx)("div",{className:"flex flex-col",children:d&&d.map((function(e,t){return Object(S.jsx)(ne,{componentRoot:Object(S.jsxs)("div",{className:"gameInfo flex flex-row ".concat(t%2?"bg-gray-200":""),children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:"".concat("https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/apps/").concat(e.appid,"/").concat(e.img_icon_url,".jpg")})}),Object(S.jsx)("div",{children:e.name})]}),componentDetail:Object(S.jsx)(be,Object(o.a)({},e)),link:"".concat("https://steamcommunity.com/app/").concat(e.appid)},e.appid)}))});return Object(S.jsx)(de,{id:e.id,tabId:e.tabId,config:new Map,header:f,body:O,refreshFunction:h,onDeleteButtonClicked:e.onDeleteButtonClicked})}var fe=n(280);function Oe(e){var t=Object(v.useState)(e.profile),n=Object(s.a)(t,2),c=n[0],a=n[1];return Object(S.jsxs)("div",{className:"flex flex-col mx-auto max-w-xs mt-10 space-y-8",children:[Object(S.jsx)(J.a,{id:"twitterProfileName",onChange:function(e){return a(e.target.value)},value:c,placeholder:"Saisissez le nom de l'utilisateur"}),Object(S.jsx)(x.a,{className:"validateProfileButton",variant:"contained",color:"success",onClick:function(){c&&e.onProfileSubmitted(c)},disabled:!c||(null===c||void 0===c?void 0:c.length)<1,children:"Valider"})]})}function pe(e){var t=Object(v.useState)(e.profile||""),n=Object(s.a)(t,2),c=n[0],a=n[1];Object(v.useEffect)((function(){e.profile&&a(e.profile)}),[]);var r=Object(S.jsxs)("div",{className:"timelineHeader",children:["Timeline de ",c]}),i=Object(S.jsx)("div",{children:c&&Object(S.jsx)(fe.a,{dataSource:{sourceType:"profile",screenName:c},options:{theme:"dark"}})});return Object(S.jsx)(de,{id:e.id,tabId:e.tabId,config:new Map([["profile",c]]),header:r,body:i,editModeComponent:Object(S.jsx)(Oe,{profile:c,onProfileSubmitted:function(t){ee(e.id,{profile:t}).then((function(){return a(t)})).catch((function(e){return re.error(e.message)}))}}),refreshFunction:function(){re.info("Refresh Twitter timeline widget ".concat(c))},onDeleteButtonClicked:e.onDeleteButtonClicked})}var xe=n(25),me=n(278),ve=n(267),ge=n(529),we=n(279),Ce=n(266),Ee=n(261),ye=n(181);n(441);function Ae(e){var t=Object(v.useState)(e.calendarUrls||[]),n=Object(s.a)(t,2),c=n[0],a=n[1],r=function(e){a(c.map((function(t,n){var c;return n.toString()===(null===(c=e.target)||void 0===c?void 0:c.id)?e.target.value:t})))};return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{children:[c&&c.map((function(e,t){return Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)(J.a,{id:t.toString(),onChange:r,value:e,placeholder:"Saisissez une URL"}),Object(S.jsx)(x.a,{className:"removeCalendarUrl",variant:"contained",color:"error",onClick:function(){return t=e,void a(c.filter((function(e){return e!==t})));var t},children:"Supprimer"})]},t)})),Object(S.jsx)(x.a,{id:"addCalendarUrl",variant:"contained",onClick:function(){a(c.concat(""))},children:"Ajouter"})]}),Object(S.jsx)(x.a,{id:"validateCalendarUrls",onClick:function(){e.onConfigSubmitted(c)},disabled:!c||(null===c||void 0===c?void 0:c.length)<1,variant:"contained",color:"success",children:"Valider"})]})}function ke(e){var t=Object(v.useState)(e.calendars),n=Object(s.a)(t,2),c=n[0],a=n[1],r=Object(v.useState)([]),i=Object(s.a)(r,2),o=i[0],d=i[1],l={fr:ge.a},u=Object(ye.b)({format:me.a,parse:we.a,startOfWeek:Ce.a,getDay:ve.a,locales:l});function j(){d([]),null===c||void 0===c||c.forEach((function(e){I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/?url=").concat(e),{headers:{Authorization:M(),"Content-type":"application/json"}}).then((function(e){var t=Ee.parseICS(e.data);d((function(e){return e.concat.apply(e,Object(xe.a)(Object.keys(t).map((function(e){var n,c,a=t[e];return{title:a.summary,start:a.start,end:a.end,allDay:0===(null===(n=a.end)||void 0===n?void 0:n.getHours())&&0===(null===(c=a.start)||void 0===c?void 0:c.getHours())}}))))}))})).catch((function(e){return re.error(e)}))}))}Object(v.useEffect)((function(){j()}),[c]);var b=Object(S.jsx)("div",{children:"Calendar"}),h=Object(S.jsx)("div",{children:Object(S.jsx)(ye.a,{localizer:u,culture:"fr",events:o,startAccessor:"start",endAccessor:"end",defaultView:"month",popup:!0,className:"h-screen"})});return Object(S.jsx)(de,{id:e.id,tabId:e.tabId,config:new Map([["calendars",c]]),header:b,body:h,editModeComponent:Object(S.jsx)(Ae,{calendarUrls:c,onConfigSubmitted:function(t){ee(e.id,{calendars:t}).then((function(){t===c&&j(),a(t)})).catch((function(e){return re.error(e.message)}))}}),refreshFunction:j,onDeleteButtonClicked:e.onDeleteButtonClicked})}var De=n(269),Se=n.n(De),Ne=n(270),Te=n.n(Ne),Re=n(268),Ie=n.n(Re);function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Date(1e3*e+1e3*t)}function We(e){var t=-60*(new Date).getTimezoneOffset();if(Math.abs(e)===Math.abs(t))return 0;var n=Math.abs(e)+Math.abs(t);return e<t?-n:n}function Be(e){var t=document.createElement("div");return t.innerHTML=e||"",t.textContent||t.innerText||""}var Le=function(e){return Object(S.jsxs)("div",{className:"border-2 border-gray-500 border-solid",children:[Object(S.jsx)("div",{className:"articleTitle",children:Object(S.jsx)("a",{href:e.link,children:e.title})}),Object(S.jsx)("div",{className:"articleContent",children:Be(e.content)||Be(e.description)}),Object(S.jsxs)("div",{className:"articlePubDate",children:["Publi\xe9 le ",(t=e.pubDate||"",new Date(t).toLocaleString("fr"))," ",e.author&&"par "+e.author]})]});var t};function ze(e){var t=Object(v.useState)(e.url),n=Object(s.a)(t,2),c=n[0],a=n[1];return Object(S.jsxs)("div",{className:"flex flex-col mx-auto max-w-xs mt-10 space-y-8",children:[Object(S.jsx)(J.a,{id:"rssFeedUrl",name:"url",onChange:function(e){return a(e.target.value)},value:c,placeholder:"Saisissez l'URL du flux RSS"}),Object(S.jsx)(x.a,{className:"validateRssUrl",color:"success",variant:"contained",onClick:function(){c&&e.onUrlSubmitted(c)},disabled:!c||(null===c||void 0===c?void 0:c.length)<1,children:"Valider"})]})}n(461);function Ye(e){var t=Object(v.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],r=Object(v.useState)(e.url),i=Object(s.a)(r,2),d=i[0],l=i[1],u=Object(v.useState)(""),j=Object(s.a)(u,2),b=j[0],h=j[1],f=Object(v.useState)(),O=Object(s.a)(f,2),x=O[0],m=O[1],g=Object(v.useState)(""),w=Object(s.a)(g,2),C=w[0],E=w[1],y=Object(v.useState)(""),A=Object(s.a)(y,2),k=A[0],D=A[1],N=Object(v.useState)(!0),T=Object(s.a)(N,2),R=T[0],W=T[1],B=Object(v.useState)(e.readArticlesGuids||[]),L=Object(s.a)(B,2),z=L[0],Y=L[1],F=new Ie.a;function U(){d&&I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/?url=").concat(d),{headers:{Authorization:M(),"Content-type":"application/json"}}).then((function(e){F.parseString(e.data).then((function(e){var t=e;h(t.description),a(t.items),m(t.image),E(t.link),D(t.title)})).catch((function(e){return re.error(e.message)}))})).catch((function(e){return re.error(e.message)}))}function G(e){var t=e.pubDate?new Date(e.pubDate).toLocaleTimeString("fr",{hour:"2-digit",minute:"2-digit"}):"";return"".concat(t," ").concat(e.title)}function H(t){ee(e.id,{url:d,readArticlesGuids:t}).then((function(e){return Y(e.data.data.readArticlesGuids)})).catch((function(e){return re.error(e.message)}))}Object(v.useEffect)((function(){a([]),U()}),[d]);var X,J=Object(S.jsx)("div",{className:"h-10",children:Object(S.jsxs)("a",{href:C,className:"flex flex-row",children:[x&&Object(S.jsx)("img",{className:"max-h-9 max-w-1",src:null===x||void 0===x?void 0:x.url,alt:"logo"}),Object(S.jsx)("div",{className:"rssTitle whitespace-nowrap overflow-hidden overflow-ellipsis",children:k})]})}),P=Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)(p.a,{className:"markAllArticlesAsRead",color:"primary",onClick:function(){H(c.map((function(e){return e.guid})))},children:Object(S.jsx)(Se.a,{})}),Object(S.jsx)(p.a,{className:"minimizeAllArticles",color:"primary",onClick:function(){W(!0)},children:Object(S.jsx)(Te.a,{})})]}),q=Object(S.jsx)("div",{children:d&&c&&Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"font-bold",children:b}),Object(S.jsx)("div",{className:"feed",children:(X=c,X.map((function(e,t){return Object(S.jsx)(ne,{componentRoot:Object(S.jsx)("div",{className:"rssArticle \n              ".concat(z.includes(e.guid)?"read":""," \n              ").concat(t%2?"bg-gray-200":""),children:G(e)}),componentDetail:Object(S.jsx)(Le,Object(o.a)({},e)),link:e.link,isClosed:R,onOpenDetail:function(){return t=e.guid,W(!1),void(z.includes(t)||H([t].concat(Object(xe.a)(z))));var t}},e.guid)})))})]})});return Object(S.jsx)("div",{children:Object(S.jsx)(de,{id:e.id,tabId:e.tabId,config:new Map([["url",d]]),header:J,additionalActionButtons:P,body:q,editModeComponent:Object(S.jsx)(ze,{url:d,onUrlSubmitted:function(t){ee(e.id,{url:t,guidsList:[]}).then((function(){return l(t)})).catch((function(e){return re.error(e.message)}))}}),refreshFunction:U,onDeleteButtonClicked:e.onDeleteButtonClicked})})}var Fe=n(271),Ue=n(20);function Ge(e,t){var n=Object(v.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return re.error(c),t}})),c=Object(s.a)(n,2),a=c[0],r=c[1];return[a,function(t){try{var n=t instanceof Function?t(a):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){re.error(c)}}]}function He(e){var t=e%1;return e-t+t/10*6}function Xe(e){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{children:Object(S.jsxs)("a",{href:"https://www.strava.com/activities/".concat(e.id),children:[Object(me.a)(new Date(e.start_date_local),"dd MMM")," ",e.name]})}),Object(S.jsxs)("div",{children:["Distance : ",Math.round(e.distance)/1e3," kms"]}),Object(S.jsxs)("div",{children:["Dur\xe9e : ",He(e.moving_time/60)," mins"]}),Object(S.jsxs)("div",{children:["Denivel\xe9 : ",e.total_elevation_gain," m\xe8tres"]}),Object(S.jsxs)("div",{children:["Troph\xe9es : ",e.achievement_count]}),Object(S.jsxs)("div",{children:["Vitesse moyenne : ",e.average_speed]}),Object(S.jsxs)("div",{children:["Vitesse max : ",e.max_speed]}),Object(S.jsxs)("div",{children:["Kudos : ",e.kudos_count]}),Object(S.jsxs)("div",{children:["Commentaires : ",e.comment_count]})]})}var Je=n(519),Pe=n(520),qe=n(130);function Ze(e){var t=Object(v.useState)([]),n=Object(s.a)(t,2),c=n[0],a=n[1],r=Object(v.useState)(),i=Object(s.a)(r,2),d=i[0],l=i[1],u=Ge("strava_token",null),j=Object(s.a)(u,2),b=j[0],h=j[1],f=Ge("strava_refresh_token",null),O=Object(s.a)(f,2),p=O[0],m=O[1],g=Ge("strava_token_expires_at",null),w=Object(s.a)(g,2),C=w[0],E=w[1],y=Object(Ue.c)().search;function A(){a([]),b&&I.a.get("https://www.strava.com/api/v3/athlete",{headers:{Authorization:"Bearer ".concat(b)}}).then((function(e){return l(e.data)})).catch((function(e){return re.error(e.message)})),b&&C&&Object(Pe.a)(new Date(1e3*C),new Date)?I.a.get("https://www.strava.com/api/v3/athlete/activities?page=1&per_page=".concat(20),{headers:{Authorization:"Bearer ".concat(b)}}).then((function(e){return a(e.data.reverse())})).catch((function(e){return re.error(e.message)})):k()}function k(){p?I.a.post("https://www.strava.com/oauth/token",{client_id:"30391",client_secret:"66cf349fa75b4f87701342463c9d69bea1acc1ed",refresh_token:p,grant_type:"refresh_token"}).then((function(e){h(e.data.access_token),m(e.data.refresh_token),E(e.data.expires_at),l(e.data.athlete)})).catch((function(e){return re.error(e.message)})):re.error("No refresh token")}function D(){return c.reduce((function(e,t){var n=Object(me.a)(new Date(t.start_date_local),"yyyy-MM");return e[n]||(e[n]=[]),e[n].push(Math.round(1e3*t.distance)/1e6),e}),[])}function N(){var e=D();return Object.keys(e).map((function(t){return{x:new Date(t),y:Math.round(e[t].reduce((function(e,t){return e+t})))}}))}Object(v.useEffect)((function(){var e=Fe.parse(y);e&&e.code&&function(e){I.a.post("https://www.strava.com/oauth/token",{client_id:"30391",client_secret:"66cf349fa75b4f87701342463c9d69bea1acc1ed",code:e,grant_type:"authorization_code"}).then((function(e){h(e.data.access_token),m(e.data.refresh_token),E(e.data.expires_at),l(e.data.athlete)})).catch((function(e){return re.error(e.message)}))}(e.code.toString());b&&p&&!Object(Je.a)(new Date(1e3*C),new Date)||k()}),[]),Object(v.useEffect)((function(){b&&A()}),[b]);var T=Object(S.jsx)("div",{children:Object(S.jsxs)("a",{href:"https://www.strava.com/athletes/".concat(null===d||void 0===d?void 0:d.id),className:"flex flex-row",children:[Object(S.jsx)("img",{className:"h-9 w-9",src:null===d||void 0===d?void 0:d.profile_medium}),Object(S.jsxs)("p",{children:[null===d||void 0===d?void 0:d.firstname," ",null===d||void 0===d?void 0:d.lastname]})]})});function R(e){return"".concat(Object(me.a)(new Date(e.start_date_local),"dd MMM"),"  ").concat(e.name,"  ").concat(Math.round(1e3*e.distance)/1e6," kms")}var M=Object(S.jsxs)("div",{className:"flex flex-col",children:[b&&p&&C&&Object(Pe.a)(new Date(1e3*C),new Date)&&Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"max-h-48 overflow-y-scroll",children:c.slice().reverse().map((function(e,t){return Object(S.jsx)(ne,{componentRoot:Object(S.jsx)("div",{className:"".concat(t%2?"bg-gray-200":""),children:R(e)}),componentDetail:Object(S.jsx)(Xe,Object(o.a)({},e)),link:"https://www.strava.com/activities/".concat(e.id)},e.id)}))}),Object(S.jsx)("div",{className:"min-h-24 max-h-96",children:Object(S.jsx)(qe.a,{type:"bar",data:{labels:N().map((function(e){return Object(me.a)(e.x,"MMM yyyy")})),datasets:[{label:"Distance (kms)",backgroundColor:"orange",data:N().map((function(e){return e.y})),yAxisID:"kms",order:2},{label:"Activit\xe9s",type:"line",backgroundColor:"darkgreen",data:Object.keys(D()).map((function(e){return D()[e].length})),yAxisID:"activities",order:1}]}})})]}),(!b||!p||C&&Object(Je.a)(new Date(1e3*C),new Date))&&Object(S.jsx)("a",{href:"https://www.strava.com/oauth/authorize?client_id=".concat("30391","&redirect_uri=").concat("https://arnaudflaesch.github.io/Dash-Web/","&response_type=code&scope=read,activity:read"),children:Object(S.jsx)(x.a,{variant:"contained",children:"Se connecter"})})]});return Object(S.jsx)(de,{id:e.id,tabId:e.tabId,config:new Map,header:T,body:M,refreshFunction:A,onDeleteButtonClicked:e.onDeleteButtonClicked})}function Ve(e){var t=Object(v.useState)(e.city||""),n=Object(s.a)(t,2),c=n[0],a=n[1];return Object(S.jsxs)("div",{className:"flex flex-col mx-auto max-w-xs mt-10 space-y-8",children:[Object(S.jsx)(J.a,{id:"cityNameInput",name:"city",onChange:function(e){return a(e.target.value)},value:c,placeholder:"Saisissez de nom de la ville"}),Object(S.jsx)(x.a,{variant:"contained",id:"validateButton",color:"success",onClick:function(){e.onConfigSubmitted(c)},disabled:!c||(null===c||void 0===c?void 0:c.length)<1,children:"Valider"})]})}var Ke=n(98),Qe=n.n(Ke),_e=n(272),$e=n.n(_e);function et(e){var t,n,c;return Object(S.jsxs)("div",{className:" forecast border-2 border-solid border-black",children:[Object(S.jsx)("div",{children:Me(e.dt,We(e.city.timezone)).toLocaleString("fr",{weekday:"short",day:"numeric",hour:"2-digit"})}),Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(null===(t=e.weather[0])||void 0===t?void 0:t.icon,"@2x.png"),className:"max-h-14 max-w-14",title:null===(n=e.weather[0])||void 0===n?void 0:n.description,alt:null===(c=e.weather[0])||void 0===c?void 0:c.description})}),Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(Qe.a,{style:{color:"crimson"},className:"m-r-1"}),e.main.temp_max,"\xb0"]}),Object(S.jsxs)("div",{children:[Object(S.jsx)(Qe.a,{style:{color:"blue"},className:"m-r-1"}),e.main.temp_min,"\xb0"]}),Object(S.jsxs)("div",{children:[Object(S.jsx)($e.a,{style:{color:"lightblue"},className:"m-r-1"}),e.main.humidity,"%"]})]})]})]})}n(471);var tt,nt=n(273),ct=n.n(nt),at=n(274),rt=n.n(at),it=n(275),ot=n.n(it),st=n(36);function dt(e){var t="https://api.openweathermap.org/data/2.5/",n="?units=metric&lang=fr&appid=",c=Object(v.useState)(e.city),a=Object(s.a)(c,2),r=a[0],i=a[1],d=Object(v.useState)(),l=Object(s.a)(d,2),u=l[0],j=l[1],b=Object(v.useState)(),h=Object(s.a)(b,2),f=h[0],O=h[1],p=Object(v.useState)(),m=Object(s.a)(p,2),g=m[0],w=m[1],C=Object(v.useState)(tt.TODAY),E=Object(s.a)(C,2),y=E[0],A=E[1];function k(){r&&(I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/"),{headers:{Authorization:M(),"Content-type":"application/json"},params:{url:"".concat(t).concat("weather").concat(n).concat("d10750704319701c3f9436134add4d7d","&q=").concat(r)}}).then((function(e){return j(e.data)})).catch((function(e){return re.error(e.message)})),I.a.get("".concat("https://dash-webservices.herokuapp.com","/proxy/"),{headers:{Authorization:M(),"Content-type":"application/json"},params:{url:"".concat(t).concat("forecast").concat(n).concat("d10750704319701c3f9436134add4d7d","&q=").concat(r)}}).then((function(e){O(e.data.list),w(e.data.city)})).catch((function(e){return re.error(e.message)})))}function D(){j(void 0),O(void 0),w(void 0),k()}function N(){if(!g||!f)return[];switch(y){case tt.WEEK:return f.filter((function(e){var t=Me(e.dt,We(g.timezone));return t.getHours()>=15&&t.getHours()<=18}));case tt.TOMORROW:return f.filter((function(e){return new Date(1e3*e.dt).getDay()===new Date(+new Date+864e5).getDay()&&new Date(1e3*e.dt).getHours()>=7}));case tt.TODAY:default:return f.filter((function(e){return new Date(1e3*e.dt).getDay()===(new Date).getDay()&&new Date(1e3*e.dt).getHours()>=7}))}}st.d.register(st.c,st.h,st.g,st.j),Object(v.useEffect)((function(){k()}),[r]);var T=Object(S.jsxs)("div",{children:["La m\xe9t\xe9o aujourd'hui \xe0 ",r]}),R=Object(S.jsxs)("div",{children:[g&&u&&u.weather&&Object(S.jsxs)("div",{className:"flex flex-row",children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{className:"w-16",src:"https://openweathermap.org/img/wn/".concat(u.weather[0].icon,"@2x.png"),title:u.weather[0].description,alt:u.weather[0].description})}),Object(S.jsxs)("div",{className:"flex flex-row place-items-center",children:[Object(S.jsxs)("div",{className:"flex flex-col mr-5",children:[Object(S.jsx)("div",{children:u.weather[0].description}),Object(S.jsxs)("div",{children:[Object(S.jsx)(Qe.a,{}),u.main.temp,"\xb0"]})]}),Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsxs)("div",{className:"flex justify-between",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(ct.a,{}),Me(u.sys.sunrise,We(u.timezone)).toLocaleTimeString("fr")]}),Object(S.jsxs)("div",{children:[Object(S.jsx)(rt.a,{}),Me(u.sys.sunset,We(u.timezone)).toLocaleTimeString("fr")]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)(ot.a,{}),Me(u.dt,We(u.timezone)).toLocaleString("fr")]})]})]})]}),g&&f&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"flex flex-row flex-wrap space-x-10",children:[Object(S.jsx)("span",{className:"font-bold",children:"Pr\xe9visions"}),Object(S.jsxs)("span",{className:"flex flex-row space-x-1",children:[Object(S.jsx)(x.a,{id:"toggleTodayForecast",onClick:function(){A(tt.TODAY)},variant:"contained",color:y===tt.TODAY?"success":"primary",children:"Aujourd'hui"}),Object(S.jsx)(x.a,{id:"toggleTomorrowForecast",variant:"contained",color:y===tt.TOMORROW?"success":"primary",onClick:function(){A(tt.TOMORROW)},children:"Demain"}),Object(S.jsx)(x.a,{id:"toggleWeekForecast",onClick:function(){A(tt.WEEK)},variant:"contained",color:y===tt.WEEK?"success":"primary",children:"Semaine"})]})]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{className:"min-h-24 max-x-full",children:Object(S.jsx)(qe.b,{data:{labels:N().map((function(e){return y===tt.TODAY||y===tt.TOMORROW?Object(me.a)(new Date(1e3*e.dt),"HH"):Object(me.a)(new Date(1e3*e.dt),"EEE dd MMM")})),datasets:[{label:"Temp\xe9rature",borderColor:"orange",data:N().map((function(e){return e.main.temp_max}))},{label:"Ressenti",borderColor:"red",data:N().map((function(e){return e.main.feels_like}))}]},options:{maintainAspectRatio:!1}})}),Object(S.jsx)("div",{className:"flex flex-row forecastRow",children:g&&f&&N().map((function(e){return Object(S.jsx)("div",{className:"forecastContainer",children:Object(S.jsx)(et,Object(o.a)(Object(o.a)({},e),{},{city:g}))},e.dt)}))})]})]});return Object(S.jsx)(de,{id:e.id,tabId:e.tabId,config:new Map([["city",r]]),header:T,body:R,editModeComponent:Object(S.jsx)(Ve,{city:r,onConfigSubmitted:function(t){ee(e.id,{city:t}).then((function(){i(t),D()})).catch((function(e){return re.error(e.message)}))}}),refreshFunction:D,onDeleteButtonClicked:e.onDeleteButtonClicked})}!function(e){e[e.TODAY=0]="TODAY",e[e.TOMORROW=1]="TOMORROW",e[e.WEEK=2]="WEEK"}(tt||(tt={}));var lt=n(527);function ut(e){var t=Object(v.useState)([]),n=Object(s.a)(t,2),a=n[0],i=n[1],d=Object(r.d)((function(e){return e.activeTab})),l=Object(r.c)();function u(e){var t=Object(o.a)(Object(o.a)({id:e.id,tabId:e.tab.id},e.data),{},{onDeleteButtonClicked:j});switch(e.type){case c.WEATHER:return Object(S.jsx)(dt,Object(o.a)({},t));case c.RSS:return Object(S.jsx)(Ye,Object(o.a)({},t));case c.CALENDAR:return Object(S.jsx)(ke,Object(o.a)({},t));case c.STRAVA:return Object(S.jsx)(Ze,Object(o.a)({},t));case c.STEAM:return Object(S.jsx)(he,Object(o.a)({},t));case c.TWITTER_TIMELINE:return Object(S.jsx)(pe,Object(o.a)({},t))}}function j(e){(function(e){return I.a.delete("".concat("https://dash-webservices.herokuapp.com","/widget/deleteWidget/?id=").concat(e),{headers:{Authorization:M(),"Content-type":"application/json"}})})(e).then((function(t){t&&i(a.filter((function(t){return t.id!==e})))})).catch((function(e){return l(U(e,"Erreur lors de la suppression d'un widget."))}))}return Object(v.useEffect)((function(){var t;d===e.tabId&&(t=e.tabId,I.a.get("".concat("https://dash-webservices.herokuapp.com","/widget/?tabId=").concat(t),{headers:{Authorization:M(),"Content-type":"application/json"}})).then((function(e){return i(e.data)})).catch((function(e){return l(U(e,"Erreur lors de la r\xe9cup\xe9ration des widgets."))}))}),[d]),Object(v.useEffect)((function(){e.newWidget&&i(a.concat([e.newWidget]))}),[null!=e.newWidget&&e.newWidget.id]),Object(S.jsx)("div",{children:e.tabId===d&&Object(S.jsx)(lt.a,{value:e.tabId.toString(),className:"widgetList grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3",children:a&&a.length>0&&a.map((function(e){return Object(S.jsx)("div",{children:u(e)},e.id)}))})})}n(472);var jt=n(528),bt=n(526);function ht(){var e=Object(v.useState)(!0),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(v.useState)(""),i=Object(s.a)(a,2),o=i[0],d=i[1],l=Object(r.d)((function(e){return e.errorToHandle})),u="bottom",j="center";return Object(v.useEffect)((function(){var e,t;l?(e=null===l||void 0===l?void 0:l.error,t=null===l||void 0===l?void 0:l.customErrorMessage,re.error(e.message),d(t),c(!0)):c(!1)}),[l]),Object(S.jsx)(jt.a,{id:"errorSnackbar",anchorOrigin:{vertical:u,horizontal:j},open:n,autoHideDuration:4e3,onClose:function(){c(!1)},children:Object(S.jsx)(bt.a,{severity:"error",children:o})},"bottomcenter")}function ft(){var e=Object(v.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(v.useState)(),i=Object(s.a)(a,2),d=i[0],u=i[1],b=Object(r.d)((function(e){return e.activeTab})),w=Object(r.c)(),C=Object(v.useRef)(!1),E="Erreur lors de l'initialisation du dashboard.";function y(){w({type:z,payload:{}})}function A(){var e;(e="Nouvel onglet",I.a.post("".concat("https://dash-webservices.herokuapp.com","/tab/addTab"),{label:e},{headers:{Authorization:M(),"Content-type":"application/json"}})).then((function(e){var t=e.data;c(n.concat(t)),w(F(t.id))})).catch((function(e){return w(U(e,"Erreur lors de l'ajout d'un onglet."))}))}function k(e){n.length>1&&(n[0].id===e?w(F(n[1].id)):w(F(b===e?n[0].id:b))),c(n.filter((function(t){return t.id!==e})))}function D(){return null!==_.getCurrentUser()&&!function(){var e=_.getCurrentUser();return!(!e||!e.accessToken)&&Date.now()>=1e3*Object(m.a)(e.accessToken).exp}()}return Object(v.useEffect)((function(){if(D()){I.a.get("".concat("https://dash-webservices.herokuapp.com","/tab/"),{headers:{Authorization:M(),"Content-type":"application/json"}}).then((function(e){c(e.data),e.data&&e.data.length>0&&w(F(e.data[0].id)),C.current=!0})).catch((function(e){return w(U(e,E))}));var e=setInterval(y,9e5);return function(){return clearInterval(e)}}}),[]),Object(v.useEffect)((function(){C.current&&n&&0===n.length&&A()}),[n]),Object(S.jsxs)("div",{children:[!D()&&Object(S.jsx)($,{}),D()&&Object(S.jsx)("div",{children:Object(S.jsx)(f.a,{value:b.toString(),children:Object(S.jsxs)("div",{className:"flex flex-col",children:[Object(S.jsxs)("div",{className:"flex flex-row m-1",children:[Object(S.jsxs)("div",{className:"flex flex-row overflow-x-auto w-9/12 md:w-10/12",children:[Object(S.jsx)(g.a,{onDragEnd:function(e){if(e.destination){var t=function(e,t,n){var c=Array.from(e),a=c.splice(t,1),r=Object(s.a)(a,1)[0];return c.splice(n,0,r),c}(n,e.source.index,e.destination.index).map((function(e,t){return e.tabOrder=t,e}));(function(e){return I.a.post("".concat("https://dash-webservices.herokuapp.com","/tab/updateTabs"),e,{headers:{Authorization:M(),"Content-type":"application/json"}})})(t).then((function(e){return c(e.data)})).catch((function(e){return re.error(e.message)}))}},children:Object(S.jsx)(g.c,{droppableId:"droppable",direction:"horizontal",children:function(e){return Object(S.jsxs)("div",Object(o.a)(Object(o.a)({},e.droppableProps),{},{ref:e.innerRef,children:[Object(S.jsx)(O.a,{className:"flex flex-row flex-wrap",children:n.length>0&&n.map((function(e,t){return Object(S.jsx)(g.b,{draggableId:e.id.toString(),index:t,children:function(t){return Object(S.jsx)("div",Object(o.a)(Object(o.a)(Object(o.a)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:Object(S.jsx)(V,{tab:e,onTabClicked:function(){return function(e){b!==e&&w(F(e))}(e.id)},onTabDeleted:k})}),e.id)}},e.id)}))}),e.placeholder]}))}})}),Object(S.jsx)(p.a,{id:"addNewTabButton",color:"primary",onClick:A,children:Object(S.jsx)(l.a,{})})]}),Object(S.jsxs)("div",{className:"flex flex-row w-1/3 md:w-3/12",children:[Object(S.jsxs)("div",{className:"flex flex-row m-auto",children:[Object(S.jsx)(T,{onWidgetAdded:function(e){b&&function(e,t){return I.a.post("".concat("https://dash-webservices.herokuapp.com","/widget/addWidget"),{type:e,tab:{id:t}},{headers:{Authorization:M(),"Content-type":"application/json"}})}(e.currentTarget.value,b).then((function(e){if(e){var t=e.data;u(t)}})).catch((function(e){return w(U(e,"Erreur lors de l'ajout d'un widget."))}))}}),Object(S.jsx)("div",{children:Object(S.jsx)(p.a,{id:"reloadAllWidgetsButton",color:"primary",onClick:y,children:Object(S.jsx)(h.a,{})})}),Object(S.jsx)("div",{children:Object(S.jsx)(p.a,{id:"downloadConfigButton",color:"primary",onClick:function(){I.a.get("".concat("https://dash-webservices.herokuapp.com","/config/export"),{headers:{Authorization:M(),"Content-type":"application/json"},responseType:"blob"}).then((function(e){re.info("Configuration export\xe9e");var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","dashboardConfig.json"),document.body.appendChild(n),n.click()})).catch((function(e){return w(U(e,"Erreur lors de l'export de la configuration."))}))},children:Object(S.jsx)(j.a,{})})}),Object(S.jsx)(G,{})]}),Object(S.jsx)(x.a,{onClick:_.logout,variant:"contained",children:"D\xe9connexion"})]})]}),n.length>0&&n.map((function(e){return Object(S.jsx)(ut,{newWidget:(t=e.id,d&&t===d.tab.id?d:void 0),tabId:e.id},e.id);var t}))]})})}),Object(S.jsx)(ht,{})]})}n(473);var Ot=n(75),pt={activeTab:-1,toggleRefreshWidgets:!1,errorToHandle:void 0},xt=Object(Ot.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:var n=t.payload,c=n.id;return Object(o.a)(Object(o.a)({},e),{},{activeTab:c});case z:return Object(o.a)(Object(o.a)({},e),{},{toggleRefreshWidgets:!e.toggleRefreshWidgets});case Y:return Object(o.a)(Object(o.a)({},e),{},{errorToHandle:Object(o.a)({},t.payload)});default:return e}})),mt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function vt(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.render(Object(S.jsx)(r.a,{store:xt,children:Object(S.jsx)(i.a,{children:Object(S.jsx)(ft,{})})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");mt?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):vt(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):vt(e)}))}}()}},[[474,1,2]]]);
//# sourceMappingURL=main.b90790f5.chunk.js.map