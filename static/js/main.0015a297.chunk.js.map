{"version":3,"sources":["enums/WidgetsEnum.ts","pages/store/Store.tsx","modals/CreateWidgetModal.tsx","services/auth.header.ts","utils/LogUtils.ts","modals/ImportConfigModal.tsx","services/config.service.ts","navigation/navDash/NavDash.tsx","services/tab.service.ts","services/auth.service.ts","pages/login/Login.tsx","reducers/actionTypes.ts","reducers/actions.ts","services/widget.service.ts","enums/ModeEnum.ts","components/detailComponent/ComponentWithDetail.tsx","widgets/utils/DeleteWidget.tsx","widgets/Widget.tsx","widgets/utils/circular-progress/CircularProgressBar.tsx","widgets/steam/details/GameDetails.tsx","widgets/steam/SteamWidget.tsx","widgets/twitter/emptyWidget/EmptyTwitterTimelineWidget.tsx","widgets/twitter/TwitterTimelineWidget.tsx","widgets/calendar/emptyWidget/EmptyCalendarWidget.tsx","widgets/calendar/CalendarWidget.tsx","utils/DateUtils.ts","widgets/rss/article/RSSArticle.tsx","widgets/rss/emptyWidget/EmptyRSSWidget.tsx","widgets/rss/RSSWidget.tsx","hooks/localStorageHook.ts","widgets/strava/activity/StravaActivity.tsx","widgets/strava/StravaWidget.tsx","widgets/weather/emptyWidget/EmptyWeatherWidget.tsx","widgets/weather/WeatherWidget.tsx","widgets/weather/forecast/Forecast.tsx","tab/TabDash.tsx","Dash.tsx","reducers/tabReducer.ts","reducers/store.ts","registerServiceWorker.ts","index.tsx"],"names":["WidgetTypes","Store","props","className","Object","keys","map","key","isNaN","parseInt","Card","CardImg","top","width","src","alt","CardBody","CardTitle","CardSubtitle","CardText","Button","id","onClick","onWidgetAdded","value","CreateWidgetModal","useState","createWidgetModal","setCreateWidgetModal","toggleCreateWidgetModal","Modal","isOpen","size","toggle","ModalHeader","ModalBody","ModalFooter","color","authorizationBearer","localStorage","getItem","user","JSON","parse","accessToken","logger","winston","format","combine","json","colorize","all","level","transports","Console","ImportConfigModal","selectedFile","setSelectedFile","importConfigModal","setImportConfigModal","toggleImportConfigModal","type","name","onChange","event","target","files","disabled","file","formData","FormData","append","axios","post","process","headers","Authorization","importConfig","then","response","catch","error","NavDash","tab","label","setLabel","isToggled","saveTabName","tabOrder","updateTab","NavItem","NavLink","onTabClicked","onDoubleClick","onKeyPress","delete","onTabDeleted","login","username","password","data","setItem","stringify","logout","removeItem","window","location","reload","getCurrentUser","Login","setUsername","setPassword","loading","setLoading","message","setMessage","htmlFor","e","AuthService","resMessage","toString","role","TOGGLE_TAB","toggleSelectedTab","payload","updateWidgetData","patch","ModeEnum","ComponentWithDetail","openCollapse","setOpenCollapse","useEffect","isClosed","onOpenDetail","componentRoot","Collapse","componentDetail","DeleteWidget","onCancelButtonClicked","onDeleteButtonClicked","idWidget","Widget","READ","mode","setMode","useCustomEventListener","refreshFunction","config","header","additionalActionButtons","editModeComponent","EDIT","DELETE","body","percentagetodegrees","percentage","CircularProgressBar","style","transform","Math","round","GameDetails","achievements","setAchievements","completedAchievements","setCompletedAchievements","GET_ACHIVEMENTS_URL","appid","get","params","url","playerstats","filter","achievement","achieved","href","img_logo_url","length","SteamWidget","playerData","setPlayerData","ownedGames","setOwnedGames","STEAM_API_URL","GET_PLAYER_SUMMARIES_URL","GET_OWNED_GAMES_URL","refreshWidget","players","games","sort","gameA","gameB","localeCompare","widgetHeader","profileurl","avatar","personaname","widgetBody","game","img_icon_url","link","tabId","EmptyTwitterTimelineWidget","profile","setProfile","placeholder","onProfileSubmitted","TwitterTimelineWidget","dataSource","sourceType","screenName","options","theme","widgetProfile","info","EmptyCalendarWidget","calendarUrls","setCalendarUrls","onCalendarUrlUpdated","index","calendarUrl","concat","onConfigSubmitted","CalendarWidget","calendars","schedules","setSchedules","locales","fr","localizer","dateFnsLocalizer","startOfWeek","getDay","ical","oldSchedules","eventKey","title","summary","start","end","allDay","getHours","culture","events","startAccessor","endAccessor","defaultView","popup","height","updatedCalendars","formatDateFromTimestamp","timestamp","offset","Date","adjustTimeWithOffset","localeOffset","getTimezoneOffset","abs","offsetMilliseconds","stripHtmlFromContent","content","div","document","createElement","innerHTML","textContent","innerText","RSSArticle","description","date","pubDate","toLocaleString","author","EmptyRSSWidget","setUrl","onUrlSubmitted","RSSWidget","feed","setFeed","setDecription","image","setImage","setLink","setTitle","isFeedClosed","setFeedClosed","readArticlesGuids","readArticles","setReadArticles","rssParser","RSSParser","fetchDataFromRssFeed","apiResult","parseString","result","items","formatTitleForArticle","article","toLocaleTimeString","hour","minute","includes","guid","updateRssFeed","rssUrl","guidsList","useLocalStorage","initialValue","item","storedValue","setStoredValue","valueToStore","Function","StravaActivity","start_date_local","distance","moving_time","total_elevation_gain","achievement_count","average_speed","max_speed","kudos_count","comment_count","StravaWidget","activities","setActivities","athlete","setAthlete","token","setToken","refreshToken","setRefreshToken","tokenExpirationDate","setTokenExpirationDate","search","useLocation","isAfter","reverse","refreshTokenFromApi","client_id","client_secret","refresh_token","grant_type","access_token","expires_at","getActivitiesByMonth","reduce","activitiesByMonth","activity","month","push","getStatsFromActivities","activitiesByMonthList","x","y","total","values","queryString","code","apiCode","getToken","isBefore","profile_medium","firstname","lastname","overflowY","slice","minHeight","maxHeight","flex","labels","datasets","backgroundColor","act","yAxisID","order","EmptyWeatherWidget","city","setCity","ForecastMode","Forecast","dt","timezone","weekday","day","weather","icon","main","temp_max","temp_min","humidity","WeatherWidget","WEATHER_API","API_OPTIONS","cityToQuery","setCityToQuery","setWeather","forecast","setForecast","TODAY","forecastMode","setForecastMode","fetchDataFromWeatherApi","list","undefined","filterForecastByMode","WEEK","forecastDay","TOMORROW","placeItems","temp","sys","sunrise","sunset","maxWidth","borderColor","feels_like","maintainAspectRatio","updatedCity","TabDash","widgets","setWidgets","activeTab","useSelector","state","createWidget","widgetConfig","WEATHER","deleteWidgetFromDashboard","RSS","CALENDAR","STRAVA","STEAM","TWITTER_TIMELINE","deleteWidget","widget","fetch","newWidget","TabPane","Dash","tabs","setTabs","setNewWidget","dispatch","useDispatch","isMounted","useRef","refreshAllWidgets","emitCustomEvent","addNewTab","insertedTab","interval","setInterval","clearInterval","current","authService","Nav","vertical","navbar","addWidget","currentTarget","widgetData","responseType","URL","createObjectURL","Blob","setAttribute","appendChild","click","onDragEnd","destination","startIndex","endIndex","Array","from","splice","removed","reorder","source","updateTabs","droppableId","direction","providedDroppable","droppableProps","ref","innerRef","draggableId","providedDraggable","draggableProps","dragHandleProps","toggleTab","TabContent","initialState","createStore","action","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","ReactDOM","store","getElementById","origin","addEventListener","status","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.0015a297.chunk.js","sourcesContent":["export enum WidgetTypes {\n  WEATHER = 1,\n  RSS = 2,\n  CALENDAR = 3,\n  STRAVA = 4,\n  STEAM = 5,\n  TWITTER = 6,\n  TWITTER_TIMELINE = 7\n}\n","import { FunctionComponent, MouseEvent } from 'react';\nimport { Button, Card, CardBody, CardImg, CardSubtitle, CardText, CardTitle } from 'reactstrap';\nimport { WidgetTypes } from '../../enums/WidgetsEnum';\n\ninterface IProps {\n  onWidgetAdded: (type: MouseEvent<HTMLButtonElement>) => void;\n}\n\nconst Store: FunctionComponent<IProps> = (props) => {\n  return (\n    <div className=\"grid grid-cols-4 gap-3\">\n      {Object.keys(WidgetTypes).map((key) => {\n        return (\n          isNaN(parseInt(key, 0)) && (\n            <Card key={key}>\n              <CardImg top={true} width=\"100%\" src=\"/assets/318x180.svg\" alt=\"Card image cap\" />\n              <CardBody>\n                <CardTitle>{key}</CardTitle>\n                <CardSubtitle>Widget {key}</CardSubtitle>\n                <CardText>Cliquez ci-dessous pour ajouter un widget {key} au dashboard.</CardText>\n                <Button id={key} onClick={props.onWidgetAdded} className=\"btn btn-success\" value={WidgetTypes[key]}>\n                  Ajouter\n                </Button>\n              </CardBody>\n            </Card>\n          )\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Store;\n","import { ReactElement, useState, MouseEvent } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport Store from 'src/pages/store/Store';\n\ninterface IProps {\n  onWidgetAdded: (type: MouseEvent<HTMLButtonElement>) => void;\n}\n\nexport default function CreateWidgetModal(props: IProps): ReactElement {\n  const [createWidgetModal, setCreateWidgetModal] = useState(false);\n\n  function toggleCreateWidgetModal() {\n    setCreateWidgetModal(!createWidgetModal);\n  }\n\n  return (\n    <div>\n      <Button id=\"openAddWidgetModal\" className=\"dashNavbarLink\" onClick={toggleCreateWidgetModal}>\n        <i className=\"fa fa-plus-circle fa-lg\" aria-hidden=\"true\" />\n      </Button>\n      <Modal isOpen={createWidgetModal} size=\"lg\" toggle={toggleCreateWidgetModal}>\n        <ModalHeader toggle={toggleCreateWidgetModal}>Ajouter un widget</ModalHeader>\n        <ModalBody>\n          <Store onWidgetAdded={props.onWidgetAdded} />\n        </ModalBody>\n        <ModalFooter>\n          <Button id=\"closeAddWidgetModal\" color=\"primary\" onClick={toggleCreateWidgetModal}>\n            Fermer\n          </Button>\n        </ModalFooter>\n      </Modal>\n    </div>\n  );\n}\n","export default function authorizationBearer(): string {\n  if (localStorage.getItem('user')) {\n    const user = JSON.parse(localStorage.getItem('user') || '');\n    if (user && user.accessToken) {\n      return 'Bearer ' + user.accessToken;\n    } else {\n      return '';\n    }\n  } else {\n    return '';\n  }\n}\n","import * as winston from 'winston';\n\nconst logger = winston.createLogger({\n  format: winston.format.combine(winston.format.json(), winston.format.colorize({ all: true })),\n  level: 'debug',\n  transports: [new winston.transports.Console()]\n});\n\nexport default logger;\n","import { ChangeEvent, ReactElement, useState } from 'react';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { importConfig } from 'src/services/config.service';\nimport logger from 'src/utils/LogUtils';\n\nexport default function ImportConfigModal(): ReactElement {\n  const [selectedFile, setSelectedFile] = useState<File>();\n  const [importConfigModal, setImportConfigModal] = useState(false);\n\n  function toggleImportConfigModal() {\n    setImportConfigModal(!importConfigModal);\n  }\n\n  function selectFile(event: ChangeEvent<HTMLInputElement>) {\n    if (event.target.files && event.target.files[0]) {\n      setSelectedFile(event.target.files[0]);\n    }\n  }\n\n  function upload() {\n    if (selectedFile) {\n      return importConfig(selectedFile)\n        .then((response: boolean) => {\n          if (response) {\n            toggleImportConfigModal();\n          }\n        })\n        .catch(() => {\n          logger.error(\"Erreur lors de l'import du fichier\");\n        });\n    }\n  }\n\n  return (\n    <div>\n      <Button id=\"openImportConfigModal\" className=\"dashNavbarLink\" onClick={toggleImportConfigModal}>\n        <i className=\"fa fa-upload fa-lg\" aria-hidden=\"true\" />\n      </Button>\n      <Modal isOpen={importConfigModal} toggle={toggleImportConfigModal}>\n        <ModalHeader toggle={toggleImportConfigModal}>Importer la configuration</ModalHeader>\n        <ModalBody>\n          <input type=\"file\" id=\"file\" name=\"file\" onChange={selectFile} />\n\n          <button id=\"uploadFileButton\" className=\"btn btn-success\" disabled={!selectedFile} onClick={upload}>\n            Upload\n          </button>\n        </ModalBody>\n        <ModalFooter>\n          <Button id=\"closeImportConfigModal\" color=\"primary\" onClick={toggleImportConfigModal}>\n            Fermer\n          </Button>\n        </ModalFooter>\n      </Modal>\n    </div>\n  );\n}\n","import axios, { AxiosResponse } from 'axios';\nimport authorizationBearer from './auth.header';\n\nexport function exportConfig(): Promise<AxiosResponse<BlobPart>> {\n  return axios.get(`${process.env.REACT_APP_BACKEND_URL}/config/export`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    },\n    responseType: 'blob'\n  });\n}\n\nexport function importConfig(file: File): Promise<boolean> {\n  const formData = new FormData();\n  formData.append('file', file);\n  return axios.post(`${process.env.REACT_APP_BACKEND_URL}/config/import`, formData, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'content-type': 'multipart/form-data'\n    }\n  });\n}\n","import { ReactElement, useState } from 'react';\nimport { Button, NavItem, NavLink } from 'reactstrap';\nimport { ITab } from '../../model/Tab';\nimport { deleteTab, updateTab } from '../../services/tab.service';\ninterface IProps {\n  tab: ITab;\n  onTabClicked: () => void;\n  onTabDeleted: (id: number) => void;\n}\n\nexport default function NavDash(props: IProps): ReactElement {\n  const [label, setLabel] = useState(props.tab.label);\n  const [isToggled, toggle] = useState(false);\n\n  function deleteTabFromDash() {\n    deleteTab(props.tab.id).then(() => props.onTabDeleted(props.tab.id));\n  }\n\n  function saveTabName() {\n    updateTab(props.tab.id, label, props.tab.tabOrder).then(() => {\n      toggle(!isToggled);\n    });\n  }\n\n  function clickToggle() {\n    toggle(!isToggled);\n  }\n\n  function enterSaveTabName(event: React.KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      saveTabName();\n    }\n  }\n\n  return (\n    <NavItem className=\"clickableItem\" key={props.tab.id}>\n      <NavLink onClick={props.onTabClicked}>\n        {isToggled ? (\n          <div className=\"flex flex-row\">\n            <input\n              onDoubleClick={saveTabName}\n              onKeyPress={enterSaveTabName}\n              onChange={(event) => setLabel(event.target.value)}\n              value={label}\n            />\n            <Button className=\"deleteTabButton\" onClick={deleteTabFromDash}>\n              <i className=\"fa fa-trash\" />\n            </Button>\n          </div>\n        ) : (\n          <span onDoubleClick={clickToggle}>{label}</span>\n        )}\n      </NavLink>\n    </NavItem>\n  );\n}\n","import axios, { AxiosResponse } from 'axios';\nimport { ITab } from '../model/Tab';\nimport authorizationBearer from './auth.header';\n\nexport function getTabs(): Promise<AxiosResponse<unknown>> {\n  return axios.get(`${process.env.REACT_APP_BACKEND_URL}/tab`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n\nexport function addTab(label: string): Promise<AxiosResponse<unknown>> {\n  return axios.post(\n    `${process.env.REACT_APP_BACKEND_URL}/tab/addTab`,\n    { label: label },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function updateTab(id: number, label: string, tabOrder: number): Promise<AxiosResponse<unknown>> {\n  return axios.post(\n    `${process.env.REACT_APP_BACKEND_URL}/tab/updateTab`,\n    { id: id, label: label, tabOrder: tabOrder },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function updateTabs(tabs: ITab[]): Promise<AxiosResponse<unknown>> {\n  return axios.post(`${process.env.REACT_APP_BACKEND_URL}/tab/updateTabs`, tabs, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n\nexport function deleteTab(id: number): Promise<AxiosResponse<unknown>> {\n  return axios.delete(`${process.env.REACT_APP_BACKEND_URL}/tab/deleteTab/?id=${id}`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n","import axios, { AxiosResponse } from 'axios';\n\nconst headers = {\n  'Content-type': 'application/json'\n};\n\nfunction login(username: string, password: string): Promise<AxiosResponse<unknown>> {\n  return axios\n    .post(\n      `${process.env.REACT_APP_BACKEND_URL}/auth/login`,\n      {\n        username,\n        password\n      },\n      {\n        headers\n      }\n    )\n    .then((response) => {\n      if (response.data.accessToken) {\n        localStorage.setItem('user', JSON.stringify(response.data));\n      }\n\n      return response.data;\n    });\n}\n\nfunction logout(): void {\n  localStorage.removeItem('user');\n  window.location.reload();\n}\n\nfunction getCurrentUser(): unknown {\n  if (localStorage.getItem('user')) {\n    return JSON.parse(localStorage.getItem('user') || '');\n  }\n}\n\nexport default {\n  login,\n  logout,\n  getCurrentUser\n};\n","import React, { useState } from 'react';\nimport AuthService from '../../services/auth.service';\n\nexport default function Login(): React.ReactElement {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState('');\n\n  const onChangeUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setUsername(e.target.value);\n  };\n\n  const onChangePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  };\n\n  function handleLogin() {\n    setMessage('');\n    setLoading(true);\n\n    if (username && password) {\n      AuthService.login(username, password).then(\n        () => {\n          window.location.reload();\n          setLoading(false);\n        },\n        (error) => {\n          const resMessage =\n            (error.response && error.response.data && error.response.data.message) || error.message || error.toString();\n\n          setLoading(false);\n          setMessage(resMessage);\n        }\n      );\n    } else {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"col-md-12\">\n      <div>\n        <div className=\"form-group\">\n          <label htmlFor=\"username\">Username</label>\n          <input\n            id=\"inputUsername\"\n            type=\"text\"\n            className=\"form-control\"\n            name=\"username\"\n            value={username}\n            onChange={onChangeUsername}\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            id=\"inputPassword\"\n            type=\"password\"\n            className=\"form-control\"\n            name=\"password\"\n            value={password}\n            onChange={onChangePassword}\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <button\n            id=\"loginButton\"\n            disabled={!username || !password || loading}\n            onClick={handleLogin}\n            className=\"btn btn-success btn-block\"\n          >\n            {loading && <span className=\"spinner-border spinner-border-sm\"></span>}\n            <span>Se connecter</span>\n          </button>\n        </div>\n\n        {message && (\n          <div className=\"form-group\">\n            <div className=\"alert alert-danger\" role=\"alert\">\n              {message}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","export const TOGGLE_TAB = 'TOGGLE_TAB';\n","import { TOGGLE_TAB } from './actionTypes';\n\nexport const toggleSelectedTab = (id: number): { type: string; payload: { id: number } } => ({\n  type: TOGGLE_TAB,\n  payload: {\n    id\n  }\n});\n","import axios, { AxiosResponse } from 'axios';\nimport { IWidgetConfig } from 'src/widgets/IWidgetConfig';\nimport authorizationBearer from './auth.header';\n\nexport function addWidget(type: string, tabId: number): Promise<AxiosResponse<unknown>> {\n  return axios.post(\n    `${process.env.REACT_APP_BACKEND_URL}/widget/addWidget`,\n    { type: type, tab: { id: tabId } },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function updateWidgetData(id: number, data: unknown): Promise<AxiosResponse<IWidgetConfig>> {\n  return axios.patch(\n    `${process.env.REACT_APP_BACKEND_URL}/widget/updateWidgetData/${id}`,\n    { data: data },\n    {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    }\n  );\n}\n\nexport function deleteWidget(id: number): Promise<AxiosResponse<unknown>> {\n  return axios.delete(`${process.env.REACT_APP_BACKEND_URL}/widget/deleteWidget/?id=${id}`, {\n    headers: {\n      Authorization: authorizationBearer(),\n      'Content-type': 'application/json'\n    }\n  });\n}\n","export enum ModeEnum {\n  READ = 1,\n  EDIT = 2,\n  DELETE = 3\n}\n","import { useEffect, useState } from 'react';\nimport { Card, CardBody, Collapse } from 'reactstrap';\nimport './ComponentWithDetail.scss';\n\ninterface IProps {\n  componentRoot: React.ReactNode | string;\n  componentDetail: React.ReactNode | string;\n  link?: string;\n  isClosed?: boolean;\n  onOpenDetail?: () => void;\n}\n\nexport default function ComponentWithDetail(props: IProps): React.ReactElement {\n  const [openCollapse, setOpenCollapse] = useState(false);\n\n  useEffect(() => {\n    if (props.isClosed) {\n      setOpenCollapse(false);\n    }\n  }, [props.isClosed]);\n\n  const toggleCollapse = () => {\n    if (!openCollapse && props.onOpenDetail) {\n      props.onOpenDetail();\n    }\n    setOpenCollapse(!openCollapse);\n  };\n\n  return (\n    <div>\n      <div onClick={toggleCollapse} className=\"title\">\n        {props.componentRoot}\n      </div>\n      <div>\n        <Collapse isOpen={openCollapse}>\n          <Card>\n            <CardBody>{openCollapse && props.componentDetail && props.componentDetail}</CardBody>\n          </Card>\n        </Collapse>\n      </div>\n    </div>\n  );\n}\n","import { ReactElement } from 'react';\n\ninterface IProps {\n  idWidget: number;\n  onCancelButtonClicked: () => void;\n  onDeleteButtonClicked: (idWidget: number) => void;\n}\n\nexport default function DeleteWidget(props: IProps): ReactElement {\n  const confirmDeleteWidget = () => {\n    props.onDeleteButtonClicked(props.idWidget);\n  };\n\n  return (\n    <div>\n      <h4>Êtes-vous sûr de vouloir supprimer ce widget ?</h4>\n      <button onClick={props.onCancelButtonClicked} className=\"btn btn-primary cancelButton\">\n        Annuler\n      </button>\n      <button onClick={confirmDeleteWidget} className=\"btn btn-danger validateDeletionButton\">\n        Supprimer\n      </button>\n    </div>\n  );\n}\n","import { ReactElement, useEffect, useState } from 'react';\nimport { useCustomEventListener } from 'react-custom-events';\nimport { ModeEnum } from '../enums/ModeEnum';\nimport DeleteWidget from './utils/DeleteWidget';\n\ninterface IProps {\n  id: number;\n  tabId: number;\n  config: Record<string, unknown>;\n  header: ReactElement;\n  body: ReactElement;\n  additionalActionButtons?: ReactElement;\n  editModeComponent?: ReactElement;\n  refreshFunction: () => void;\n  onDeleteButtonClicked: (idWidget: number) => void;\n}\n\nexport default function Widget(props: IProps): ReactElement {\n  const [mode, setMode] = useState(ModeEnum.READ);\n\n  useCustomEventListener('refreshAllWidgets', () => {\n    props.refreshFunction();\n  });\n\n  useEffect(() => {\n    setMode(ModeEnum.READ);\n  }, [props.config]);\n\n  function editWidget() {\n    if (props.editModeComponent) {\n      setMode(ModeEnum.EDIT);\n    }\n  }\n\n  function cancelDeletion() {\n    setMode(ModeEnum.READ);\n  }\n\n  function deleteWidget() {\n    setMode(ModeEnum.DELETE);\n  }\n\n  return (\n    <div>\n      {mode === ModeEnum.READ && (\n        <div>\n          <div className=\"header\">\n            <div className=\"leftGroup widgetHeader\">{props.header}</div>\n            <div className=\"rightGroup\">\n              {props.additionalActionButtons}\n              {props.editModeComponent && (\n                <button onClick={editWidget} className=\"btn btn-default editButton\">\n                  <i className=\"fa fa-cog\" aria-hidden=\"true\" />\n                </button>\n              )}\n              <button onClick={props.refreshFunction} className=\"btn btn-default refreshButton\">\n                <i className=\"fa fa-refresh\" aria-hidden=\"true\" />\n              </button>\n              <button onClick={deleteWidget} className=\"btn btn-default deleteButton\">\n                <i className=\"fa fa-trash\" aria-hidden=\"true\" />\n              </button>\n            </div>\n          </div>\n          {props.body}\n        </div>\n      )}\n      {mode === ModeEnum.DELETE && (\n        <DeleteWidget\n          idWidget={props.id}\n          onDeleteButtonClicked={props.onDeleteButtonClicked}\n          onCancelButtonClicked={cancelDeletion}\n        />\n      )}\n      {mode === ModeEnum.EDIT && props.editModeComponent !== null && props.editModeComponent}\n    </div>\n  );\n}\n","import './CircularProgressBar.scss';\n\nfunction percentagetodegrees(percentage: number): string {\n  return ((percentage / 100) * 360).toString();\n}\n\ninterface IProps {\n  value: number;\n}\n\nexport default function CircularProgressBar(props: IProps): React.ReactElement {\n  return (\n    <div className=\"progress mx-auto\">\n      <span className=\"progressLeft\">\n        <span\n          style={{ transform: props.value > 50 ? `rotate(${percentagetodegrees(props.value - 50)}deg) ` : 'unset' }}\n          className=\"progressBar border-primary\"\n        ></span>\n      </span>\n      <span className=\"progressRight\">\n        <span\n          style={{\n            transform: props.value > 50 ? `rotate(180deg) ` : `rotate(${percentagetodegrees(props.value)}deg) `\n          }}\n          className=\"progressBar border-primary\"\n        ></span>\n      </span>\n      <div className=\"progressValue w-100 h-100 rounded-circle d-flex align-items-center justify-content-center\">\n        <div className=\"h2 font-weight-bold\">{Math.round(props.value)}%</div>\n      </div>\n    </div>\n  );\n}\n","import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport authorizationBearer from 'src/services/auth.header';\nimport CircularProgressBar from 'src/widgets/utils/circular-progress/CircularProgressBar';\nimport { IGameInfo } from '../IGameInfo';\n\ninterface IAchievement {\n  apiname: string;\n  achieved: number;\n  unlocktime: number;\n}\n\nexport default function GameDetails(props: IGameInfo): React.ReactElement {\n  const [achievements, setAchievements] = useState([]);\n  const [completedAchievements, setCompletedAchievements] = useState([]);\n  const STEAM_API_URL = 'https://api.steampowered.com';\n  const STEAM_IMAGE_URL = 'https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/apps/';\n  const STEAM_COMMUNITY_URL = 'https://steamcommunity.com/app/';\n  const GET_ACHIVEMENTS_URL = `${STEAM_API_URL}/ISteamUserStats/GetPlayerAchievements/v0001/?appid=${props.appid}&key=${process.env.REACT_APP_STEAM_API_KEY}&steamid=${process.env.REACT_APP_STEAM_USER_ID}`;\n\n  useEffect(() => {\n    axios\n      .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        },\n        params: {\n          url: GET_ACHIVEMENTS_URL\n        }\n      })\n      .then((response) => {\n        if (response.data.playerstats.achievements) {\n          setAchievements(response.data.playerstats.achievements);\n          setCompletedAchievements(\n            response.data.playerstats.achievements.filter((achievement: IAchievement) => achievement.achieved === 1)\n          );\n        }\n      });\n  }, [props]);\n\n  return (\n    <div>\n      <div className=\"flex flex-row\">\n        <div>{props.name}</div>\n        <a href={`${STEAM_COMMUNITY_URL}${props.appid}`}>\n          <img src={`${STEAM_IMAGE_URL}${props.appid}/${props.img_logo_url}.jpg                  `} />\n        </a>\n      </div>\n      {achievements && completedAchievements && achievements.length > 0 && (\n        <div className=\"flex flex-row\">\n          <div className=\"flex flex-column\">\n            <div className=\"totalachievements\">Succès : {achievements.length}</div>\n            <div className=\"completedAchievements\">Succès complétés : {completedAchievements.length}</div>\n          </div>\n          <CircularProgressBar value={(completedAchievements.length / achievements.length) * 100} />\n        </div>\n      )}\n    </div>\n  );\n}\n","import axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport ComponentWithDetail from 'src/components/detailComponent/ComponentWithDetail';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport GameDetails from './details/GameDetails';\nimport { IGameInfo } from './IGameInfo';\n\ninterface IPlayerData {\n  personaname: string;\n  profileurl: string;\n  avatar: string;\n}\n\nexport default function SteamWidget(props: IBaseWidgetConfig): React.ReactElement {\n  const [playerData, setPlayerData] = useState<IPlayerData>();\n  const [ownedGames, setOwnedGames] = useState<IGameInfo[]>();\n\n  const STEAM_API_URL = 'https://api.steampowered.com';\n  const GET_PLAYER_SUMMARIES_URL = `/ISteamUser/GetPlayerSummaries/v0002/?key=${process.env.REACT_APP_STEAM_API_KEY}&steamids=${process.env.REACT_APP_STEAM_USER_ID}`;\n  const GET_OWNED_GAMES_URL = `/IPlayerService/GetOwnedGames/v0001/?key=${process.env.REACT_APP_STEAM_API_KEY}&steamid=${process.env.REACT_APP_STEAM_USER_ID}&format=json&include_appinfo=true`;\n  const STEAM_IMAGE_URL = 'https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/apps/';\n  const STEAM_COMMUNITY_URL = 'https://steamcommunity.com/app/';\n\n  useEffect(() => {\n    refreshWidget();\n  }, []);\n\n  function refreshWidget() {\n    getPlayerData();\n    getOwnedGames();\n  }\n\n  function getPlayerData(): void {\n    axios\n      .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        },\n        params: {\n          url: `${STEAM_API_URL}${GET_PLAYER_SUMMARIES_URL}`\n        }\n      })\n      .then((response) => {\n        setPlayerData(response.data.response.players[0]);\n      })\n      .catch((error: Error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function getOwnedGames(): void {\n    axios\n      .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        },\n        params: {\n          url: `${STEAM_API_URL}${GET_OWNED_GAMES_URL}`\n        }\n      })\n      .then((response) => {\n        setOwnedGames(\n          (response.data.response.games as IGameInfo[]).sort((gameA, gameB) => gameA.name.localeCompare(gameB.name))\n        );\n      })\n      .catch((error) => {\n        logger.error(error.message);\n      });\n  }\n\n  const widgetHeader = (\n    <div>\n      <a href={playerData?.profileurl} className=\"flex flex-row\">\n        <img src={playerData?.avatar} />\n        <p>{playerData?.personaname}</p>\n      </a>\n    </div>\n  );\n\n  const widgetBody = (\n    <div className=\"flex flex-column\">\n      {ownedGames &&\n        ownedGames.map((game: IGameInfo) => {\n          return (\n            <ComponentWithDetail\n              key={game.appid}\n              componentRoot={\n                <div className=\"gameInfo flex flex-row\">\n                  <div>\n                    <img src={`${STEAM_IMAGE_URL}${game.appid}/${game.img_icon_url}.jpg                  `} />\n                  </div>\n                  <div>{game.name}</div>\n                </div>\n              }\n              componentDetail={<GameDetails {...game} />}\n              link={`${STEAM_COMMUNITY_URL}${game.appid}`}\n            />\n          );\n        })}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={{}}\n      header={widgetHeader}\n      body={widgetBody}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { useState } from 'react';\n\ninterface IProps {\n  profile?: string;\n  onProfileSubmitted: (profile: string) => void;\n}\n\nexport default function EmptyTwitterTimelineWidget(props: IProps): React.ReactElement {\n  const [profile, setProfile] = useState(props.profile);\n  const onChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => setProfile(event.target.value);\n  const onValidation = () => {\n    if (profile) {\n      props.onProfileSubmitted(profile);\n    }\n  };\n\n  return (\n    <div>\n      <input\n        id=\"twitterProfileName\"\n        onChange={onChangeHandler}\n        value={profile}\n        placeholder=\"Saisissez le nom de l'utilisateur\"\n      />\n      <button onClick={onValidation} disabled={!profile || profile?.length < 1} className=\"btn btn-success\">\n        Valider\n      </button>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport { Timeline } from 'react-twitter-widgets';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport { updateWidgetData } from 'src/services/widget.service';\nimport logger from 'src/utils/LogUtils';\nimport Widget from '../Widget';\nimport EmptyTwitterTimelineWidget from './emptyWidget/EmptyTwitterTimelineWidget';\n\ninterface IProps extends IBaseWidgetConfig {\n  profile?: string;\n}\n\nexport default function TwitterTimelineWidget(props: IProps): React.ReactElement {\n  const [profile, setProfile] = useState<string>(props.profile || '');\n\n  useEffect(() => {\n    if (props.profile) {\n      setProfile(props.profile);\n    }\n  }, []);\n\n  function onProfileSubmitted(widgetProfile: string): void {\n    updateWidgetData(props.id, { profile: widgetProfile })\n      .then(() => {\n        setProfile(widgetProfile);\n      })\n      .catch((error) => {\n        logger.error(error.message);\n      });\n  }\n\n  const widgetHeader = <div className=\"timelineHeader\">Timeline de {profile}</div>;\n\n  const widgetBody = (\n    <div>\n      {profile && <Timeline dataSource={{ sourceType: 'profile', screenName: profile }} options={{ theme: 'dark' }} />}\n    </div>\n  );\n\n  function refreshWidget() {\n    logger.info(`Refresh Twitter timeline widget ${profile}`);\n  }\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={{ profile }}\n      header={widgetHeader}\n      body={widgetBody}\n      editModeComponent={<EmptyTwitterTimelineWidget profile={profile} onProfileSubmitted={onProfileSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { useState } from 'react';\nimport './EmptyCalendarWidget.scss';\n\ninterface IProps {\n  calendarUrls?: string[];\n  onConfigSubmitted: (calendarUrls: string[]) => void;\n}\n\nexport default function EmptyCalendarWidget(props: IProps): React.ReactElement {\n  const [calendarUrls, setCalendarUrls] = useState<string[]>(props.calendarUrls || []);\n  const onValidation = () => {\n    props.onConfigSubmitted(calendarUrls);\n  };\n\n  const onCalendarUrlUpdated = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setCalendarUrls(\n      calendarUrls.map((url: string, index: number) =>\n        index.toString() === event.target?.id ? event.target.value : url\n      )\n    );\n  };\n\n  const onCalendarUrlAdded = () => {\n    setCalendarUrls(calendarUrls.concat(''));\n  };\n\n  function removeCalendarUrl(calendarUrl: string) {\n    setCalendarUrls(calendarUrls.filter((url) => url !== calendarUrl));\n  }\n\n  return (\n    <div>\n      <div>\n        {calendarUrls &&\n          calendarUrls.map((url, index) => {\n            return (\n              <div key={index}>\n                <input\n                  id={index.toString()}\n                  onChange={onCalendarUrlUpdated}\n                  value={url}\n                  placeholder=\"Saisissez une URL\"\n                />\n                <button className=\"removeCalendarUrl btn btn-danger\" onClick={() => removeCalendarUrl(url)}>\n                  Supprimer\n                </button>\n              </div>\n            );\n          })}\n        <button id=\"addCalendarUrl\" className=\"btn btn-primary\" onClick={onCalendarUrlAdded}>\n          Ajouter\n        </button>\n      </div>\n      <button\n        id=\"validateCalendarUrls\"\n        onClick={onValidation}\n        disabled={!calendarUrls || calendarUrls?.length < 1}\n        className=\"btn btn-success\"\n      >\n        Valider\n      </button>\n    </div>\n  );\n}\n","import axios from 'axios';\nimport format from 'date-fns/format';\nimport getDay from 'date-fns/getDay';\nimport { fr } from 'date-fns/locale';\nimport parse from 'date-fns/parse';\nimport startOfWeek from 'date-fns/startOfWeek';\nimport * as ical from 'ical';\nimport { ReactElement, useEffect, useState } from 'react';\nimport { Calendar, dateFnsLocalizer, Event } from 'react-big-calendar';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport { updateWidgetData } from '../../services/widget.service';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport './CalendarWidget.scss';\nimport EmptyCalendarWidget from './emptyWidget/EmptyCalendarWidget';\n\nexport interface IProps extends IBaseWidgetConfig {\n  calendars?: string[];\n}\n\nexport default function CalendarWidget(props: IProps): ReactElement {\n  const [calendarUrls, setCalendarUrls] = useState(props.calendars);\n  const [schedules, setSchedules] = useState<Event[]>([]);\n\n  const locales = {\n    fr: fr\n  };\n  const localizer = dateFnsLocalizer({\n    format,\n    parse,\n    startOfWeek,\n    getDay,\n    locales\n  });\n\n  useEffect(() => {\n    refreshWidget();\n  }, [calendarUrls]);\n\n  function onConfigSubmitted(updatedCalendars: string[]) {\n    updateWidgetData(props.id, { calendars: updatedCalendars })\n      .then(() => {\n        if (updatedCalendars === calendarUrls) {\n          refreshWidget();\n        }\n        setCalendarUrls(updatedCalendars);\n      })\n      .catch((error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function refreshWidget() {\n    setSchedules([]);\n    calendarUrls?.map((calendarUrl: string) => {\n      axios\n        .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/?url=${calendarUrl}`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          }\n        })\n        .then((response) => {\n          const data = ical.parseICS(response.data);\n          setSchedules((oldSchedules) =>\n            oldSchedules.concat(\n              ...Object.keys(data).map((eventKey) => {\n                const event = data[eventKey];\n                return {\n                  title: event.summary,\n                  start: event.start,\n                  end: event.end,\n                  allDay: event.end?.getHours() === 0 && event.start?.getHours() === 0\n                };\n              })\n            )\n          );\n        })\n        .catch((error) => {\n          logger.error(error);\n        });\n    });\n  }\n\n  const widgetHeader = <div>Calendar</div>;\n\n  const widgetBody = (\n    <div>\n      <Calendar\n        localizer={localizer}\n        culture={'fr'}\n        events={schedules}\n        startAccessor=\"start\"\n        endAccessor=\"end\"\n        defaultView=\"month\"\n        popup={true}\n        style={{ height: 500 }}\n      />\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={{ calendars: calendarUrls }}\n      header={widgetHeader}\n      body={widgetBody}\n      editModeComponent={<EmptyCalendarWidget calendarUrls={calendarUrls} onConfigSubmitted={onConfigSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","export function formatDateFromTimestamp(timestamp: number, offset = 0): Date {\n  return new Date(timestamp * 1000 + offset * 1000);\n}\n\nexport function formatDateFromUTC(date: string): string {\n  const parsedDate = new Date(date);\n  return parsedDate.toLocaleString('fr');\n}\n\nexport function adjustTimeWithOffset(offset: number): number {\n  const localeOffset = -(new Date().getTimezoneOffset() * 60);\n  if (Math.abs(offset) === Math.abs(localeOffset)) {\n    return 0;\n  }\n  const offsetMilliseconds = Math.abs(offset) + Math.abs(localeOffset);\n  return offset < localeOffset ? -offsetMilliseconds : offsetMilliseconds;\n}\n","import { FunctionComponent } from 'react';\nimport { formatDateFromUTC } from '../../../utils/DateUtils';\nimport { IArticle } from './IArticle';\nimport './RSSArticle.scss';\n\nfunction stripHtmlFromContent(content?: string) {\n  const div = document.createElement('div');\n  div.innerHTML = content || '';\n  return div.textContent || div.innerText || '';\n}\n\nconst RSSArticle: FunctionComponent<IArticle> = (props) => {\n  return (\n    <div className=\"article\">\n      <div className=\"articleTitle\">\n        <a href={props.link}>{props.title}</a>\n      </div>\n      <div className=\"articleContent\">\n        {stripHtmlFromContent(props.content) || stripHtmlFromContent(props.description)}\n      </div>\n      <div className=\"articlePubDate\">\n        Publié le {formatDateFromUTC(props.pubDate || '')} {props.author && 'par ' + props.author}\n      </div>\n    </div>\n  );\n};\n\nexport default RSSArticle;\n","import { useState } from 'react';\nimport './EmptyRSSWidget.scss';\n\ninterface IProps {\n  url?: string;\n  onUrlSubmitted: (url: string) => void;\n}\n\nexport default function EmptyRSSWidget(props: IProps): React.ReactElement {\n  const [url, setUrl] = useState(props.url);\n  const onChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => setUrl(event.target.value);\n  const onValidation = () => {\n    if (url) {\n      props.onUrlSubmitted(url);\n    }\n  };\n\n  return (\n    <div>\n      <input\n        id=\"rssFeedUrl\"\n        name=\"url\"\n        onChange={onChangeHandler}\n        value={url}\n        placeholder=\"Saisissez l'URL du flux RSS\"\n      />\n      <button onClick={onValidation} disabled={!url || url?.length < 1} className=\"btn btn-success\">\n        Valider\n      </button>\n    </div>\n  );\n}\n","import axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport RSSParser from 'rss-parser';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport ComponentWithDetail from '../../components/detailComponent/ComponentWithDetail';\nimport { updateWidgetData } from '../../services/widget.service';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport { IArticle, ImageContent, IRSSHeader } from './article/IArticle';\nimport RSSArticle from './article/RSSArticle';\nimport EmptyRSSWidget from './emptyWidget/EmptyRSSWidget';\nimport './RSSWidget.scss';\n\ninterface IProps extends IBaseWidgetConfig {\n  url?: string;\n  readArticlesGuids?: string[];\n}\n\nexport default function RSSWidget(props: IProps): React.ReactElement {\n  const [feed, setFeed] = useState<IArticle[]>([]);\n  const [url, setUrl] = useState(props.url || '');\n  const [description, setDecription] = useState('');\n  const [image, setImage] = useState<ImageContent>();\n  const [link, setLink] = useState('');\n  const [title, setTitle] = useState('');\n  const [isFeedClosed, setFeedClosed] = useState(true);\n  const [readArticles, setReadArticles] = useState<string[]>(props.readArticlesGuids || []);\n  const rssParser = new RSSParser();\n\n  function fetchDataFromRssFeed() {\n    if (url) {\n      axios\n        .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/?url=${url}`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          }\n        })\n        .then((apiResult) => {\n          rssParser\n            .parseString(apiResult.data)\n            .then((response) => {\n              const result = response as IRSSHeader;\n              setDecription(result.description);\n              setFeed(result.items);\n              setImage(result.image);\n              setLink(result.link);\n              setTitle(result.title);\n            })\n            .catch((error) => {\n              logger.error(error.message);\n            });\n        })\n        .catch((error) => {\n          logger.error(error.message);\n        });\n    }\n  }\n\n  useEffect(() => {\n    fetchDataFromRssFeed();\n  }, [url]);\n\n  function refreshWidget() {\n    setFeed([]);\n    fetchDataFromRssFeed();\n  }\n\n  function onUrlSubmitted(rssUrl: string): void {\n    updateWidgetData(props.id, { url: rssUrl, guidsList: [] })\n      .then(() => {\n        setUrl(rssUrl);\n        refreshWidget();\n      })\n      .catch((error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function formatTitleForArticle(article: IArticle) {\n    const date = article.pubDate\n      ? new Date(article.pubDate).toLocaleTimeString('fr', {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      : '';\n    return (\n      <div className={`rssArticle ${readArticles.includes(article.guid) ? 'read' : ''}`}>\n        {date} {article.title}\n      </div>\n    );\n  }\n\n  function onOpenDetail(guid: string): void {\n    setFeedClosed(false);\n    if (!readArticles.includes(guid)) {\n      updateRssFeed([guid, ...readArticles]);\n    }\n  }\n\n  function markAllFeedAsRead(): void {\n    updateRssFeed(feed.map((article) => article.guid));\n  }\n\n  function updateRssFeed(readArticlesGuids: string[]): void {\n    updateWidgetData(props.id, {\n      url: url,\n      readArticlesGuids: readArticlesGuids\n    })\n      .then((result) => {\n        setReadArticles(result.data.data.readArticlesGuids as []);\n      })\n      .catch((error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function closeFeeds(): void {\n    setFeedClosed(true);\n  }\n\n  function getFeedFromRSS(data: IArticle[]) {\n    return data.map((article) => {\n      return (\n        <ComponentWithDetail\n          key={article.guid}\n          componentRoot={formatTitleForArticle(article)}\n          componentDetail={<RSSArticle {...article} />}\n          link={article.link}\n          isClosed={isFeedClosed}\n          onOpenDetail={() => onOpenDetail(article.guid)}\n        />\n      );\n    });\n  }\n\n  const widgetHeader = (\n    <div className=\"rssWidgetTitle\">\n      <a href={link} className=\"flex flex-row\">\n        {image && (\n          <div>\n            <img className=\"imgLogoRSS\" src={image?.url} alt=\"logo\" />\n          </div>\n        )}\n        <div className=\"rssTitle\">{title}</div>\n      </a>\n    </div>\n  );\n\n  const additionalActionButtons = (\n    <div className=\"flex flex-row\">\n      <button onClick={markAllFeedAsRead} className=\"btn btn-default markAllArticlesAsRead\">\n        <i className=\"fa fa-check-circle-o\" aria-hidden=\"true\" />\n      </button>\n      <button onClick={closeFeeds} className=\"btn btn-default minimizeAllArticles\">\n        <i className=\"fa fa-window-minimize\" aria-hidden=\"true\" />\n      </button>\n    </div>\n  );\n\n  const widgetBody = (\n    <div>\n      {url && feed && (\n        <div>\n          <div className=\"rssDescription\">{description}</div>\n          <div className=\"feed\">{getFeedFromRSS(feed)}</div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={{ url: url }}\n      header={widgetHeader}\n      additionalActionButtons={additionalActionButtons}\n      body={widgetBody}\n      editModeComponent={<EmptyRSSWidget url={url} onUrlSubmitted={onUrlSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { useState } from 'react';\nimport logger from '../utils/LogUtils';\n\nexport function useLocalStorage(key: string, initialValue: unknown): [unknown, (value: unknown) => void] {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      logger.error(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value: unknown) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      logger.error(error);\n    }\n  };\n  return [storedValue, setValue];\n}\n","import { format } from 'date-fns';\nimport { ReactElement } from 'react';\nimport { IActivity } from '../IStrava';\n\nexport default function StravaActivity(props: IActivity): ReactElement {\n  return (\n    <div>\n      <div>\n        <a href={`https://www.strava.com/activities/${props.id}`}>\n          {format(new Date(props.start_date_local), 'dd MMM')} {props.name}\n        </a>\n      </div>\n      <div>Distance : {Math.round(props.distance * 1000) / 10000} kms</div>\n      <div>Durée : {props.moving_time / 60} mins</div>\n      <div>Denivelé : {props.total_elevation_gain}</div>\n      <div>Trophées : {props.achievement_count}</div>\n      <div>Vitesse moyenne : {props.average_speed}</div>\n      <div>Vitesse max : {props.max_speed}</div>\n      <div>Kudos : {props.kudos_count}</div>\n      <div>Commentaires : {props.comment_count}</div>\n    </div>\n  );\n}\n","import axios from 'axios';\nimport * as queryString from 'query-string';\nimport { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Button } from 'reactstrap';\nimport ComponentWithDetail from '../../components/detailComponent/ComponentWithDetail';\nimport { useLocalStorage } from '../../hooks/localStorageHook';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport StravaActivity from './activity/StravaActivity';\nimport { IActivity, IAthlete } from './IStrava';\nimport { format, isAfter, isBefore } from 'date-fns';\nimport ChartComponent from 'react-chartjs-2';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\n\nexport default function StravaWidget(props: IBaseWidgetConfig): React.ReactElement {\n  const [activities, setActivities] = useState([]);\n  const [athlete, setAthlete] = useState<IAthlete>();\n  const [token, setToken] = useLocalStorage('strava_token', null);\n  const [refreshToken, setRefreshToken] = useLocalStorage('strava_refresh_token', null);\n  const [tokenExpirationDate, setTokenExpirationDate] = useLocalStorage('strava_token_expires_at', null);\n  const { search } = useLocation();\n\n  const paginationActivities = 20;\n\n  useEffect(() => {\n    const values = queryString.parse(search);\n    if (values && values.code) {\n      const apiCode = values.code.toString();\n      getToken(apiCode);\n    }\n    if (!token || !refreshToken || isBefore(new Date((tokenExpirationDate as number) * 1000), new Date())) {\n      refreshTokenFromApi();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (token) {\n      refreshWidget();\n    }\n  }, [token]);\n\n  function refreshWidget() {\n    setActivities([]);\n    getAthleteData();\n    getActivities();\n  }\n\n  function getToken(apiCode: string) {\n    axios\n      .post('https://www.strava.com/oauth/token', {\n        client_id: process.env.REACT_APP_STRAVA_CLIENT_ID,\n        client_secret: process.env.REACT_APP_STRAVA_CLIENT_SECRET,\n        code: apiCode,\n        grant_type: 'authorization_code'\n      })\n      .then((response) => {\n        setToken(response.data.access_token as string);\n        setRefreshToken(response.data.refresh_token);\n        setTokenExpirationDate(response.data.expires_at);\n        setAthlete(response.data.athlete);\n      })\n      .catch((error: Error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function refreshTokenFromApi() {\n    if (refreshToken) {\n      axios\n        .post('https://www.strava.com/oauth/token', {\n          client_id: process.env.REACT_APP_STRAVA_CLIENT_ID,\n          client_secret: process.env.REACT_APP_STRAVA_CLIENT_SECRET,\n          refresh_token: refreshToken,\n          grant_type: 'refresh_token'\n        })\n        .then((response) => {\n          setToken(response.data.access_token);\n          setRefreshToken(response.data.refresh_token);\n          setTokenExpirationDate(response.data.expires_at);\n          setAthlete(response.data.athlete);\n        })\n        .catch((error: Error) => {\n          logger.error(error.message);\n        });\n    } else {\n      logger.error('No refresh token');\n    }\n  }\n\n  function getAthleteData() {\n    if (token) {\n      axios\n        .get('https://www.strava.com/api/v3/athlete', {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n        .then((response) => {\n          setAthlete(response.data);\n        })\n        .catch((error: Error) => {\n          logger.error(error.message);\n        });\n    }\n  }\n\n  function getActivities() {\n    if (token && tokenExpirationDate && isAfter(new Date((tokenExpirationDate as number) * 1000), new Date())) {\n      axios\n        .get(`https://www.strava.com/api/v3/athlete/activities?page=1&per_page=${paginationActivities}`, {\n          headers: { Authorization: `Bearer ${token}` }\n        })\n        .then((response) => {\n          setActivities(response.data.reverse());\n        })\n        .catch((error) => {\n          logger.error(error.message);\n        });\n    } else {\n      refreshTokenFromApi();\n    }\n  }\n\n  function getActivitiesByMonth() {\n    return activities.reduce((activitiesByMonth: IActivity[], activity: IActivity) => {\n      const month = format(new Date(activity.start_date_local), 'yyyy-MM');\n      if (!activitiesByMonth[month]) {\n        activitiesByMonth[month] = [];\n      }\n      activitiesByMonth[month].push(Math.round(activity.distance * 1000) / 1000000);\n      return activitiesByMonth;\n    }, []);\n  }\n\n  function getStatsFromActivities() {\n    const activitiesByMonthList = getActivitiesByMonth();\n    return Object.keys(activitiesByMonthList).map((month) => {\n      return {\n        x: new Date(month),\n        y: Math.round(activitiesByMonthList[month].reduce((total: number, distance: number) => total + distance))\n      };\n    });\n  }\n\n  const widgetHeader = (\n    <div>\n      <a href={`https://www.strava.com/athletes/${athlete?.id}`} className=\"flex flex-row\">\n        <img src={athlete?.profile_medium} />\n        <p>\n          {athlete?.firstname} {athlete?.lastname}\n        </p>\n      </a>\n    </div>\n  );\n\n  const widgetBody = (\n    <div className=\"flex flex-column\">\n      {token &&\n        refreshToken &&\n        tokenExpirationDate &&\n        isAfter(new Date((tokenExpirationDate as number) * 1000), new Date()) && (\n          <div>\n            <div style={{ height: '20vh', overflowY: 'scroll' }}>\n              {activities\n                .slice()\n                .reverse()\n                .map((activity: IActivity) => {\n                  return (\n                    <ComponentWithDetail\n                      key={activity.id}\n                      componentRoot={`${format(new Date(activity.start_date_local), 'dd MMM')}  ${activity.name}  ${\n                        Math.round(activity.distance * 1000) / 1000000\n                      } kms`}\n                      componentDetail={<StravaActivity {...activity} />}\n                      link={`https://www.strava.com/activities/${activity.id}`}\n                    />\n                  );\n                })}\n            </div>\n\n            <div style={{ minHeight: '25vh', maxHeight: '80vh', flex: '1 0 50%' }}>\n              <ChartComponent\n                type=\"bar\"\n                data={{\n                  labels: getStatsFromActivities().map((data) => format(data.x, 'MMM yyyy')),\n                  datasets: [\n                    {\n                      label: 'Distance (kms)',\n                      backgroundColor: 'orange',\n                      data: getStatsFromActivities().map((act) => act.y),\n                      yAxisID: 'kms',\n                      order: 2\n                    },\n                    {\n                      label: 'Activités',\n                      type: 'line',\n                      backgroundColor: 'darkgreen',\n                      data: Object.keys(getActivitiesByMonth()).map((month) => getActivitiesByMonth()[month].length),\n                      yAxisID: 'activities',\n                      order: 1\n                    }\n                  ]\n                }}\n              />\n            </div>\n          </div>\n        )}\n      {(!token ||\n        !refreshToken ||\n        (tokenExpirationDate && isBefore(new Date((tokenExpirationDate as number) * 1000), new Date()))) && (\n        <a\n          href={`https://www.strava.com/oauth/authorize?client_id=${process.env.REACT_APP_STRAVA_CLIENT_ID}&redirect_uri=${process.env.REACT_APP_FRONTEND_URL}&response_type=code&scope=read,activity:read`}\n        >\n          <Button>Se connecter</Button>\n        </a>\n      )}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={{}}\n      header={widgetHeader}\n      body={widgetBody}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { useState } from 'react';\nimport './EmptyWeatherWidget.scss';\n\ninterface IProps {\n  city?: string;\n  onConfigSubmitted: (city: string) => void;\n}\n\nexport default function EmptyWeatherWidget(props: IProps): React.ReactElement {\n  const [city, setCity] = useState(props.city || '');\n  const onCityChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => setCity(event.target.value);\n  const onValidation = () => {\n    props.onConfigSubmitted(city);\n  };\n\n  return (\n    <div>\n      <input\n        id=\"cityNameInput\"\n        name=\"city\"\n        onChange={onCityChangeHandler}\n        value={city}\n        placeholder=\"Saisissez de nom de la ville\"\n      />\n      <button\n        id=\"validateButton\"\n        className=\"btn btn-success\"\n        onClick={onValidation}\n        disabled={!city || city?.length < 1}\n      >\n        Valider\n      </button>\n    </div>\n  );\n}\n","import axios, { AxiosResponse } from 'axios';\nimport { format } from 'date-fns';\nimport { useEffect, useState } from 'react';\nimport { Line } from 'react-chartjs-2';\nimport IBaseWidgetConfig from 'src/model/IBaseWidgetConfig';\nimport authorizationBearer from 'src/services/auth.header';\nimport { updateWidgetData } from '../../services/widget.service';\nimport { adjustTimeWithOffset, formatDateFromTimestamp } from '../../utils/DateUtils';\nimport logger from '../../utils/LogUtils';\nimport Widget from '../Widget';\nimport EmptyWeatherWidget from './emptyWidget/EmptyWeatherWidget';\nimport Forecast from './forecast/Forecast';\nimport { ICity, IForecast, IWeather, IWeatherAPIResponse } from './IWeather';\nimport './WeatherWidget.scss';\n\ninterface IProps extends IBaseWidgetConfig {\n  city?: string;\n}\n\nenum ForecastMode {\n  TODAY,\n  TOMORROW,\n  WEEK\n}\n\nexport default function WeatherWidget(props: IProps): React.ReactElement {\n  const WEATHER_API = 'https://api.openweathermap.org/data/2.5/';\n  const WEATHER_ENDPOINT = 'weather';\n  const FORECAST_ENDPOINT = 'forecast';\n  const API_OPTIONS = '?units=metric&lang=fr&appid=';\n\n  const [cityToQuery, setCityToQuery] = useState(props.city);\n  const [weather, setWeather] = useState<IWeather>();\n  const [forecast, setForecast] = useState<IForecast[]>();\n  const [city, setCity] = useState<ICity>();\n  const [forecastMode, setForecastMode] = useState<ForecastMode>(ForecastMode.TODAY);\n\n  function fetchDataFromWeatherApi() {\n    if (cityToQuery) {\n      axios\n        .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          },\n          params: {\n            url: `${WEATHER_API}${WEATHER_ENDPOINT}${API_OPTIONS}${process.env.REACT_APP_OPENWEATHERMAP_KEY}&q=${cityToQuery}`\n          }\n        })\n        .then((result) => {\n          setWeather(result.data);\n        })\n        .catch((error: Error) => {\n          logger.error(error);\n        });\n      axios\n        .get(`${process.env.REACT_APP_BACKEND_URL}/proxy/`, {\n          headers: {\n            Authorization: authorizationBearer(),\n            'Content-type': 'application/json'\n          },\n          params: {\n            url: `${WEATHER_API}${FORECAST_ENDPOINT}${API_OPTIONS}${process.env.REACT_APP_OPENWEATHERMAP_KEY}&q=${cityToQuery}`\n          }\n        })\n        .then((result: AxiosResponse) => {\n          setForecast((result.data as IWeatherAPIResponse).list);\n          setCity((result.data as IWeatherAPIResponse).city);\n        })\n        .catch((error: Error) => {\n          logger.error(error.message);\n        });\n    }\n  }\n\n  useEffect(() => {\n    fetchDataFromWeatherApi();\n  }, [cityToQuery]);\n\n  function refreshWidget() {\n    setWeather(undefined);\n    setForecast(undefined);\n    setCity(undefined);\n    fetchDataFromWeatherApi();\n  }\n\n  function onConfigSubmitted(updatedCity: string) {\n    updateWidgetData(props.id, {\n      city: updatedCity\n    })\n      .then(() => {\n        setCityToQuery(updatedCity);\n        refreshWidget();\n      })\n      .catch((error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function filterForecastByMode(): IForecast[] {\n    if (city && forecast) {\n      switch (forecastMode) {\n        case ForecastMode.WEEK: {\n          return forecast.filter((forecastDay) => {\n            const forecastElement = formatDateFromTimestamp(forecastDay.dt, adjustTimeWithOffset(city.timezone));\n            return forecastElement.getHours() === 17;\n          });\n        }\n        case ForecastMode.TOMORROW: {\n          return forecast.filter(\n            (forecastDay) =>\n              new Date(forecastDay.dt * 1000).getDay() === new Date(+new Date() + 86400000).getDay() &&\n              new Date(forecastDay.dt * 1000).getHours() >= 7\n          );\n        }\n        case ForecastMode.TODAY:\n        default: {\n          return forecast.filter(\n            (forecastDay) =>\n              new Date(forecastDay.dt * 1000).getDay() === new Date().getDay() &&\n              new Date(forecastDay.dt * 1000).getHours() >= 7\n          );\n        }\n      }\n    } else {\n      return [];\n    }\n  }\n\n  function selectTodayForecast(): void {\n    setForecastMode(ForecastMode.TODAY);\n  }\n\n  function selectTomorrowForecast(): void {\n    setForecastMode(ForecastMode.TOMORROW);\n  }\n\n  function selectWeekForecast(): void {\n    setForecastMode(ForecastMode.WEEK);\n  }\n\n  const widgetHeader = <div>La météo aujourd'hui à {city?.name}</div>;\n\n  const widgetBody = (\n    <div>\n      {city && weather && weather.weather && (\n        <div className=\"flex flex-row\">\n          <div>\n            <img\n              style={{ width: '80px' }}\n              src={`https://openweathermap.org/img/wn/${weather.weather[0].icon}@2x.png`}\n              title={weather.weather[0].description}\n              alt={weather.weather[0].description}\n            />\n          </div>\n          <div className=\"flex flex-row\" style={{ placeItems: 'center' }}>\n            <div className=\"flexColumn mr-5\">\n              <div>{weather.weather[0].description}</div>\n              <div>\n                <i className=\"fa fa-thermometer-three-quarters fa-md\" /> {weather.main.temp}°\n              </div>\n            </div>\n            <div className=\"flexColumn\">\n              <div className=\"spaceBetween\">\n                <div>\n                  <i className=\"fa fa-sun-o fa-md\" />{' '}\n                  {formatDateFromTimestamp(\n                    weather.sys.sunrise,\n                    adjustTimeWithOffset(weather.timezone)\n                  ).toLocaleTimeString('fr')}\n                </div>\n                <div>\n                  <i className=\"fa fa-moon-o fa-md\" />{' '}\n                  {formatDateFromTimestamp(\n                    weather.sys.sunset,\n                    adjustTimeWithOffset(weather.timezone)\n                  ).toLocaleTimeString('fr')}\n                </div>\n              </div>\n              <div>\n                <i className=\"fa fa-clock-o fa-md\" />{' '}\n                {formatDateFromTimestamp(weather.dt, adjustTimeWithOffset(weather.timezone)).toLocaleString('fr')}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n      {city && forecast && (\n        <div>\n          <div className=\"flex flex-row space-x-10\">\n            <span className=\"font-bold\">Prévisions</span>\n            <span className=\"flex flex-row space-x-1\">\n              <button\n                id=\"toggleTodayForecast\"\n                onClick={selectTodayForecast}\n                className={`btn btn-${forecastMode === ForecastMode.TODAY ? 'success' : 'primary'} `}\n              >\n                Aujourd'hui\n              </button>\n              <button\n                id=\"toggleTomorrowForecast\"\n                onClick={selectTomorrowForecast}\n                className={`btn btn-${forecastMode === ForecastMode.TOMORROW ? 'success' : 'primary'}`}\n              >\n                Demain\n              </button>\n              <button\n                id=\"toggleWeekForecast\"\n                onClick={selectWeekForecast}\n                className={`btn btn-${forecastMode === ForecastMode.WEEK ? 'success' : 'primary'}`}\n              >\n                Semaine\n              </button>\n            </span>\n          </div>\n          <br />\n          <div style={{ height: '20vh', maxWidth: '100%' }}>\n            <Line\n              data={{\n                labels: filterForecastByMode().map((forecastDay) => {\n                  if (forecastMode === ForecastMode.TODAY || forecastMode === ForecastMode.TOMORROW) {\n                    return format(new Date(forecastDay.dt * 1000), 'HH');\n                  } else {\n                    return format(new Date(forecastDay.dt * 1000), 'EEE dd MMM');\n                  }\n                }),\n                datasets: [\n                  {\n                    label: 'Température',\n                    borderColor: 'orange',\n                    data: filterForecastByMode().map((forecastDay) => forecastDay.main.temp_max)\n                  },\n                  {\n                    label: 'Ressenti',\n                    borderColor: 'red',\n                    data: filterForecastByMode().map((forecastDay) => forecastDay.main.feels_like)\n                  }\n                ]\n              }}\n              options={{ maintainAspectRatio: false }}\n            />\n          </div>\n          <div className=\"flex flex-row forecastRow\">\n            {city &&\n              forecast &&\n              filterForecastByMode().map((forecastDay) => {\n                return (\n                  <div className=\"forecastContainer\" key={forecastDay.dt}>\n                    <Forecast {...forecastDay} city={city} />\n                  </div>\n                );\n              })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  return (\n    <Widget\n      id={props.id}\n      tabId={props.tabId}\n      config={{ city: city }}\n      header={widgetHeader}\n      body={widgetBody}\n      editModeComponent={<EmptyWeatherWidget city={cityToQuery} onConfigSubmitted={onConfigSubmitted} />}\n      refreshFunction={refreshWidget}\n      onDeleteButtonClicked={props.onDeleteButtonClicked}\n    />\n  );\n}\n","import { FunctionComponent } from 'react';\nimport { adjustTimeWithOffset, formatDateFromTimestamp } from '../../../utils/DateUtils';\nimport { IForecast } from '../IWeather';\nimport './Forecast.scss';\n\nconst Forecast: FunctionComponent<IForecast> = (props) => {\n  return (\n    <div className=\"forecast\">\n      <div>\n        {formatDateFromTimestamp(props.dt, adjustTimeWithOffset(props.city.timezone)).toLocaleString('fr', {\n          weekday: 'short',\n          day: 'numeric',\n          hour: '2-digit'\n        })}\n      </div>\n      <div className=\"flex flex-row\">\n        <div>\n          <img\n            src={`https://openweathermap.org/img/wn/${props.weather[0]?.icon}@2x.png`}\n            className=\"smallImage\"\n            title={props.weather[0]?.description}\n            alt={props.weather[0]?.description}\n          />\n        </div>\n        <div>\n          <div>\n            <i className=\"fa fa-thermometer-three-quarters fa-sm mr-3\" style={{ color: 'crimson' }} />\n            {props.main.temp_max}°\n          </div>\n          <div>\n            <i className=\"fa fa-thermometer-quarter fa-sm mr-3\" style={{ color: 'blue' }} />\n            {props.main.temp_min}°\n          </div>\n          <div>\n            <i className=\"fa fa-tint fa-sm mr-3\" style={{ color: 'lightblue' }} />\n            {props.main.humidity}%\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Forecast;\n","import { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { TabPane } from 'reactstrap';\nimport authorizationBearer from 'src/services/auth.header';\nimport SteamWidget from 'src/widgets/steam/SteamWidget';\nimport TwitterTimelineWidget from 'src/widgets/twitter/TwitterTimelineWidget';\nimport { WidgetTypes } from '../enums/WidgetsEnum';\nimport { ITabState } from '../reducers/tabReducer';\nimport { deleteWidget } from '../services/widget.service';\nimport logger from '../utils/LogUtils';\nimport CalendarWidget from '../widgets/calendar/CalendarWidget';\nimport { IWidgetConfig } from '../widgets/IWidgetConfig';\nimport RSSWidget from '../widgets/rss/RSSWidget';\nimport StravaWidget from '../widgets/strava/StravaWidget';\nimport WeatherWidget from '../widgets/weather/WeatherWidget';\n\ninterface IProps {\n  tabId: number;\n  newWidget?: IWidgetConfig;\n}\n\nexport default function TabDash(props: IProps): React.ReactElement {\n  const [widgets, setWidgets] = useState([]);\n  const activeTab = useSelector((state: ITabState) => state.activeTab);\n\n  useEffect(() => {\n    if (activeTab === props.tabId) {\n      fetch(`${process.env.REACT_APP_BACKEND_URL}/widget/?tabId=${props.tabId}`, {\n        headers: {\n          Authorization: authorizationBearer(),\n          'Content-type': 'application/json'\n        }\n      })\n        .then((result) => {\n          return result.json();\n        })\n        .then((result) => {\n          setWidgets(result);\n        })\n        .catch((error: Error) => {\n          logger.error(error.message);\n        });\n    }\n  }, [activeTab]);\n\n  useEffect(() => {\n    if (props.newWidget) {\n      setWidgets((widgets as IWidgetConfig[]).concat([props.newWidget]) as []);\n    }\n  }, [props.newWidget != null && props.newWidget.id]);\n\n  function createWidget(widgetConfig: IWidgetConfig) {\n    switch (widgetConfig.type) {\n      case WidgetTypes.WEATHER: {\n        return (\n          <WeatherWidget\n            id={widgetConfig.id}\n            tabId={widgetConfig.tab.id}\n            {...widgetConfig.data}\n            onDeleteButtonClicked={deleteWidgetFromDashboard}\n          />\n        );\n      }\n      case WidgetTypes.RSS: {\n        return (\n          <RSSWidget\n            id={widgetConfig.id}\n            tabId={widgetConfig.tab.id}\n            {...widgetConfig.data}\n            onDeleteButtonClicked={deleteWidgetFromDashboard}\n          />\n        );\n      }\n      case WidgetTypes.CALENDAR: {\n        return (\n          <CalendarWidget\n            id={widgetConfig.id}\n            tabId={widgetConfig.tab.id}\n            {...widgetConfig.data}\n            onDeleteButtonClicked={deleteWidgetFromDashboard}\n          />\n        );\n      }\n      case WidgetTypes.STRAVA: {\n        return (\n          <StravaWidget\n            id={widgetConfig.id}\n            tabId={widgetConfig.tab.id}\n            {...widgetConfig.data}\n            onDeleteButtonClicked={deleteWidgetFromDashboard}\n          />\n        );\n      }\n      case WidgetTypes.STEAM: {\n        return (\n          <SteamWidget\n            id={widgetConfig.id}\n            tabId={widgetConfig.tab.id}\n            {...widgetConfig.data}\n            onDeleteButtonClicked={deleteWidgetFromDashboard}\n          />\n        );\n      }\n      case WidgetTypes.TWITTER_TIMELINE: {\n        return (\n          <TwitterTimelineWidget\n            id={widgetConfig.id}\n            tabId={widgetConfig.tab.id}\n            {...widgetConfig.data}\n            onDeleteButtonClicked={deleteWidgetFromDashboard}\n          />\n        );\n      }\n      default: {\n        return;\n      }\n    }\n  }\n\n  function deleteWidgetFromDashboard(id: number) {\n    deleteWidget(id)\n      .then((response) => {\n        if (response) {\n          setWidgets(\n            widgets.filter((widget: IWidgetConfig) => {\n              return widget.id !== id;\n            })\n          );\n        }\n      })\n      .catch((error: Error) => {\n        logger.error(error.message);\n      });\n  }\n\n  return (\n    <TabPane tabId={props.tabId}>\n      <div className=\"widgetList\">\n        {widgets &&\n          widgets.length > 0 &&\n          widgets.map((widgetConfig: IWidgetConfig) => {\n            return (\n              <div key={widgetConfig.id} className=\"widget\">\n                {createWidget(widgetConfig)}\n              </div>\n            );\n          })}\n      </div>\n    </TabPane>\n  );\n}\n","import 'font-awesome/fonts/fontawesome-webfont.svg';\nimport { useEffect, useRef, useState } from 'react';\nimport { DragDropContext, Draggable, Droppable, DroppableProvided, DropResult } from 'react-beautiful-dnd';\nimport { emitCustomEvent } from 'react-custom-events';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button, Nav, TabContent } from 'reactstrap';\nimport './Dash.scss';\nimport CreateWidgetModal from './modals/CreateWidgetModal';\nimport ImportConfigModal from './modals/ImportConfigModal';\nimport { ITab } from './model/Tab';\nimport NavDash from './navigation/navDash/NavDash';\nimport Login from './pages/login/Login';\nimport { toggleSelectedTab } from './reducers/actions';\nimport { ITabState } from './reducers/tabReducer';\nimport authorizationBearer from './services/auth.header';\nimport authService from './services/auth.service';\nimport { exportConfig } from './services/config.service';\nimport { addTab, updateTabs } from './services/tab.service';\nimport { addWidget } from './services/widget.service';\nimport TabDash from './tab/TabDash';\nimport logger from './utils/LogUtils';\nimport { IWidgetConfig } from './widgets/IWidgetConfig';\n\nexport interface IMenu {\n  link: string;\n  icon: string;\n}\n\nexport default function Dash(): React.ReactElement {\n  const [tabs, setTabs] = useState<ITab[]>([]);\n  const [newWidget, setNewWidget] = useState<IWidgetConfig>();\n\n  const activeTab = useSelector((state: ITabState) => state.activeTab);\n  const dispatch = useDispatch();\n  const isMounted = useRef(false);\n\n  const refreshTimeout = 900000; // 15 minutes\n\n  useEffect(() => {\n    const interval = setInterval(refreshAllWidgets, refreshTimeout);\n    return () => clearInterval(interval); // Clear interval on unmount\n  }, []);\n\n  useEffect(() => {\n    if (isMounted.current && tabs && tabs.length === 0) {\n      addNewTab();\n    }\n  }, [tabs]);\n\n  function initDashboard() {\n    fetch(`${process.env.REACT_APP_BACKEND_URL}/tab/`, {\n      headers: {\n        Authorization: authorizationBearer(),\n        'Content-type': 'application/json'\n      }\n    })\n      .then((result) => {\n        return result.json();\n      })\n      .then((result) => {\n        setTabs(result);\n        if (result && result.length > 0) {\n          dispatch(toggleSelectedTab(result[0].id));\n        }\n        isMounted.current = true;\n      })\n      .catch((error: Error) => {\n        logger.error(error.message);\n      });\n  }\n\n  function toggleTab(tab: number) {\n    if (activeTab !== tab) {\n      dispatch(toggleSelectedTab(tab));\n    }\n  }\n\n  function refreshAllWidgets() {\n    emitCustomEvent('refreshAllWidgets');\n  }\n\n  function addNewTab() {\n    const newTabLabel = 'Nouvel onglet';\n    addTab(newTabLabel).then((response) => {\n      const insertedTab = response.data as ITab;\n      setTabs(tabs.concat(insertedTab));\n      dispatch(toggleSelectedTab(insertedTab.id));\n    });\n  }\n\n  function getNewWidget(tabId: number) {\n    if (newWidget && tabId === newWidget.tab.id) {\n      return newWidget;\n    } else {\n      return undefined;\n    }\n  }\n\n  function onWidgetAdded(type: React.MouseEvent<HTMLButtonElement>) {\n    if (activeTab) {\n      addWidget(type.currentTarget.value, activeTab)\n        .then((response) => {\n          if (response) {\n            const widgetData = response.data as IWidgetConfig;\n            setNewWidget(widgetData);\n          }\n        })\n        .catch((error) => {\n          logger.error(error.message);\n        });\n    }\n  }\n\n  function onTabDeleted(id: number) {\n    if (tabs.length > 1) {\n      if (tabs[0].id === id) {\n        dispatch(toggleSelectedTab(tabs[1].id));\n      } else if (activeTab === id) {\n        dispatch(toggleSelectedTab(tabs[0].id));\n      } else {\n        dispatch(toggleSelectedTab(activeTab));\n      }\n    }\n    setTabs(tabs.filter((tab) => tab.id !== id));\n  }\n\n  function reorder(list: unknown[], startIndex: number, endIndex: number): unknown[] {\n    const result = Array.from(list);\n    const [removed] = result.splice(startIndex, 1);\n    result.splice(endIndex, 0, removed);\n    return result;\n  }\n\n  function onDragEnd(result: DropResult) {\n    if (!result.destination) {\n      return;\n    }\n\n    const items = reorder(tabs, result.source.index, result.destination.index).map((tab, index) => {\n      (tab as ITab).tabOrder = index;\n      return tab;\n    });\n    updateTabs(items as ITab[]).then((response) => {\n      setTabs(response.data as ITab[]);\n    });\n  }\n\n  function downloadConfig(): Promise<void> {\n    return exportConfig()\n      .then((response) => {\n        logger.info('Configuration exportée');\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', 'dashboardConfig.json');\n        document.body.appendChild(link);\n        link.click();\n      })\n      .catch(() => {\n        logger.error(\"Erreur lors de l'export de la configuration\");\n      });\n  }\n\n  useEffect(initDashboard, []);\n\n  return (\n    <div className=\"dash\">\n      {!authService.getCurrentUser() && <Login />}\n      {authService.getCurrentUser() && (\n        <div className=\"flex flex-row\">\n          <div className=\"dashNavbar\">\n            {activeTab && tabs.length > 0 && (\n              <Nav vertical={true} navbar={true}>\n                <CreateWidgetModal onWidgetAdded={onWidgetAdded} />\n                <div>\n                  <Button id=\"reloadAllWidgetsButton\" className=\"dashNavbarLink\" onClick={refreshAllWidgets}>\n                    <i className=\"fa fa-refresh fa-lg\" aria-hidden=\"true\" />\n                  </Button>\n                </div>\n                <div>\n                  <Button id=\"downloadConfigButton\" className=\"dashNavbarLink\" onClick={downloadConfig}>\n                    <i className=\"fa fa-download fa-lg\" aria-hidden=\"true\" />\n                  </Button>\n                </div>\n\n                <ImportConfigModal />\n              </Nav>\n            )}\n          </div>\n\n          <div className=\"flex flex-column tabsBar\">\n            <Nav tabs={true}>\n              <div className=\"flex flex-row\">\n                <DragDropContext onDragEnd={onDragEnd}>\n                  <Droppable droppableId=\"droppable\" direction=\"horizontal\">\n                    {(providedDroppable: DroppableProvided) => (\n                      <div\n                        className=\"flex flex-row\"\n                        {...providedDroppable.droppableProps}\n                        ref={providedDroppable.innerRef}\n                      >\n                        {tabs.length > 0 &&\n                          tabs.map((tab: ITab, index: number) => {\n                            return (\n                              <Draggable key={tab.id} draggableId={tab.id.toString()} index={index}>\n                                {(providedDraggable) => (\n                                  <div\n                                    key={tab.id}\n                                    ref={providedDraggable.innerRef}\n                                    {...providedDraggable.draggableProps}\n                                    {...providedDraggable.dragHandleProps}\n                                    className={`tab ${tab.id === activeTab ? 'selectedItem' : ''}`}\n                                  >\n                                    <NavDash\n                                      tab={tab}\n                                      onTabClicked={() => toggleTab(tab.id)}\n                                      onTabDeleted={onTabDeleted}\n                                    />\n                                  </div>\n                                )}\n                              </Draggable>\n                            );\n                          })}\n                        {providedDroppable.placeholder}\n                      </div>\n                    )}\n                  </Droppable>\n                </DragDropContext>\n                <Button onClick={addNewTab} id=\"addNewTabButton\" className=\"fa fa-plus-circle fa-lg\" />\n                <Button onClick={authService.logout} className=\"btn btn-primary\">\n                  Se déconnecter\n                </Button>\n              </div>\n            </Nav>\n            <TabContent activeTab={activeTab}>\n              {tabs.length > 0 &&\n                tabs.map((tab: ITab) => {\n                  return <TabDash key={tab.id} newWidget={getNewWidget(tab.id)} tabId={tab.id} />;\n                })}\n            </TabContent>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { TOGGLE_TAB } from './actionTypes';\n\nexport interface ITabState {\n  activeTab: number;\n}\n\nconst initialState: ITabState = {\n  activeTab: -1\n};\n\nexport default function (state = initialState, action: { type: string; payload: { id: number } }): ITabState {\n  switch (action.type) {\n    case TOGGLE_TAB: {\n      const { id } = action.payload;\n      return {\n        ...state,\n        activeTab: id\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import { createStore } from 'redux';\nimport rootReducer from './tabReducer';\n\nexport default createStore(rootReducer);\n","// tslint:disable:no-console\n// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the 'N+1' visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL!, window.location.toString());\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker) {\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the old content will have been purged and\n                // the fresh content will have been added to the cache.\n                // It's the perfect time to display a 'New content is\n                // available; please refresh.' message in your web app.\n                console.log('New content is available; please refresh.');\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // 'Content is cached for offline use.' message.\n                console.log('Content is cached for offline use.');\n              }\n            }\n          };\n        }\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (response.status === 404 || response.headers.get('content-type')!.indexOf('javascript') === -1) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import * as ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport Dash from './Dash';\nimport './index.css';\nimport store from './reducers/store';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <Dash />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nregisterServiceWorker();\n"],"sourceRoot":""}